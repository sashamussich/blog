/*!CK:3821281882!*//*1448336071,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["6KLDZ"]); }

__d("AtWorkInviteCoworkerSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={RHC_MODULE:"rhc_module",NEWSFEED_NUX:"newsfeed_nux",IOS_APP:"ios_app",ANDROID_APP:"android_app",BULK_UPLOAD:"bulk_upload",GROUP_INVITE_DIALOG:"group_invite_dialog",GROUP_INVITE_TYPEAHEAD:"group_invite_typeahead",SEARCH_RESULT:"search_result",SEARCH_RHC:"search_rhc",SEARCH_TYPEAHEAD:"search_typeahead",SELF_INVITE:"self_invite",SELF_INVITE_VIA_INVITE_LINK:"self_invite_via_invite_link"};},null);
__d("XAtWorkInviteCoworkerController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/work\/invitecoworker\/",{email:{type:"String",required:true},source:{type:"Enum",required:true,enumType:1}});},null);
__d('AtWorkInviteCoworkerMixin',['AtWorkInviteCoworkerSource','AsyncRequest','Image.react','immutable','React','XAtWorkInviteCoworkerController','XUIText.react','getObjectValues','ix','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=l.PropTypes;'use strict';f.exports={inviteCoworkerPropTypes:{source:s.oneOf(o(h)).isRequired},_addInviteCoworkerInitialState:function(t){return Object.assign(t,{emailsAdded:new k.List(),emailFieldValue:'',inputError:null,showSubmitButton:false,pendingRequest:false});},_onEmailFieldFocus:function(){this.setState({showSubmitButton:true});},_onEmailFieldChange:function(event){this.setState({emailFieldValue:event.target.value,inputError:null});},_onServerResponse:function(t){if(t.payload.success){this.setState({pendingRequest:false,emailsAdded:this.state.emailsAdded.push(this.state.emailFieldValue),emailFieldValue:'',inputError:null});this.refs.emailField.focusInput();}else this.setState({pendingRequest:false,inputError:t.payload.error});},_submitInvite:function(){if(!this.state.emailFieldValue)return;this.setState({pendingRequest:true});var t=m.getURIBuilder().setString('email',this.state.emailFieldValue).setEnum('source',this.props.source).getURI();new i().setURI(t).setHandler(this._onServerResponse).send();},_renderEmailsAdded:function(){if(this.state.emailsAdded.size>0){return this.state.emailsAdded.map(function(t,u){return (l.createElement('div',{className:"_3-8x",key:u},l.createElement(j,{src:p('/images/careers/check.png'),alt:'confirmation tick',className:"_3-8_"}),r._("Invited {email}",[r.param('email',l.createElement(n,{weight:'bold'},t))])));});}else return null;}};},null);
__d('WorkNewsfeedNuxInviteCoworkers.react',['AsyncRequest','AtWorkInviteCoworkerMixin','Image.react','ImageBlock.react','InlineBlock.react','React','Layout.react','XUIButton.react','XUIText.react','XUITextInput.react','XWorkNewsfeedNuxNextStepController','cx','ix','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();var v=n.Column,w=n.FillColumn,x=m.PropTypes,y=m.createClass({displayName:'WorkNewsfeedNuxInviteCoworkers',mixins:[i],propTypes:Object.assign({subtitle:x.string.isRequired,placeholder:x.string.isRequired},i.inviteCoworkerPropTypes),getInitialState:function(){return this._addInviteCoworkerInitialState({});},_renderSubmitButton:function(){if(this.state.showSubmitButton){var z=u._("Invite"),aa="_3-9a _1v8x";return (m.createElement(o,{label:z,use:'confirm',disabled:this.state.pendingRequest,size:'large',onClick:this._submitInvite,className:aa}));}else return null;},render:function(){var z=this._renderSubmitButton(),aa=this._renderEmailsAdded(),ba;if(aa===null){ba=m.createElement('div',{className:"_ugp"},m.createElement(p,{size:'small'},this.props.subtitle));}else ba=aa;return (m.createElement('div',{className:"clearfix"},m.createElement('div',{className:"_ugm"},m.createElement(k,null,m.createElement(j,{src:t('/images/atwork/newsfeed_nux_invite_coworkers.png'),alt:'invite co-workers image',className:"_ugn"}),m.createElement(l,{alignv:'middle',height:150,fullWidth:true},m.createElement('div',{className:"_ugo"},m.createElement(p,{size:'medium'},u._("Make sure your co-workers see your updates! Enter their emails below to invite them to use Facebook at Work."))),m.createElement('div',null,m.createElement(n,{className:"_1v91"+(this.state.showSubmitButton?' '+"_1v92":'')},m.createElement(w,null,m.createElement(q,{className:"_1v95",height:'tall',value:this.state.emailFieldValue,onChange:this._onEmailFieldChange,onFocus:this._onEmailFieldFocus,onEnter:this._submitInvite,disabled:this.state.pendingRequest,placeholder:this.props.placeholder,xuiError:this.state.inputError,ref:'emailField'})),m.createElement(v,null,z))),ba))),m.createElement('div',{className:"rfloat"},m.createElement(o,{label:u._("Done"),use:'default',onClick:this._onDoneClick,disabled:this.state.pendingRequest}))));},_onDoneClick:function(z){var aa=this.state.emailsAdded.size===0,ba=r.getURIBuilder().getURI();new h().setURI(ba).setData({current_step_id:this.props.stepID,skipped:aa}).send();this.setState({pendingRequest:true});}});f.exports=y;},null);
__d('ChatSidebarCoworkersOrderedList.react',['Animation','AsyncDialog','AsyncRequest','ChatQuietLinks','ChatSidebarConstants','ChatSidebarSections','ChatSidebarUserGroup.react','React','ReactDOM','Scroll','URI','cx','shield','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=o.PropTypes,w=o.createClass({displayName:'ChatSidebarCoworkersOrderedList',propTypes:{topUsers:v.array.isRequired,availableUsers:v.array.isRequired,isSidebar:v.bool.isRequired,scrollContainer:v.object},getInitialState:function(){return {mouseOver:true,pauseRendering:false};},shouldComponentUpdate:function(x,y){return !y.mouseOver&&!y.pauseRendering;},componentDidMount:function(){k.nukeLinks(p.findDOMNode(this));},_scrollToSeparator:function(){if(!this.props.scrollContainer)return;var x=p.findDOMNode(this.refs.usersSeparator),y=this.props.scrollContainer.scrollHeight,z=this.props.scrollContainer.clientHeight,aa=q.getTop(this.props.scrollContainer),ba=Math.min(x.offsetTop,y-z);if(aa!==ba){var ca=Math.abs(ba-aa)/this.props.scrollContainer.clientHeight*500;new h(this.props.scrollContainer).to('scrollTop',ba).ease(h.ease.end).duration(ca).go();}},_openBlackbirdSettings:function(){var x=new r('/ajax/chat/privacy/settings_dialog.php').addQueryData({ref:'whitelist_separator'});i.send(new j(x));},_renderOnlineSection:function(){var x=l.getImageSize(this.props.isSidebar);return [o.createElement('div',{key:'users_separator',ref:'usersSeparator',onClick:this._scrollToSeparator,className:"_554m moreOnlineFriends"},o.createElement('div',{className:"_554o"},o.createElement('div',{className:"_554n"},o.createElement('span',{className:"_554p"},u._("{MORE ONLINE COWORKERS} ({=count})",[u.param('MORE ONLINE COWORKERS',u._("MORE COWORKERS")),u.param('=count',this.props.availableUsers.length)])),o.createElement('div',{className:"_554q"},o.createElement('span',{className:"_554r"}))))),o.createElement(n,{key:m.MORE_ONLINE_COWORKERS,sectionName:m.MORE_ONLINE_COWORKERS,ids:this.props.availableUsers,imageSize:x})];},render:function(){var x=l.getImageSize(this.props.isSidebar),y=this.props.topUsers,z=this._renderOnlineSection();return (o.createElement('div',babelHelpers._extends({},this.props,{onMouseEnter:t(this.setState,this,{mouseOver:true}),onMouseLeave:t(this.setState,this,{mouseOver:false})}),o.createElement(n,{key:m.ORDERED_COWORKERS,sectionName:m.ORDERED_COWORKERS,ids:y,imageSize:x}),z));}});f.exports=w;},null);
__d('ChatCoworkersOrderedList',['Arbiter','ArbiterMixin','AvailableList','AvailableListConstants','CSS','ChatHovercard','ChatOrderedListHover','ChatSidebarConstants','ChatSidebarCoworkersOrderedList.react','DOM','DataStore','JSLogger','OrderedFriendsList','Parent','React','ReactDOM','Scroll','Vector','csx','debounceAcrossTransitions','mixin','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da,ea,fa=null;da=babelHelpers.inherits(ga,ba(i));ea=da&&da.prototype;function ga(ha,ia){'use strict';ea.constructor.call(this);this._isSidebar=ha;this._root=ia;this._isVisible=false;this._excludedIds={};this._numTopCoworkers=5;this._hoverController=null;this._orderedList=q.find(this._root,'.fbChatOrderedList');this._scrollableOrderedList=u.byClass(this._root,'scrollableOrderedList');this._chatSidebar=u.byClass(this._root,'fbChatSidebar');this._scrollableArea=u.byClass(this._root,'scrollable');if(this._isSidebar)new m(this);this.inform('initialized',this,h.BEHAVIOR_PERSISTENT);var ja=t.getList();h.subscribe(s.DUMP_EVENT,(function(ka,la){la.chat_lists=la.chat_lists||{sorted_list:this.getCachedSortedList(),ordered_list:ja,available_list:ga.getAvailableList(ja,this._numTopCoworkers),excluded_list:this._excludedIds};}).bind(this));j.subscribe(k.ON_AVAILABILITY_CHANGED,ca(this._render,this));}ga.prototype.getShowingUsers=function(){'use strict';return q.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};ga.prototype.getUserForNode=function(ha){'use strict';return r.get(ha,'id')||r.get(ha,'serverthreadid');};ga.prototype.getHoverController=function(){'use strict';if(!this._hoverController)this._hoverController=new n(this);return this._hoverController;};ga.prototype.getItemHeight=function(){'use strict';return o.getItemHeight();};ga.prototype.getRoot=function(){'use strict';return this._root;};ga.prototype.getSortedList=function(ha){'use strict';return ga.getSortedList(ha||this._excludedIds,this._numTopCoworkers);};ga.prototype.getCachedSortedList=function(ha){'use strict';if(fa==null)fa=this.getSortedList(ha);return fa;};ga.prototype.hide=function(){'use strict';if(!this._isVisible)return;this._isVisible=false;l.hide(this._scrollableOrderedList||this._root);this.inform('hide');};ga.prototype._getChatTabOpenLogData=function(ha){'use strict';var ia=l.hasClass(document.documentElement,'sidebarMode'),ja={mode:ia?'sidebar':'chatNub',typehead:false};if(this._scrollableArea&&this._scrollContainer){var ka=y.getElementPosition(this._scrollableArea,'viewport').y,la=y.getElementPosition(ha,'viewport').y,ma=x.getTop(this._scrollContainer);if(la>ka){ja.visible_slot=Math.round((la-ka)/32);var na=Math.round(ma/32);ja.global_slot=ja.visible_slot+na;}}if(ia){ja.sidebar_height=this._chatSidebar&&this._chatSidebar.clientHeight;if(this._scrollContainer)ja.buddylist_height=this._scrollContainer.clientHeight;}return ja;};ga.prototype.setNumTopFriends=function(ha){'use strict';if(ha!==this._numTopCoworkers){this._numTopCoworkers=ha;this._render();}};ga.prototype._renderOrderedList=function(){'use strict';if(!this._isVisible)return;var ha=ga.getSortedList({},this._numTopCoworkers),ia=ga.getAvailableList(t.getList(),this._numTopCoworkers);w.render(v.createElement(p,{availableUsers:ia,isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:ha}),this._orderedList);this.inform('render');};ga.prototype._render=function(){'use strict';this._render=aa(this._renderOrderedList.bind(this),300);this._render();};ga.prototype.show=function(){'use strict';if(this._isVisible)return;this._isVisible=true;l.show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};ga.prototype.isVisible=function(){'use strict';return this._isVisible;};ga.prototype.setScrollContainer=function(ha){'use strict';if(q.contains(ha,this._root))this._scrollContainer=ha;};ga.getSortedList=function(ha,ia){'use strict';var ja=t.getList(),ka=[];Array.prototype.push.apply(ka,ja);ka=ka.slice(0,ia);if(ka.length===ia){var la=ga.getAvailableList(ja,ia).length;la&&ka.splice(-1);}fa=ka.slice();return ka;};ga.getAvailableList=function(ha,ia){'use strict';var ja=[];Array.prototype.push.apply(ja,ha);var ka=ja.length;return ja.slice(ia,ka-ia);};f.exports=ga;},null);