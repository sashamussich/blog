/*!CK:2623629217!*//*1448924744,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["hWoup"]); }

__d("MessageThreadViewSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",NEW_MESSAGETAB:"new_message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};},null);
__d("MNCommerceErrors",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ALREADY_UNLINKED:1893001};},null);
__d("MNCommerceReplyTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMMERCE_LINK:2};},null);
__d("P2PPaymentLogMessageSubtype",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired"};},null);
__d("PagesManagerMessagingTabPerfEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGE_TAB_WILL_RENDER:"message_tab_will_render",MESSAGE_TAB_APP_DID_RENDER:"message_tab_app_did_render",MESSAGE_TAB_THREAD_LIST_DID_RENDER:"message_tab_thread_list_did_render",MESSAGE_TAB_DETAIL_VIEW_DID_RENDER:"message_tab_detail_view_did_render",OLD_MESSAGE_TAB_WILL_RENDER:"old_message_tab_will_render",OLD_MESSAGE_TAB_DID_RENDER:"old_message_tab_did_render"};},null);
__d("PagesMessagingActionPlacement",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SPRINGBOARD_INLINE_ACTION:"springboard_inline_action",THREAD_LIST_BATCH_ACTION:"thread_list_batch_action",THREAD_ROW_ACTION_ICON:"thread_row_action_icon",MESSAGE_DIALOG_ACTION_LIST:"message_dialog_action_list",MESSAGE_DIALOG_OPENING:"message_dialog_opening",MESSAGE_DIALOG_SHOWN:"message_dialog_shown",THREAD_TITLE_BAR:"thread_title_bar",HOME_PAGE_PAGELET_INLINE_ACTION:"home_page_pagelet_inline_action",UNKNOWN:"unknown"};},null);
__d('PagesMessengerConfirmCloseThreadDialog.react',['React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p,q=h.PropTypes,r=300;o=babelHelpers.inherits(s,h.Component);p=o&&o.prototype;function s(t){'use strict';p.constructor.call(this,t);}s.prototype.render=function(){'use strict';return (h.createElement(i,{layerHideOnBlur:false,shown:this.props.shown,width:r},h.createElement(m,{showCloseButton:false},n._("Close Message Thread")),h.createElement(j,null,n._("You haven't sent your message yet. Do you want to leave without sending it?")),h.createElement(l,null,h.createElement(k,{action:'cancel',label:n._("Continue Writing"),onClick:this.props.onCancel,use:'default'}),h.createElement(k,{action:'confirm',label:n._("Leave This Thread"),onClick:this.props.onConfirm,use:'confirm'}))));};s.propTypes={onCancel:q.func.isRequired,onConfirm:q.func.isRequired,shown:q.bool.isRequired};f.exports=s;},null);
__d('UFICreatorInfo.react',['HelpLink.react','React','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'UFICreatorInfo',propTypes:{creatorID:m.string.isRequired,creatorType:m.string.isRequired,creatorName:m.string.isRequired,labelType:m.string.isRequired,pageID:m.string.isRequired,profileURI:m.string},render:function(){var o,p=this.getCreatorLink();switch(this.props.labelType){case 'commented':o=l._("Commented on by {creator}",[l.param('creator',p)]);break;case 'edited_comment':o=l._("Edited by {creator}",[l.param('creator',p)]);break;case 'sent_message':o=l._("Sent by {creator}",[l.param('creator',p)]);break;case 'page_admin_note':o=l._("Noted by {creator}",[l.param('creator',p)]);break;default:return;}return (i.createElement('span',null,o,i.createElement(h,{tooltip:this.getHelpText()})));},getCreatorLink:function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (i.createElement('a',{className:'uiLinkSubtle','aria-label':this.getTooltipText(),'data-hover':'tooltip'},this.props.creatorName));case 'business_admin':return (i.createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (i.createElement('span',{className:'uiLinkSubtle'},i.createElement('img',{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (i.createElement('span',{className:'uiLinkSubtle'},this.props.creatorName));}},getTooltipText:function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}},getProfileLinkWithHovercard:function(){if(!this.props.profileURI)return i.createElement('span',null,this.props.creatorName);var o=new j('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (i.createElement('a',{className:'uiLinkSubtle','data-hovercard':o,href:this.props.profileURI},this.props.creatorName));},getApplicationText:function(){switch(this.props.labelType){case 'commented':return l._("This was commented on by someone using {application}.",[l.param('application',this.props.creatorName)]);case 'edited_comment':return l._("This was edited by someone using {application}.",[l.param('application',this.props.creatorName)]);case 'sent_message':return l._("This was sent by someone using {application}.",[l.param('application',this.props.creatorName)]);case 'page_admin_note':return l._("This was noted by someone using {application}.",[l.param('application',this.props.creatorName)]);}},getIndirectAdminText:function(){switch(this.props.labelType){case 'commented':return l._("This was commented on by someone from {page}.",[l.param('page',this.props.creatorName)]);case 'edited_comment':return l._("This was edited by someone from {page}.",[l.param('page',this.props.creatorName)]);case 'sent_message':return l._("This was sent by someone from {page}.",[l.param('page',this.props.creatorName)]);case 'page_admin_note':return l._("This was noted by someone from {page}.",[l.param('page',this.props.creatorName)]);}},getGrayAccountText:function(){switch(this.props.labelType){case 'commented':return l._("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return l._("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return l._("This was sent by someone who doesn't have a personal Facebook account.");case 'page_admin_note':return l._("This was noted by someone who doesn't have a personal Facebook account.");}},getHelpText:function(){switch(this.props.labelType){case 'commented':return l._("Only people who manage this Page can see who posted a comment");case 'edited_comment':return l._("Only people who manage this Page can see who edited a comment");case 'sent_message':return l._("Only people who manage this Page can see who sent a message");case 'page_admin_note':return l._("Only people who manage this Page can see who created a note");}}});f.exports=n;},null);
__d('PagesMessengerCreatorInfo.react',['React','UFICreatorInfo.react','XUIGrayText.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;o.prototype.render=function(){return (h.createElement(j,{className:"_ajk"+(this.props.isNote?' '+"_45l2":''),display:'inline',shade:'light',size:'small'},h.createElement(i,{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI})));};function o(){l.apply(this,arguments);}o.propTypes={creator_info:n.shape({creatorID:n.string.isRequired,creatorName:n.string.isRequired,creatorType:n.string.isRequired,labelType:n.string.isRequired,pageID:n.string.isRequired,profileURI:n.string}).isRequired};f.exports=o;},null);
__d('ChatFileUploaderMixin',['SubscriptionsHandler','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.PropTypes,k={propTypes:{attachmentsShelf:j.object,onFileUploaderMounted:j.func,onUploadFinished:j.func,onUpdateAttachmentsShelf:j.func,onSubmit:j.func},setUpSubscriptionsHandler:function(l){this._uploader=l;this._subscriptions=new h();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function(){return this._uploader.isUploading();},getAttachments:function(){return this._uploader.getAttachments();},getImageFiles:function(){return this._uploader.getImageFiles();},getVideoFiles:function(){return this._uploader.getVideoFiles();},getAudioFiles:function(){return this._uploader.getAudioFiles();},getFiles:function(){return this._uploader.getFiles();},removeAttachments:function(){return this._uploader.removeAttachments();},_handleUploadFinished:function(){if(this.props.onUploadFinished){var l;(l=this.props).onUploadFinished.apply(l,arguments);}},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf){var l;(l=this.props).onUpdateAttachmentsShelf.apply(l,arguments);}},_handleSubmit:function(){if(this.props.onSubmit){var l;(l=this.props).onSubmit.apply(l,arguments);}}};f.exports=k;},null);
__d('PagesMessengerFileUploader.react',['ChatFileUploaderMixin','Image.react','InlineBlock.react','Link.react','MercuryConfig','MercuryFileUploader','React','ReactDOM','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=n.createClass({displayName:'PagesMessengerFileUploader',mixins:[h],propTypes:{actionURI:s.string,iconSize:s.oneOf(['small','large'])},shouldComponentUpdate:function(u,v){return u.actionURI!=this.props.actionURI;},componentDidMount:function(){this._fileUploader=new m(this.props.attachmentsShelf,o.findDOMNode(this.refs.form),o.findDOMNode(this.refs.input),o.findDOMNode(this.refs.attachID));this.setUpSubscriptionsHandler(this._fileUploader);},addFiles:function(u){this._fileUploader.addDroppedFiles(u);},getDefaultProps:function(){return {actionURI:l.upload_url,iconSize:'small'};},render:function(){return (n.createElement('form',{action:this.props.actionURI,method:'post',ref:'form'},n.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),n.createElement(j,{className:"_m _4q60 _3rzn"},n.createElement(k,{className:"_4q61"+(this.props.iconSize==='small'?' '+"_509v":'')+(this.props.iconSize==='large'?' '+"_5njm":'')+(' '+"bizOK")},this._renderIcon()),n.createElement('input',{type:'file',className:"_n",name:'attachment[]',multiple:'true',ref:'input'}))));},_renderIcon:function(){if(this.props.iconSize==='small'){return (n.createElement(i,{alt:q._("File"),src:r('/images/composer/attachments/paperclip_icon.png')}));}else if(this.props.iconSize==='large')return (n.createElement(i,{alt:q._("File"),src:r('/images/pages/pages_manager/messages/composer-attach.png')}));}});f.exports=t;},null);
__d('MercuryPageMessageActions',['MercuryActionType','MercuryMessageActions','MercuryPayloadSource','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){m.constructor.call(this,o);}n.prototype.createNote=function(o,p,q){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:h.CREATE_PAGE_ADMIN_NOTE,message_id:q,note:o,thread_id:p},j.CLIENT_CREATE_PAGE_ADMIN_NOTE));this.__serverRequests.createNote(o.body,q,p);};Object.assign(n,k,{_instances:{}});f.exports=n;},null);
__d('PagesMessengerTextInput.react',['AbstractTextFieldMixin.react','React','TextAreaControl','InputCaretUtility','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'PagesMessengerTextInput',mixins:[h],propTypes:{onClick:n.func,onKeyUp:n.func,onPaste:n.func,onFocus:n.func,tabIndex:n.string},componentDidMount:function(){var p=this.getTextFieldDOM();new j(p);},moveCaretToBeginning:function(){var p=this.getTextFieldDOM();k.delayedMoveCaretToBeginning(p);},resetHeight:function(){var p=j.getInstance(this.getTextFieldDOM());p.resetHeight();},updateHeight:function(){var p=j.getInstance(this.getTextFieldDOM());p.updateHeight();},renderTextField:function(){var p=m(this.props.className,"_58al"+(' '+"uiTextareaAutogrow"));return this.setTextFieldPropsOn(i.createElement('textarea',{type:'text',className:p,tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste,onFocus:this.props.onFocus}));}});f.exports=o;},null);
__d('PagesMessengerSimpleMultilineComposer.react',['MercuryMessageObject','MercurySourceType','MercuryPageMessageActions','PagesEventObserver','PagesEventType','PagesMessengerTextInput.react','React','ReactDOM','XUIButton.react','cx','fbt','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t,u,v=n.PropTypes;t=babelHelpers.inherits(w,n.Component);u=t&&t.prototype;function w(x){'use strict';u.constructor.call(this,x);this.state={value:''};this.$PagesMessengerSimpleMultilineComposer1=j.getForFBID(this.props.sourceID);this.$PagesMessengerSimpleMultilineComposer2=h.getForFBID(this.props.sourceID);}w.prototype.hasInput=function(){'use strict';return !!this.state.value;};w.prototype.clearInput=function(){'use strict';this.setState({value:''});};w.prototype.focusInput=function(){'use strict';o.findDOMNode(this.refs.textInput).focus();};w.prototype.getConfirmButtonLabel=function(){'use strict';return r._("Send");};w.prototype.getTextInputPlaceholder=function(){'use strict';return r._("Write a message");};w.prototype.onTextInputChanged=function(event){'use strict';this.setState({value:event.target.value});};w.prototype.processSend=function(event){'use strict';var x=this.refs.textInput.getValue();if(!x)return;var y=this.$PagesMessengerSimpleMultilineComposer2.constructUserGeneratedMessageObject(x,i.TITAN_WEB,this.props.threadID,null,null);k.logData_DEPRECATED({page_id:this.props.sourceID,event_name:l.MESSAGES_DIALOG_SEND,thread_id:this.props.destinationID},null);event.preventDefault();if(this.props.allowSend()){this.$PagesMessengerSimpleMultilineComposer1.send(y);this.setState({value:''});this.props.afterSend();}};w.prototype.render=function(){'use strict';return (n.createElement('div',{className:"_1yn"},n.createElement('div',null,n.createElement(m,{className:"_1yq"+(' '+"_32wh")+(s(this.state.value)?' '+"_1yx":''),placeholder:this.getTextInputPlaceholder(),onChange:this.onTextInputChanged.bind(this),onKeyUp:this.props.onKeyUp,value:this.state.value,ref:'textInput'})),n.createElement('hr',{className:"_1yy"}),n.createElement('div',{className:"_1yz"},n.createElement('div',{className:"_1y-"},n.createElement(p,{use:'confirm',onClick:this.processSend.bind(this),label:this.getConfirmButtonLabel()})))));};w.propTypes={afterSend:v.func.isRequired,allowSend:v.func.isRequired,destinationID:v.string.isRequired,onKeyUp:v.func.isRequired,sourceID:v.string.isRequired,threadID:v.string.isRequired};f.exports=w;},null);
__d("XPagesMessagingFindPageController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/search\/page_name_typeahead\/",{page_id:{type:"String",required:true},value:{type:"String"}});},null);
__d('PagesMessengerNewThreadDialog.react',['Event','Keys','MercuryIDs','MercuryParticipants','PagesEventObserver','PagesEventType','PagesMessengerConfirmCloseThreadDialog.react','PagesMessengerSimpleMultilineComposer.react','React','SearchableEntry','WebAsyncSearchSource','XPagesMessagingFindPageController','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUITokenizerRichToken.react','XUITypeahead.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa,ba,ca=p.PropTypes,da=445,ea=326;aa=babelHelpers.inherits(fa,p.Component);ba=aa&&aa.prototype;function fa(ga){'use strict';ba.constructor.call(this,ga);this.state={typeaheadErrorMessage:null,initDialog:false,pageName:'...',query:'',selectedItem:null,showCloseConfirmationDialog:false};this.$PagesMessengerNewThreadDialog1=false;this.$PagesMessengerNewThreadDialog2=false;var ha=s.getURIBuilder().setString('page_id',this.props.pageID).getURI(),ia={uri:ha};this.$PagesMessengerNewThreadDialog3=new r({bootstrapRequests:[ia],queryRequests:[ia],getAllForEmptyQuery:true});}fa.prototype.$PagesMessengerNewThreadDialog4=function(ga){'use strict';l.notify(m.MESSAGES_CLOSE_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID,close_state:ga});};fa.prototype.$PagesMessengerNewThreadDialog5=function(){'use strict';if(this.refs.newThreadComposer.hasInput()){this.setState({showCloseConfirmationDialog:true});this.$PagesMessengerNewThreadDialog4('has_message');}else{this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('no_message');}};fa.prototype.$PagesMessengerNewThreadDialog6=function(){'use strict';this.refs.newThreadComposer.clearInput();this.setState({query:'',selectedItem:null,showCloseConfirmationDialog:false});};fa.prototype.$PagesMessengerNewThreadDialog7=function(){'use strict';this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('confirm_close');};fa.prototype.$PagesMessengerNewThreadDialog8=function(){'use strict';this.setState({showCloseConfirmationDialog:false});};fa.prototype.$PagesMessengerNewThreadDialog9=function(ga,event){'use strict';if(h.getKeyCode(event)===i.ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog10=function(event){'use strict';if(h.getKeyCode(event)===i.ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog11=function(ga){'use strict';if(!ga&&this.props.shown)this.$PagesMessengerNewThreadDialog5();};fa.prototype.subscribeEvents=function(){'use strict';if(this.refs.newPageMessageDialog&&!this.$PagesMessengerNewThreadDialog2){this.refs.newPageMessageDialog.layerSubscribe('key',this.$PagesMessengerNewThreadDialog9.bind(this));this.$PagesMessengerNewThreadDialog2=true;}};fa.prototype.loadPageName=function(){'use strict';if(!this.$PagesMessengerNewThreadDialog1){this.$PagesMessengerNewThreadDialog1=true;k.get(j.getParticipantIDFromUserID(this.props.pageID),(function(ga){this.setState({pageName:ga.name});}).bind(this));}};fa.prototype.componentDidUpdate=function(ga,ha){'use strict';if(!this.props.shown)return;this.subscribeEvents();this.loadPageName();var ia=this.refs.pageTypeahead.getTextFieldDOM();ia.style.border='0px';ia.style.fontSize='14px';ia.style.lineHeight='14px';if(this.props.shown&&!ga.shown)this.refs.pageTypeahead.focusInput();};fa.prototype.renderFrom=function(){'use strict';return (p.createElement('div',{className:"_1vwk"},z._("From: {pageName}",[z.param('pageName',this.state.pageName)])));};fa.prototype.renderSelectedResult=function(){'use strict';if(!this.state.selectedItem)return null;return (p.createElement('span',{className:"_31d6"},p.createElement(w,{entry:this.state.selectedItem,highlighted:false,label:this.state.selectedItem.getTitle(),onRemove:this.$PagesMessengerNewThreadDialog12.bind(this)})));};fa.prototype.renderTypeahead=function(){'use strict';if(this.state.selectedItem)return null;return (p.createElement(x,{className:(!this.state.selectedItem?"_1vwn":'')+(this.state.selectedItem?' '+"_29ez":'')+(' '+"_2pir"),clearable:!!this.state.selectedItem,highlightOnSelect:true,onChange:this.$PagesMessengerNewThreadDialog13.bind(this),onClear:this.$PagesMessengerNewThreadDialog12.bind(this),onSelectAttempt:this.$PagesMessengerNewThreadDialog14.bind(this),queryString:this.state.query,ref:'pageTypeahead',searchSource:this.$PagesMessengerNewThreadDialog3,selectedEntry:this.state.selectedItem,showPhoto:!!this.state.selectedItem,tallInput:false,viewStyle:'rich',xuiError:this.state.typeaheadErrorMessage}));};fa.prototype.renderTo=function(){'use strict';return (p.createElement('div',{className:"_1vwl"},p.createElement('span',{className:"_1vwm"},z._("To:")),this.renderSelectedResult(),this.renderTypeahead(),p.createElement('span',{className:"_2f3y"},z._("Pages Only"))));};fa.prototype.$PagesMessengerNewThreadDialog14=function(ga){'use strict';this.refs.newThreadComposer.focusInput();this.setState({typeaheadErrorMessage:null,query:ga.getTitle(),selectedItem:ga});l.notify(m.MESSAGES_PAGE_MESSAGE_DIALOG_CHOOSE_RECIPIENT,this.props.pageID,{flowID:this.props.flowID,recipient:ga.getUniqueID()});};fa.prototype.$PagesMessengerNewThreadDialog13=function(event){'use strict';this.setState({typeaheadErrorMessage:null,query:event.target.value,selectedItem:null});};fa.prototype.$PagesMessengerNewThreadDialog12=function(){'use strict';this.setState({typeaheadErrorMessage:null,query:'',selectedItem:null});setTimeout((function(){this.refs.pageTypeahead.focusInput();}).bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog15=function(){'use strict';setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog16=function(){'use strict';if(!this.state.selectedItem||this.state.selectedItem.getUniqueID().length==0){var ga=z._("Please choose a page to receive your message");this.refs.pageTypeahead.focusInput();this.setState({typeaheadErrorMessage:ga});return false;}l.notify(m.MESSAGES_PAGE_MESSAGE_DIALOG_SEND,this.props.pageID,{flowID:this.props.flowID,recipient:this.state.selectedItem.getUniqueID()});return true;};fa.prototype.renderAttachmentShelf=function(){'use strict';return (p.createElement('div',{ref:'newThreadAttachmentsShelf',className:"_jz4"}));};fa.prototype.renderComposer=function(){'use strict';var ga=this.state.selectedItem?this.state.selectedItem.getUniqueID():'',ha='user:'+ga;return (p.createElement(o,{afterSend:this.$PagesMessengerNewThreadDialog15.bind(this),allowSend:this.$PagesMessengerNewThreadDialog16.bind(this),destinationID:ga,onKeyUp:this.$PagesMessengerNewThreadDialog10.bind(this),ref:'newThreadComposer',sourceID:this.props.pageID,threadID:ha}));};fa.prototype.componentWillReceiveProps=function(ga){'use strict';if(!this.state.initDialog&&ga.shown)this.setState({initDialog:true});};fa.prototype.renderCloseConfirmationDialog=function(){'use strict';if(!this.state.showCloseConfirmationDialog)return null;return (p.createElement(n,{shown:this.state.showCloseConfirmationDialog,onCancel:this.$PagesMessengerNewThreadDialog8.bind(this),onConfirm:this.$PagesMessengerNewThreadDialog7.bind(this)}));};fa.prototype.render=function(){'use strict';if(!this.state.initDialog)return null;return (p.createElement('div',null,p.createElement(t,{layerHideOnBlur:false,ref:'newPageMessageDialog',shown:this.props.shown,onToggle:this.$PagesMessengerNewThreadDialog11.bind(this),width:da,height:ea},p.createElement(v,{className:"_2ga7"},z._("New Message To Page")),p.createElement(u,{className:"_1vwv"},this.renderFrom(),this.renderTo(),this.renderAttachmentShelf(),this.renderComposer())),this.renderCloseConfirmationDialog()));};fa.propTypes={flowID:ca.string,onHide:ca.func.isRequired,shown:ca.bool.isRequired,pageID:ca.string.isRequired};f.exports=fa;},null);
__d('PagesMessengerMessagePageButton.react',['PagesEventObserver','PagesEventType','PagesMessengerNewThreadDialog.react','React','Image.react','XUIButton.react','cx','ix','fbglyph'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=k.PropTypes;q=babelHelpers.inherits(t,k.Component);r=q&&q.prototype;t.getButtonSize=function(u){'use strict';return u.size||'medium';};function t(u){'use strict';r.constructor.call(this,u);this.state={showDialog:false};}t.prototype.$PagesMessengerMessagePageButton1=function(){'use strict';this.setState({showDialog:false});};t.prototype.$PagesMessengerMessagePageButton2=function(){'use strict';if(this.state.showDialog)return;this.setState({showDialog:true});h.notify(i.MESSAGES_OPEN_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID});};t.prototype.render=function(){'use strict';return (k.createElement('span',{className:!this.props.pagesCommNewMessagesTab?"_3-9a":''},k.createElement(m,{className:this.props.pagesCommNewMessagesTab?"_3kr2":'',image:k.createElement(l,{src:this.props.pagesCommNewMessagesTab?o("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/plus_16_bluegray-40.png"):o('/images/deprecated/glyphs/dark/compose_s.png')}),label:'Message Page',onClick:this.$PagesMessengerMessagePageButton2.bind(this),size:this.props.size}),k.createElement(j,{flowID:this.props.flowID,shown:this.state.showDialog,onHide:this.$PagesMessengerMessagePageButton1.bind(this),pageID:this.props.pageID})));};t.propTypes={flowID:s.string,pageID:s.string.isRequired,pagesCommNewMessagesTab:s.bool};f.exports=t;},null);
__d('ChatShareLinkUploader',['AsyncRequest','CSS','DOM','URLScraper','MercuryShareLinkUploader','MercuryAttachmentTemplates','Event'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,l);p=o&&o.prototype;q.prototype.__initialize=function(r,s,t,u,v){'use strict';this.$ChatShareLinkUploader1=r;this.$ChatShareLinkUploader2=s;this.$ChatShareLinkUploader3=t;this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader6=u;this.$ChatShareLinkUploader7=v;this.$ChatShareLinkUploader8=false;n.listen(s,'keyup',(function(){!this.getInputValue().length&&this.$ChatShareLinkUploader9.enable();}).bind(this));this.$ChatShareLinkUploader9=new k(s,u);this.$ChatShareLinkUploader9.subscribe('match',(function(w,x){this.loadShare(x&&x.url);}).bind(this));this.$ChatShareLinkUploader10=1337;this.$ChatShareLinkUploader11=null;};q.prototype.getInputValue=function(){'use strict';return this.$ChatShareLinkUploader6?this.$ChatShareLinkUploader6():this.$ChatShareLinkUploader2.value;};q.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2,this.$ChatShareLinkUploader6);};q.prototype.getShareData=function(){'use strict';if(!this.$ChatShareLinkUploader4)return null;return this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1);};q.prototype.close=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.disable();this.inform('closed');};q.prototype.clear=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.enable();};q.prototype.$ChatShareLinkUploader12=function(){'use strict';var r=this.$ChatShareLinkUploader11;delete this.$ChatShareLinkUploader11;if(r){j.remove(r);this.inform('dom-updated');}this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader8=false;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader9&&this.$ChatShareLinkUploader9.reset();};q.prototype.loadShareFromParams=function(r,s){'use strict';this.$ChatShareLinkUploader8=true;this.$ChatShareLinkUploader14(new h().setMethod('POST').setURI('/ajax/share_params.php').setData({chat:true,share_type:r,share_params:s}));};q.prototype.loadShare=function(r,s){'use strict';this.$ChatShareLinkUploader14(new h().setMethod('POST').setURI('/ajax/share_scrape.php').setData({chat:true,extra_params:JSON.stringify(s),u:r}),r);};q.prototype.loadedFromFeed=function(){'use strict';return this.$ChatShareLinkUploader8;};q.prototype.$ChatShareLinkUploader13=function(){'use strict';return ++this.$ChatShareLinkUploader10;};q.prototype.$ChatShareLinkUploader15=function(){'use strict';return this.$ChatShareLinkUploader10;};q.prototype.$ChatShareLinkUploader14=function(r,s){'use strict';this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var t=m[':fb:mercury:share-link-row'].build();if(this.$ChatShareLinkUploader11)j.remove(this.$ChatShareLinkUploader11);this.$ChatShareLinkUploader11=t.getRoot();n.listen(t.getNode('closeFileUpload'),'click',(function(event){this.close();event.kill();}).bind(this));j.appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader11);i.show(this.$ChatShareLinkUploader1);this.inform('dom-updated');var u=this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader5=r.setHandler((function(v){return this.$ChatShareLinkUploader16(u,v,s);}).bind(this));this.$ChatShareLinkUploader5.send();this.inform('link-detected');};q.prototype.$ChatShareLinkUploader16=function(r,s,t){'use strict';if(this.$ChatShareLinkUploader15()!==r)return;this.$ChatShareLinkUploader5=null;j.appendContent(this.$ChatShareLinkUploader11,s.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=true;this.inform('share-loaded');if(!this.getAttachData()){this.close();if(t&&this.getInputValue().indexOf(t)===-1)this.$ChatShareLinkUploader7(t);return;}i.addClass(this.$ChatShareLinkUploader11,'done');};function q(){'use strict';o.apply(this,arguments);}f.exports=q;},null);
__d('PagesMessengerShareLinkUploader',['ChatShareLinkUploader','emptyFunction','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(n,o,p,q){'use strict';l.constructor.call(this,n,o,i);this.$PagesMessengerShareLinkUploader1=new j();this.$PagesMessengerShareLinkUploader1.addSubscriptions(this.subscribe(['all-uploads-completed','upload-canceled'],p),this.subscribe('submit',q));}m.prototype.destroy=function(){'use strict';this.$PagesMessengerShareLinkUploader1&&this.$PagesMessengerShareLinkUploader1.release();};f.exports=m;},null);
__d("XPagesMessagingSuggestedResponseController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/",{});},null);
__d("XPagesMessagingSuggestedResponseFeedbackController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/feedback\/",{});},null);
__d('PagesMessageSuggestedResponseHandler',['ActorURI','AsyncRequest','XPagesMessagingSuggestedResponseController','XPagesMessagingSuggestedResponseFeedbackController','invariant','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p){'use strict';this.$PagesMessageSuggestedResponseHandler1=o;this.$PagesMessageSuggestedResponseHandler2=p;this.$PagesMessageSuggestedResponseHandler3=false;this.$PagesMessageSuggestedResponseHandler4=false;}n.prototype.requestSuggestedResponseAsync=function(o,p){'use strict';this.$PagesMessageSuggestedResponseHandler3=true;var q=j.getURIBuilder().getURI();new i().setURI(h.create(q,this.$PagesMessageSuggestedResponseHandler2)).setData({message:this.$PagesMessageSuggestedResponseHandler1.body}).setMethod('POST').setHandler((function(r){return this.$PagesMessageSuggestedResponseHandler5(r.payload,o);}).bind(this)).setErrorHandler(p).send();};n.prototype.sendFeedback=function(o){'use strict';!this.hasReceviedSuggestedResponse()?l(0):undefined;var p=k.getURIBuilder().getURI();new i().setURI(h.create(p,this.$PagesMessageSuggestedResponseHandler2)).setMethod('POST').setData({message_id:this.$PagesMessageSuggestedResponseHandler6,accepted:o}).send();};n.prototype.$PagesMessageSuggestedResponseHandler5=function(o,p){'use strict';if(o.messageFound)this.$PagesMessageSuggestedResponseHandler6=o.messageID;p(this.$PagesMessageSuggestedResponseHandler1.message_id,o);};n.prototype.shouldBeTreatedAsRejected=function(){'use strict';return !this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse();};n.prototype.hasReceviedSuggestedResponse=function(){'use strict';return !m(this.$PagesMessageSuggestedResponseHandler6);};n.prototype.alreadyRequested=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler3;};n.prototype.getMessageID=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler1.message_id;};n.prototype.getHasBeenAccepted=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler4;};f.exports=n;},null);
__d('PagesMessengerSuggestedResponseView.react',['LoadingIndicator.react','PagesMessageSuggestedResponseHandler','React','XUIGrayText.react','XUIButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'PagesMessengerSuggestedResponseView',propTypes:{onAccepted:o.func.isRequired,onDeclined:o.func,suggestedResponseHandler:o.instanceOf(i)},getInitialState:function(){return {shouldShowResult:false,shouldShowProgress:false,responseMessage:"",witMessageId:""};},_reset:function(){this.setState(this.getInitialState());},componentWillReceiveProps:function(q){if(q.suggestedResponseHandler!==this.props.suggestedResponseHandler){this._reset();var r=q.suggestedResponseHandler;if(!r||r.alreadyRequested())return;this.setState({shouldShowProgress:true});r.requestSuggestedResponseAsync(this._onSuggestedResponseReceived,this._onSuggestedResponseError);}},_onSuggestedResponseReceived:function(q,r){if(!this._isMessageIDCurrent(q))return;this.setState({shouldShowProgress:false});if(!!r.responseMessage&&r.responseMessage.length>0)this.setState({shouldShowResult:true,responseMessage:r.responseMessage,witMessageId:r.message_id});},_onSuggestedResponseError:function(q){if(!this._isMessageIDCurrent(q))return;this.setState({shouldShowProgress:false,shouldShowResult:false});},_isMessageIDCurrent:function(q){return !!this.props.suggestedResponseHandler&&q===this.props.suggestedResponseHandler.getMessageID();},render:function(){return (j.createElement('div',{className:"_710"+(' '+"_2ph-")+(!this.state.shouldShowResult&&!this.state.shouldShowProgress?' '+"hidden_elem":'')},this._renderProgressPart(),this._renderSuggestionPart()));},_renderSuggestionPart:function(){return (j.createElement('div',{className:!this.state.shouldShowResult?"hidden_elem":''},j.createElement('div',{className:"_3-94"},j.createElement(k,{shade:'light'},n._("We found a suggested reply:"))),j.createElement('div',{className:"_3-94"},j.createElement(k,{shade:'dark',className:"_711"},this.state.responseMessage)),j.createElement('div',{className:"_712"},j.createElement(k,{shade:'light',className:"_3-90"},n._("Do you want to use this reply?")),j.createElement(l,{label:n._("No"),use:'default',className:"_3-8_",onClick:this._onDeclined}),j.createElement(l,{label:n._("Yes"),use:'confirm',onClick:this._onAccepted}))));},_renderProgressPart:function(){return (j.createElement('div',{className:(!this.state.shouldShowProgress?"hidden_elem":'')+(' '+"_71d")},j.createElement(k,{shade:'light'},n._("Looking for suggested responses")),j.createElement(h,{size:'small',color:'white',className:"_3-9a"})));},_hide:function(){this.setState({shouldShowResult:false,shouldShowProgress:false});},_onAccepted:function(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(true);this.props.onAccepted&&this.props.onAccepted(this.state.responseMessage);},_onDeclined:function(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(false);this.props.onDeclined&&this.props.onDeclined();}});f.exports=p;},null);
__d('NuxTour.react',['ContextualLayerBlind','CSS','LayerFadeOnHide','LayerHideOnEscape','Link.react','ReactLayeredComponentMixin','React','XUIContextualDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialog.react','XUIDialogTitle.react','XUIGrayText.react','cx','fbt','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=n.PropTypes,aa=n.createClass({displayName:'NuxTour',mixins:[m],propTypes:{width:z.number,contextualWidth:z.number,steps:z.array.isRequired,visible:z.bool.isRequired,bodyClassName:z.string,footerClassName:z.string,useCustomPadding:z.bool,notNowStep:z.object,hideOnBlur:z.bool,title:z.node,initialStep:z.number,onHide:z.func,onCompleted:z.func,onNotNowClicked:z.func,onStepChange:z.func,showCloseButton:z.bool},getInitialState:function(){this._focused=null;return {isRerender:false,overlayShown:false,step:this.props.initialStep,notNowClicked:false};},getDefaultProps:function(){return {initialStep:0,width:600,hideOnBlur:true,showCloseButton:false};},render:function(){return (n.createElement('div',{className:"_4bf6"+(!this.state.overlayShown?' '+"hidden_elem":'')}));},getCurrentStep:function(){return this.state.step;},_getCurrentStepConfig:function(){if(this.state.notNowClicked)return this.props.notNowStep;return this.props.steps[this.state.step];},_isStepContextual:function(){return !!this._getCurrentStepConfig().isContextual;},_getContextNode:function(){return this._getCurrentStepConfig().context;},_getContextPosition:function(){return this._getCurrentStepConfig().position;},_getContextAlignment:function(){return this._getCurrentStepConfig().alignment;},_getFocusContext:function(){return !!this._getCurrentStepConfig().focusContext;},_getDialogOffsetX:function(){var ba=this._getCurrentStepConfig().offsetX;if(!ba)return 0;return ba;},_getDialogOffsetY:function(){var ba=this._getCurrentStepConfig().offsetY;if(!ba)return 0;return ba;},_renderCurrentStep:function(){return this._getCurrentStepConfig().render();},renderLayers:function(){var ba=y("_4bf7"+(this.state.step===0?' '+"_4bf8":''),this.props.bodyClassName),ca=null;if(this.props.visible&&this._isStepContextual()){var da={};if(this._getFocusContext())da={ContextualLayerBlind:h};ca=n.createElement(o,{shown:true,position:this._getContextPosition(),context:this._getContextNode(),alignment:this._getContextAlignment(),offsetX:this._getDialogOffsetX(),offsetY:this._getDialogOffsetY(),behaviors:da,width:this.props.contextualWidth},this._renderCurrentStep(),this._renderFooter());}var ea=null;if(this.props.visible&&!this._isStepContextual()){var fa=null;if(this.props.title)fa=n.createElement(t,null,this.props.title);ea=n.createElement(s,{width:this.props.width,behaviors:{LayerFadeOnHide:j,LayerHideOnEscape:k},layerHideOnBlur:this.props.hideOnBlur,shown:true,ref:'dialog'},fa,n.createElement(p,{className:ba,useCustomPadding:this.props.useCustomPadding},this._renderCurrentStep()),this._renderFooter());}return {dialog:ea,contextualDialog:ca};},_renderFooter:function(){var ba=y("_4bf9",this.props.footerClassName);if(this.state.step===0&&!this.state.notNowClicked){var ca=n.createElement(l,{onClick:this._notNowClicked},w._("Not Now"));return (n.createElement(r,{className:ba,leftContent:ca},n.createElement(q,{use:'confirm',action:'button',onClick:this.nextStep,label:w._("Take Tour")})));}var da;if(this.state.step!==1&&!this.state.notNowClicked)da=n.createElement(q,{use:'default',action:'button',onClick:this.prevStep,label:w._("Back")});var ea=this._getCurrentStepConfig().nextButtonText||w._("Next");if(this._isLastStep(this.state.step))ea=this._getCurrentStepConfig().doneButtonText||w._("Done");return (n.createElement(r,{className:ba,leftContent:this._renderLeftContent()},this._renderStepExtraFooterContent(),da,n.createElement(q,{use:'confirm',action:'button',onClick:this.nextStep,label:ea})));},_renderStepExtraFooterContent:function(){var ba=this._getCurrentStepConfig();if(!ba)return null;if(ba.renderFooterExtraContent)return ba.renderFooterExtraContent();},_isLastStep:function(ba){return (this.state.step===this.props.steps.length-1||this.state.notNowClicked);},_renderCloseButton:function(){if(this._isLastStep(this.state.step))return null;return this.props.showCloseButton?n.createElement(l,{onClick:this.closeNux},w._("Close")):null;},_renderLeftContent:function(){var ba=this._renderStepsCounter();if(ba)return ba;return this._renderCloseButton();},_renderStepsCounter:function(){if(!this.props.showStepsCounter||this.state.notNowClicked)return null;!(this.props.steps.length<100)?x(0):undefined;return (n.createElement(u,{size:'small'},w._("{current step #} of {total # of steps}",[w.param('current step #',this.state.step),w.param('total # of steps',this.props.steps.length-1)])));},hide:function(){this._unfocus();this._hideOverlay();if(this.props.onHide)this.props.onHide();},nextStep:function(){if(this._isLastStep(this.state.step)){this.hide();if(this.props.onCompleted&&!this.state.notNowClicked)this.props.onCompleted();return;}this.goToStep(this.state.step+1);},closeNux:function(){this.hide();if(this.props.onCompleted&&!this.state.notNowClicked)this.props.onCompleted();return;},prevStep:function(){if(this.state.step===0){this.hide();return;}this.goToStep(this.state.step-1);},goToStep:function(ba){this.setState({step:ba});if(this.props.onStepChange)this.props.onStepChange(ba);},_notNowClicked:function(){if(this.props.notNowStep){this.setState({notNowClicked:true});}else this.hide();if(this.props.onNotNowClicked)this.props.onNotNowClicked();},_focusElementsForCurrentStep:function(){if(this.state.isRerender){this.state.isRerender=false;return;}this._unfocus();var ba=this._getCurrentStepConfig().focus;if(ba){this._showOverlay();this._focused=[];ba.forEach(this._focusElement);}else this._hideOverlay();},_focusElement:function(ba){this._focused.push(ba);i.addClass(ba,"_4bfa");},_unfocus:function(){if(this._focused){this._focused.forEach(function(ba){return i.removeClass(ba,"_4bfa");});this._focused=null;}},_hideOverlay:function(){this.setState({isRerender:true,overlayShown:false});},_showOverlay:function(){this.setState({isRerender:true,overlayShown:true});},componentDidUpdate:function(){this._focusElementsForCurrentStep();window.setTimeout((function(){this.refs.dialog&&this.refs.dialog.layer.updatePosition();}).bind(this),5);}});f.exports=aa;},null);
__d('NuxTourContextualStep.react',['LeftRight.react','React','XUICloseButton.react','XUIText.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'NuxTourContextualStep',propTypes:{title:n.string.isRequired,showCloseButton:n.bool,onClose:n.func},getDefaultProps:function(){return {showCloseButton:true,onClose:function(){}};},render:function(){var p=null;if(this.props.showCloseButton)p=i.createElement(j,{className:"layerCancel",size:'small',label:m._("Close"),onClick:this.props.onClose});return (i.createElement('div',{className:"_2sjz pam"},i.createElement(h,null,i.createElement(k,{size:'medium',weight:'bold',display:'block',className:'pbs'},this.props.title),p),this.props.children));}});f.exports=o;},null);
__d('ResizeListener',['EventListener','SubscriptionList','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k,l=false,m=new i(function(){k=h.listen(window,'resize',n);},function(){k.remove();});function n(){if(!l){l=true;j(function(){m.fireCallbacks();l=false;});}}f.exports=m;},null);
__d('PagesManagerPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$PagesManagerPerfTypedLogger1={};return this;};k.prototype.updateData=function(l){this.$PagesManagerPerfTypedLogger1=babelHelpers._extends({},this.$PagesManagerPerfTypedLogger1,l);return this;};k.prototype.setEventName=function(l){this.$PagesManagerPerfTypedLogger1.event_name=l;return this;};k.prototype.setEventSeriesID=function(l){this.$PagesManagerPerfTypedLogger1.event_series_id=l;return this;};k.prototype.setPageID=function(l){this.$PagesManagerPerfTypedLogger1.page_id=l;return this;};k.prototype.setPerfTime=function(l){this.$PagesManagerPerfTypedLogger1.perf_time=l;return this;};k.prototype.setVC=function(l){this.$PagesManagerPerfTypedLogger1.vc=l;return this;};f.exports=k;},null);
__d('MercuryPageThreadActions',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);}n.prototype.addFlag=function(o,p){'use strict';this.batchFlag([o],p);};n.prototype.batchAddFlag=function(o,p){'use strict';o.forEach((function(q){this.__serverRequests.addThreadFlag(q,p);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(o,true,p));};n.prototype.removeFlag=function(o,p){'use strict';this.batchRemoveFlag([o],p);};n.prototype.batchRemoveFlag=function(o,p){'use strict';o.forEach((function(q){this.__serverRequests.removeThreadFlag(q,p);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(o,false,p));};n.prototype.$MercuryPageThreadActions1=function(o,p,q){'use strict';return this.__constructClientPayload(o,h.CHANGE_FLAG,i.CLIENT_CHANGE_FLAG,{mark_as_flag:p,source:q});};Object.assign(n,j,{_instances:{}});f.exports=n;},null);
__d('MessengerErrorAttachment.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h.Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){return (h.createElement('div',{className:"_1o12 _52mr"},h.createElement('div',{className:"_1o13"},this.props.attachment.error_msg)));};f.exports=l;},null);
__d('MessengerFileAttachment.react',['Link.react','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'MessengerFileAttachment',mixins:[i],propTypes:{attachment:l.object.isRequired},render:function(){return (j.createElement(h,{className:"_4pcn _2uf4",href:this.props.attachment.url},j.createElement('div',{className:"_2uf5"}),this.props.attachment.name));}});f.exports=m;},null);
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.props.children)));},_onClick:function(u){u.preventDefault();if(this.props.onClick)this.props.onClick(this.props.attachment);},_getImageFromMetadata:function(u){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle)return j.createElement(h,{alt:'',src:u.src});return null;}});f.exports=t;},null);
__d('MessengerVideo.react',['Image.react','MessengerPhoto.react','ReactComponentWithPureRenderMixin','React','cx','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=k.createClass({displayName:'MessengerVideo',mixins:[j],propTypes:{attachment:o.object.isRequired,isSingle:o.bool.isRequired,onClick:o.func},render:function(){return (k.createElement(i,babelHelpers._extends({},this.props,{className:n(this.props.className,"_ccq")}),k.createElement(h,{className:"_ccr",src:m('/images/chat/chat_play_icon.png')}),k.createElement('span',{className:"_ccs"},this._getDuration())));},_getDuration:function(){var q;if(!!this.props.attachment.metadata){q=this.props.attachment.metadata.duration;}else if(!!this.props.attachment.media)q=this.props.attachment.media.duration;return !!q?this._formatDuration(q):null;},_formatDuration:function(q){var r=q%60;return Math.floor(q/60)+':'+(r<10?'0':'')+r;}});f.exports=p;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r='empty-spacer',s=n.PropTypes,t=n.createClass({displayName:'MessengerPhotosGroup',mixins:[m],propTypes:{attachType:s.string,attachments:s.arrayOf(s.object).isRequired,message:s.object},componentDidMount:function(){l.preload();},render:function(){var u=this.props.attachments;return (n.createElement('div',{className:this._getRootClassNameFor(u)},this._rowsFor(u)));},_onChildClicked:function(u){if(u.preview_uploading)return;if(u.attach_type===i.VIDEO){l.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:u.metadata.fbid,videoSize:new o(u.metadata.dimensions.width,u.metadata.dimensions.height),videoURI:u.url});}else if(u.attach_type===i.PHOTO||u.attach_type===i.ANIMATED_IMAGE){l.bootstrapWithConfig({dimensions:u.metadata.dimensions,disablePaging:this.props.attachments.length===1,endpoint:u.url,fbid:u.metadata.fbid,rootClassName:"_1j1h",snapToPhoto:true,src:u.preview_url});}else if(u.uri)window.open(u.uri);},_rowsFor:function(u){if(u.length===1)return [this._photo(u[0],true)];var v=3;if(u.length===2||u.length===4)v=2;var w=[];for(var x=0,y=u.length;x<y;x+=v){var z=u.slice(x,x+v),aa=v-z.length;while(aa>0){z.push({attach_type:r,key:'ghost'+aa});aa--;}w.push(n.createElement('div',{className:"_2n8g",key:x},z.map((function(ba){return this._photo(ba);}).bind(this))));}return w;},_photo:function(u,v){var w;if(u.deduplication_key){w=u.deduplication_key;}else if(u.metadata){w=u.metadata.fbid;}else w=u.upload_id;var x={attachment:u,isSingle:v||false,key:w,onClick:this._onChildClicked},y=this.props.attachType||u.attach_type;switch(y){case i.PHOTO:case i.ANIMATED_IMAGE:return n.createElement(j,x);case i.VIDEO:if(u.metadata&&u.metadata.render_as_sticker)return (n.createElement(h,{videoSize:u.metadata.dimensions,videoURI:u.url}));return n.createElement(k,x);case r:return (n.createElement('div',{key:u.key,className:"_4tsk _4rf-"}));default:throw u.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(u){var v=u.length===2||u.length===4;return q(this.props.className,"_2n8h"+(u.length===1?' '+"_2n8i":'')+(v?' '+"_4ksk":'')+(u.length>1&&!v?' '+"_2n8k":''));}});f.exports=t;},null);
__d('MessengerStickerUtils',['MercuryAttachmentType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(l){return !!(l&&l.attach_type===h.STICKER);}function j(l){var m=l.attachments;return !!(l.is_like_preview||l.sticker_id||m&&m.length===1&&i(m[0]));}function k(l){return l.size===1&&j(l.first());}f.exports={isStickerMessageGroup:k,isStickerMessage:j,isStickerAttachment:i};},null);
__d('MessengerVoiceClipAttachment.react',['MercuryAttachmentAudioClip.react','MercuryShareAttachmentRenderLocations','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=k.PropTypes,n=k.createClass({displayName:'MessengerVoiceClipAttachment',mixins:[j],propTypes:{attachment:m.object.isRequired,message:m.object.isRequired},render:function(){var o=this.props.attachment,p=o.metadata.duration/1000,q=200,r=!!o.app_attribution;return (k.createElement('div',{className:"_hh7"+(' '+"_s1-")+(!r?' '+"_52mr":'')+(r?' '+"_mxz":'')+(' '+"_1fz8")+(r?' '+"_1-wa":'')+(' '+"_1nqp")},k.createElement(h,{src:o.url,duration:p,key:'audio:'+this.props.message.message_id,showHelp:false,width:q,location:i.MESSENGER,rootClassName:"_3czg"+(r?' '+"_4yjw":'')+(' '+"_2poz")+(' '+"_ui9")})));}});f.exports=n;},null);
__d('isRetina',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=function(){return (window.devicePixelRatio||1)>1;};},null);
__d('MessengerAttachmentRenderer',['CurrentUser','MercuryAttachment','MercuryAttachmentType','MercuryAudioType','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessengerErrorAttachment.react','MessengerFileAttachment.react','MessengerHotLikePreview.react','MessengerHotLikeUtils','MessengerPhotosGroup.react','MessengerStickerUtils','MercuryThreads','MessengerVoiceClipAttachment.react','React','Set','Sticker.react','StickerActions','StickerAssetType','StickerConstants','StickerImages','StickerUtils','StoryAttachmentStyle','XStickerAssetController','cx','isRetina'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new w([j.ANIMATED_IMAGE,j.PHOTO,j.VIDEO]),ia=700,ja=function(la){return la===Object(la);},ka={getAttachmentsInsideBubble:function(la){var ma=i.get(la).filter(ja).filter((function(na){return (!this.attachmentShouldAppearOutsideBubble(na));}).bind(this));return this._getAttachmentComponents(ma,la);},getAttachmentsOutsideBubble:function(la){var ma=i.get(la).filter(ja).filter((function(na){return (this.attachmentShouldAppearOutsideBubble(na));}).bind(this));return this._getAttachmentComponents(ma,la);},_getAttachmentComponents:function(la,ma){var na=this._getPhotosGroup(la.filter(this.isPhotoAttachment),ma),oa=la.filter((function(pa){return !this.isPhotoAttachment(pa);}).bind(this)).map((function(pa){return this._getAttachmentComponent(pa,ma);}).bind(this));if(na)oa.push(na);return oa;},_getAttachmentComponent:function(la,ma){if(s.isStickerAttachment(la))return this._getStickerComponent(la,ma);if(this.isVoiceClip(la))return this._getVoiceClip(la,ma);if(this.isFileAttchment(la))return this._getFileComponent(la,ma);if(this.isP2P(la)||this.isShareAttachment(la))return this._getShareAttachment(la,ma);if(this.isErrorAttachment(la))return this._getErrorAttachment(la,ma);},_getStickerComponent:function(la,ma){if(ma.is_like_preview)return (v.createElement(p,{key:'hlp:'+ma.like_preview_since,since:ma.like_preview_since}));var na=la.metadata;if(!na){na=q.getMetadataForHotLike(ma.sticker_id);if(!na){var oa=ba.getSticker(ma.sticker_id);na=babelHelpers._extends({},oa);var pa=ca.getScaledDimensions(oa?oa.height:aa.THREAD_SIZE,oa?oa.width:aa.THREAD_SIZE,aa.THREAD_SIZE),qa=pa.height,ra=pa.width;na.height=qa;na.width=ra;}na.stickerID=ma.sticker_id;}var sa=ea.getURIBuilder().setInt('sticker_id',na.stickerID),ta=null,ua=null;if(ga()){ta=na.paddedSpriteURI2x;ua=na.spriteURI2x;}else{ta=na.paddedSpriteURI;ua=na.spriteURI;}var va=t.getForFBID(h.getID()).getThreadMetaNow(ma.thread_id),wa=va?va.custom_like_icon:null;return (v.createElement(x,{className:"_2poz _ui9",animationTrigger:'hover',customLike:wa,frameCount:na.frameCount||1,frameRate:na.frameRate||aa.DEFAULT_FRAME_RATE,framesPerCol:na.framesPerCol||1,framesPerRow:na.framesPerRow||1,key:'sticker:'+ma.message_id,onStickerClick:function(xa,ya){y.handleStickerClick(xa,ma.thread_id);},packID:na.packID&&na.packID.toString(),paddedSpriteURI:ta,sourceHeight:na.height,sourceURI:sa.setEnum('image_type',z.IMAGE).getURI().toString(),sourceWidth:na.width,spriteURI:ua,stickerID:na.stickerID.toString()}));},_getShareAttachment:function(la,ma){return v.createElement(l,{attachment:la.share,location:m.MESSENGER,key:'share:'+ma.message_id,maxWidth:ia,thread_id:ma.thread_id});},_getVoiceClip:function(la,ma){return (v.createElement(u,{attachment:la,key:'audio:'+ma.message_id,message:ma}));},_getErrorAttachment:function(la,ma){return (v.createElement(n,{attachment:la,key:'error:'+ma.message_id}));},_getPhotosGroup:function(la,ma){return la.length?v.createElement(r,{attachments:la,className:"_2poz _52mr _ui9",key:'photos:'+ma.message_id,message:ma}):null;},_getFileComponent:function(la,ma){return (v.createElement(o,{attachment:la,className:"_2poz",key:'file:'+la.url}));},attachmentShouldAppearOutsideBubble:function(la){return s.isStickerAttachment(la)||this.isPhotoAttachment(la)||this.isShareAttachment(la)||this.isP2P(la)||this.isVoiceClip(la)||this.isErrorAttachment(la);},isPhotoAttachment:function(la){return ha.has(la.attach_type);},isFileAttchment:function(la){return la.attach_type===j.FILE;},isShareAttachment:function(la){return !!(this._isStoryBased(la)&&!this.isP2P(la)&&(la.share.style_list.indexOf(da.SHARE)>-1||la.share.style_list.indexOf(da.FALLBACK)>-1));},isP2P:function(la){return !!(this._isStoryBased(la)&&la.share.style_list.indexOf(da.ORION)>-1);},_isStoryBased:function(la){return !!(la.attach_type===j.SHARE&&la.share&&la.share.style_list);},isVoiceClip:function(la){return !!la.metadata&&(la.metadata.type===k.AudioClip||la.metadata.type===k.VoiceMessageWithTranscript);},isVoiceClipAttachment:function(la){var ma=i.get(la).filter(ja).filter((function(na){return (this.isVoiceClip(na));}).bind(this));return !!ma.length;},isP2PAttachment:function(la){var ma=i.get(la).filter((function(na){return (ja(na)&&this.isP2P(na));}).bind(this));return !!ma.length;},isErrorAttachment:function(la){return la.attach_type===j.ERROR;}};f.exports=ka;},null);
__d('MessengerBubble.react',['immutable','MercuryMessageBody.react','ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'MessengerBubble',mixins:[j],propTypes:{attachments:n.instanceOf(h.List),body:n.string,isP2PAttachment:n.bool,ranges:n.array,threadID:n.string,customLike:n.object},render:function(){return (k.createElement('div',{className:m(this.props.className,"_hh7"+(' '+"_s1-")+(' '+"_52mr")+(this.props.isP2PAttachment?' '+"_4z55":''))},k.createElement(i,{className:"_3oh-",body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID,customLike:this.props.customLike}),this.props.attachments));}});f.exports=o;},null);
__d('MessengerCodePasteUtils',['BanzaiODS','MessengerBubble.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=/`{3,}/;function m(o){return !!(o&&o.search(l)!==-1&&o.split('\n').length>1);}function n(o,p,q){var r=o.split(l),s=[];for(var t=0;t<r.length;t+=2){var u=r[t].trim();if(u&&u.length>0)s.push(j.createElement(i,{key:t,body:u,className:"clearfix _3058 _ui9",ranges:p,threadID:q}));if(t+1<r.length&&r[t+1]){var v=r[t+1].split('\n'),w=v[0].replace(/[^a-zA-Z]+/g,''),x=v.slice(1).join('\n');h.bumpEntityKey('messenger_code_paste','render_bubble');s.push(j.createElement('div',{key:t+1,className:"_3058 _15gf _wu0 _52mr"},j.createElement('div',{ref:'syntaxTarget'+t,className:'language-'+w},x)));}}return s;}f.exports={containsCodeBlock:m,getCodeAndMessageBubbles:n};},null);
__d('MNCommerceDialogStateActions',['MessengerDispatcher','MNCommerceActionTypes'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={showDialog:function(k,l){h.dispatch({type:i.DIALOG.SHOW,dialogContainer:k,state:l});},hideDialog:function(){h.dispatch({type:i.DIALOG.HIDE});}};f.exports=j;},null);
__d('MessengerAttachmentAttribution.react',['ImmutableObject','MercuryAttachmentAttribution.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'MessengerAttachmentAttribution',propTypes:{attachment:l.instanceOf(h)},render:function(){return (j.createElement(i,{attachment:this.props.attachment,className:"_2f5n _4br2"}));}});f.exports=m;},null);
__d('MessengerBubbleBlock.react',['React','cx'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'MessengerBubbleBlock',render:function(){return (h.createElement('div',{className:"_52mr _4h13 _3058"},this.props.children));}});f.exports=j;},null);
__d('MessengerCodeBubble.react',['Bootloader','immutable','MessengerCodePasteUtils','ReactComponentWithPureRenderMixin','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=l.PropTypes,o=l.createClass({displayName:'MessengerCodeBubble',mixins:[k],propTypes:{attachments:n.instanceOf(i.List),body:n.string.isRequired,ranges:n.array.isRequired,threadID:n.string.isRequired},componentDidMount:function(){h.loadModules(["Prism.Complete"],(function(p){for(var q in this.refs){var r=m.findDOMNode(this.refs[q]);p.highlightElement(r);}}).bind(this));},render:function(){var p=j.getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID);return l.createElement('div',null,p);}});f.exports=o;},null);
__d('MessengerDateBreak.react',['React','cx','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'MessengerDateBreak',propTypes:{date:l.instanceOf(Date).isRequired},shouldComponentUpdate:function(n){return this.props.date.getTime()!==n.date.getTime();},render:function(){var n=j(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (h.createElement('h4',{className:k(this.props.className,"_497p _2lpt")},h.createElement('time',{className:"_3oh-"},n)));}});f.exports=m;},null);
__d('P2PBigAmount.react',['CurrentEnvironment','Image.react','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'P2PBigAmount',propTypes:{amount:m.string.isRequired,isPending:m.bool,size:m.oneOf(['medium','large'])},getDefaultProps:function(){return {size:'medium'};},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){if(this.props.size==='large'){return l('/images/p2p/message-icon-dark-gray-large.png');}else return l('/images/p2p/message-icon-dark-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-messenger-blue.png');}else return l('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){if(this.props.size==='large'){return l('/images/p2p/message-icon-gray-large.png');}else return l('/images/p2p/message-icon-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-facebook-blue.png');}else return l('/images/p2p/message-icon-www-blue.png');},isMessengerDotCom:function(){return h.messengerdotcom;},render:function(){var o=this.props.size==='large'?'24':'16';return (j.createElement('div',{className:"_8j6"+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":'')},j.createElement('div',{className:"_8j8"},j.createElement(i,{height:o,src:this.getImage(),width:o})),j.createElement('div',{className:"_8jc"+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-")},this.props.amount)));}});f.exports=n;},null);
__d('P2PGroupSendReceiptDialog.react',['CurrentEnvironment','Image.react','Link.react','P2PAmountUtils','P2PButton.react','P2PBigAmount.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLinkConstants','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=w.PropTypes,aa=w.createClass({displayName:'P2PGroupSendReceiptDialog',propTypes:{amount:z.string.isRequired,eventFlow:z.string,isGrayAmount:z.bool,onClose:z.func.isRequired,receiver:z.object.isRequired,sender:z.object.isRequired,title:z.node},getDefaultProps:function(){return {bodyText:y._("You can send money to friends in groups."),eventFlow:u.UI_FLOW_P2P_GROUP_SEND,isGrayAmount:false,title:y._("Payment Details")};},componentDidMount:function(){this.log(t.UI_ACTN_3RD_PARTY_RECEIPT_SHOWN,{raw_amount:this.props.amount});},log:function(ba,ca){s.log(ba,babelHelpers._extends({www_event_flow:this.props.eventFlow},ca));},handleClose:function(){this.log(t.UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED);this.props.onClose();},renderParticipantRow:function(ba,ca){var da;if(ca){da=y._("From");}else da=y._("To");return (w.createElement('li',{className:"_2chg",key:ba.id},w.createElement('div',{className:"_2chh"},w.createElement(j,{href:ba.profile_uri,onClick:this.props.onClose},w.createElement(i,{height:50,src:ba.picture,width:50}))),w.createElement('div',{className:"_2chi"},w.createElement(v,{type:'primary'},w.createElement(v,{type:'secondary'},da),ba.full_name))));},render:function(){var ba=h.messengerdotcom,ca=ba?380:360,da=this.props.title;return (w.createElement(n,{className:ba?"_bpv":'',layerHideOnBlur:false,onToggle:this.props.onClose,width:ca},w.createElement(q,null,da),w.createElement(o,null,w.createElement('ul',null,this.renderParticipantRow(this.props.sender,true),this.renderParticipantRow(this.props.receiver,false)),w.createElement('div',{className:"_bpy"},w.createElement(m,{amount:k.sanitizeAmount(this.props.amount),isPending:this.props.isGrayAmount,size:'large'})),w.createElement(v,{className:"_bpt",size:'small',type:'secondary'},this.props.bodyText,' ',w.createElement(j,{className:"_1ed3",href:r.helpCenterURI,target:'_blank'},y._("Learn More")))),w.createElement(p,null,w.createElement(l,{label:y._("OK"),onClick:this.handleClose,type:'primary'}))));}});f.exports=aa;},null);
__d("XP2PTransactionDetailController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null);
__d('P2PMercuryLogMessage.react',['CurrentEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin','XP2PTransactionDetailController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=n.createClass({displayName:'P2PMercuryLogMessage',mixins:[o],propTypes:{amount:s.string,receiver:s.object.isRequired,sender:s.object.isRequired,subtype:s.oneOf(Object.keys(m).map(function(u){return m[u];})),transferID:s.string.isRequired,threadFBID:s.string,threadID:s.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupSendReceiptDetailsShown:false});},isViewerSender:function(){return (k.getUserIDFromParticipantID(this.props.sender.id)===i.getID());},isViewerReceiver:function(){return (k.getUserIDFromParticipantID(this.props.receiver.id)===i.getID());},renderTransferDetailsLink:function(){var u=p.getURIBuilder().setString('id',this.props.transferID).getURI();return (n.createElement(j,{className:"_kiq",href:u,target:'_blank'},r._("See details")));},renderGroupDetailsLink:function(){return (n.createElement(j,{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},r._("See details")));},renderLayers:function(){var u={};if(this.state.groupSendReceiptDetailsShown){var v={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},w={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};u.groupSendReceiptDetailsDialog=n.createElement(l,{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:v,sender:w});}return u;},render:function(){var u=null,v=this.props.amount,w=this.props.subtype,x=this.isViewerSender(),y=this.isViewerReceiver(),z;if(!x&&!y){z=this.renderGroupDetailsLink();}else z=this.renderTransferDetailsLink();switch(w){case m.SENT_IN_GROUP:u=r._("{sendername} sent {amount} to {receivername}. {details}",[r.param('sendername',this.props.sender.name),r.param('amount',v),r.param('receivername',this.props.receiver.name),r.param('details',z)]);break;case m.CANCELED_EXPIRED:case m.CANCELED_SAME_CARD:case m.CANCELED_SENDER_RISK:case m.CANCELED_RECIPIENT_RISK:case m.CANCELED_CUSTOMER_SERVICE:if(x){u=r._("Your {amount} payment was canceled. {details}",[r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else if(y){u=r._("{name}'s {amount} payment was canceled. {details}",[r.param('name',this.props.sender.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else u=r._("{sender_name}'s {amount} payment to {receiver_name} was canceled. {details}",[r.param('sender_name',this.props.sender.name),r.param('amount',v),r.param('receiver_name',this.props.receiver.name),r.param('details',z)]);u=n.createElement('span',{className:"_5rdx"},u);break;case m.CANCELED_DECLINED:if(x){u=r._("{name} didn't accept your {amount} payment. {details}",[r.param('name',this.props.receiver.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else if(y){u=r._("You didn't accept {name}'s {amount} payment. {details}",[r.param('name',this.props.sender.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else u=r._("{receiver_name} didn't accept {sender_name}'s {amount} payment. {details}",[r.param('receiver_name',this.props.receiver.name),r.param('sender_name',this.props.sender.name),r.param('amount',v),r.param('details',z)]);u=n.createElement('span',{className:"_5rdx"},u);break;}return (n.createElement('div',{className:h.messengerdotcom?"_5rdy":''},u));}});f.exports=t;},null);
__d('MessengerLogMessageBody.react',['immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=o.createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[n,p(k)],propTypes:{message:r.instanceOf(i).isRequired,viewer:r.string.isRequired},statics:{calculateState:function(t){var u=[],v=t.message,w=v.log_message_data,x=v.log_message_type;switch(x){case l.SUBSCRIBE:u=w.added_participants;break;case l.UNSUBSCRIBE:u=w.removed_participants;break;case l.ORION:u.push(w.senderId,w.receiverId);break;}if(!u||!u.length)return {};var y=h.Map().withMutations(function(z){u.forEach(function(aa){z.set(aa,k.getOrFetch(aa)||{});});});return {extraParticipants:y};}},render:function(){var t=this.props.message.log_message_type;this._viewer=j.getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&t!==l.ORION)return null;switch(t){case l.SUBSCRIBE:return (o.createElement('span',null,this._renderSubscribeMessage(this.props.message)));case l.UNSUBSCRIBE:return (o.createElement('span',null,this._renderUnsubscribeMessage(this.props.message)));case l.THREAD_NAME:var u=this.props.message.log_message_data;if(!u.name)return (o.createElement('span',null,q._("You removed the group name.")));return (o.createElement('span',null,q._("You named the group {the new name of the group}.",[q.param('the new name of the group',u.name)])));case l.THREAD_IMAGE:return (o.createElement('span',null,q._("You changed the group photo.")));case l.ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function(t){var u=t.log_message_data,v=u.senderId,w=u.receiverId,x=this.state.extraParticipants,y=x.get(v),z=x.get(w);return (o.createElement(m,{amount:u.formattedAmount,receiver:z,sender:y,subtype:u.subtype,threadFBID:t.thread_fbid,threadID:t.thread_id,transferID:u.transfer_id}));},_renderSubscribeMessage:function(t){var u=this._moveCurrentUserToFront(t.log_message_data.added_participants),v=this.state.extraParticipants;switch(u.length){case 1:return q._("You added {subscriber1}.",[q.param('subscriber1',v.get(u[0]).name)]);case 2:return q._("You added {subscriber1} and {subscriber2}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name)]);case 3:return q._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name),q.param('subscriber3',v.get(u[2]).name)]);default:var w=u.map(function(x){return v.get(x);});return q._("You added {subscriber1}, {subscriber2} and {num} other people.",[q.param('subscriber1',w[0].name),q.param('subscriber2',w[1].name),q.param('num',w.slice(2).length)]);}},_renderUnsubscribeMessage:function(t){var u=this.state.extraParticipants,v=t.log_message_data.removed_participants[0],w=u.get(v);if(!v||v===t.author){return q._("You left the conversation.");}else return q._("You removed {name} from the conversation.",[q.param('name',w.name)]);},_moveCurrentUserToFront:function(t){var u=this._viewer,v=t.indexOf(u);if(v>0){var w=t.filter(function(x){return x!==u;});return [u].concat(w);}return t;}});f.exports=s;},null);
__d('MNCommerceLoggingConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:'checkout_order_config',SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error'}};f.exports=h;},null);
__d('MNCommerceButton.react',['CurrentEnvironment','MessengerDialogButton.react','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceButton',render:function(){var m=h.messengerdotcom,n=m?i:k,o=this.props.type;if(!o)o=this.props.type==='confirm'?'primary':'secondary';var p=m?'default':this.props.use,q=babelHelpers._extends({},this.props,{type:o,use:p});return (j.createElement(n,q,this.props.children));}});f.exports=l;},null);
__d('MNCommerceAttachmentConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};f.exports=h;},null);
__d('MNCommerceDialog.react',['CurrentEnvironment','LayerFadeOnHide','LayerHideOnEscape','MNCommerceAttachmentConstants','MessengerDialog.react','React','XUIDialog.react','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'MNCommerceDialog',propTypes:{onToggle:r.func,shown:r.bool,width:r.number.isRequired},getDefaultProps:function(){return {onToggle:p,repositionOnUpdate:true,shown:true,width:h.messengerdotcom?k.MDOTCOMDIALOG.WIDTH:k.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout((function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}).bind(this),0);},render:function(){var t=h.messengerdotcom,u=t?l:n;return (m.createElement(u,babelHelpers._extends({behaviors:{LayerFadeOnHide:i,LayerHideOnEscape:j}},this.props,{className:q(this.props.className,t?"_3rx0":''),ref:'dialog'}),this.props.children));}});f.exports=s;},null);
__d('MNCommerceDialogBody.react',['CurrentEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceDialogBody',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MNCommerceDialogFooter.react',['CurrentEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','cloneWithProps','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.createClass({displayName:'MNCommerceDialogFooter',render:function(){var o=h.messengerdotcom,p=o?i:k,q,r=this.props.children;if(o){q=j.Children.count(this.props.children);r=j.Children.map(this.props.children,function(s,t){if(!s)return null;return l(s,{className:"_4ec0",type:t===0&&q===2?'secondary':'primary'});});}return (j.createElement(p,this.props,r));}});f.exports=n;},null);
__d('MNCommerceDialogTitle.react',['CurrentEnvironment','MessengerDialogHeader.react','React','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceDialogTitle',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MNCommerceUnlinkDialog.react',['MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=m.PropTypes,p=m.createClass({displayName:'MNCommerceUnlinkDialog',propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=n._("Cancel"),r=n._("Turn Off");return (m.createElement(i,{onToggle:this.props.onToggle,shown:this.props.shown},m.createElement(l,{showCloseButton:false},n._("Unlink account?")),m.createElement(j,null,m.createElement('div',null,n._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),m.createElement(k,null,m.createElement(h,{label:q,onClick:this.props.onCancelButtonClick,use:'default'}),m.createElement(h,{label:r,onClick:this.props.onTurnOffButtonClick,use:'confirm'}))));}});f.exports=p;},null);
__d('MNCommerceUnlinkErrorDialog.react',['MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=j.createClass({displayName:'MNCommerceUnlinkErrorDialog',propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=p._("OK"),t=null,u=null;switch(this.props.errorType){case i.ALREADY_UNLINKED:u=j.createElement('div',null,p._("Updates Are Already Off"));t=j.createElement('div',null,p._("You aren't getting updates in Messenger."));break;default:u=j.createElement('div',null,p._("Couldn't Turn Off Updates"));t=j.createElement('div',null,p._("Sorry, something went wrong. Please try again."));break;}return (j.createElement(l,{onToggle:this.props.onToggle,shown:this.props.shown,width:h.UNLINK_ERROR_DIALOG.WIDTH},j.createElement(o,null,u),j.createElement(m,null,t),j.createElement(n,null,j.createElement(k,{label:s,onClick:this.props.onOkayButtonClick,use:'confirm'}))));}});f.exports=r;},null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=o.createClass({displayName:'MNCommerceUnlinkDialogContainer',render:function(){var q=j.getState();if(q&&q.errorType){h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK_ERROR})});return (o.createElement(n,{onToggle:this._onToggle,shown:!!q,errorType:q.errorType,onOkayButtonClick:this._hideDialog}));}else{h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});return (o.createElement(m,{onToggle:this._onToggle,shown:!!q,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:q&&q.onTurnOffButtonClick}));}},_onToggle:function(q){if(!q)this._hideDialog();},_hideDialog:function(){i.hideDialog();}});f.exports=p;},null);
__d("XMNCommerceUnlinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null);
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();l.prototype.unlink=function(m,n){var o=k.getURIBuilder().setString('page_id',m).setString('user_id',n).getURI();new h().setURI(o).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};l.prototype.$MNCommerceUnlinkDataManager1=function(m){i.showDialog(j,{errorType:m.error});};function l(){}f.exports=new l();},null);
__d('MNCommerceLogMessageUtils',['BanzaiLogger','Link.react','MercuryIDs','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDataManager','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommerceUnlinkDialogContainer.react','React','cx','fbt','invariant','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreads').get();v.prototype.isCommercePageAdminMessage=function(w){return !!(w&&w.log_message_data&&w.log_message_data.replyType===o.COMMERCE_LINK);};v.prototype.getCommercePageUnlink=function(w,x){var y=function(){var z=j.getUserIDFromParticipantID(w.author),aa=u.getThreadMetaNow(w.thread_id);!aa?t(0):undefined;var ba=null;aa.participants.every(function(da){if(da!==w.author){ba=j.getUserIDFromParticipantID(da);return false;}return true;});var ca=function(){n.hideDialog();m.unlink(z,ba);};n.showDialog(p,{onTurnOffButtonClick:ca});h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});};return (q.createElement('span',null,w.log_message_body,' ',q.createElement(i,{className:(!x?"_2w2m":'')+(x?' '+"_1jvn":''),onClick:y},s._("Turn Off"))));};function v(){}f.exports=new v();},null);
__d('MessengerLogMessage.react',['Image.react','ImmutableObject','MercuryIDs','MercuryLogMessageType','MercuryMessageInfo','MessagingGenericAdminTextType','MessengerLogMessageBody.react','MNCommerceLogMessageUtils','React','MercuryParticipants','ReactComponentWithPureRenderMixin','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=p.PropTypes,x=u('/images/mercury/clients/messenger/message/messageStateFailed.png'),y=p.createClass({displayName:'MessengerLogMessage',mixins:[r],propTypes:{message:w.instanceOf(i).isRequired,viewer:w.string.isRequired},render:function(){return (p.createElement('div',{className:this._computeClass()},this._renderErrorState(),p.createElement('i',{className:"_uwa"}),p.createElement('span',{className:"_3oh-"},this._renderLogMessageBody())));},_renderLogMessageBody:function(){var z;if(this.props.message.log_message_type!==k.ORION){z=this.props.message.log_message_body;if(this.props.message.log_message_data.message_type===m.TURN_ON_PUSH&&z&&z.length>0)z=t._("{admin-text-message} for Messenger on mobile.",[t.param('admin-text-message',z.substring(0,z.length-1))]);}switch(this.props.message.log_message_data.message_type){case m.JOURNEY_PROMPT_COLOR:z=t._("You need to be on the latest version of Messenger on a mobile device to pick a color for this conversation.");break;case m.JOURNEY_PROMPT_NICKNAME:var aa=null;if(this.props.message.other_user_fbid&&this.props.viewer!==this.props.message.other_user_fbid){var ba=j.getParticipantIDFromUserID(this.props.message.other_user_fbid);aa=q.getOrFetch(ba);}if(aa&&aa.short_name){z=t._("You need to be on the latest version of Messenger on a mobile device to set a nickname for {admin-text-message} .",[t.param('admin-text-message',aa.short_name)]);}else z=t._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case m.JOURNEY_PROMPT_LIKE:z=t._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;default:break;}return (this._renderMNCommerceUnlink()||z||p.createElement(n,{message:this.props.message,viewer:this.props.viewer}));},_renderMNCommerceUnlink:function(){var z=this.props.message;if(o.isCommercePageAdminMessage(z))return o.getCommercePageUnlink(z,true);},_renderErrorState:function(){if(!l.hasError(this.props.message))return null;return (p.createElement(h,{className:"_41-9",src:x}));},_computeClass:function(){var z,aa=this.props.message,ba=aa.log_message_type===k.UNSUBSCRIBE&&aa.log_message_data.removed_participants.indexOf(aa.author)!==-1,ca=this.props.viewer;switch(aa.log_message_type){case k.SUBSCRIBE:z="_uwb";break;case k.UNSUBSCRIBE:z=ba?"_uwc":"_uwe";break;case k.PHONE_CALL:z=aa.log_message_data.caller.indexOf(ca)!==-1?"_uwf":"_uwg";break;case k.VIDEO_CALL:z=aa.log_message_data.caller.indexOf(ca)!==-1?"_uwh":"_uwi";break;case k.THREAD_NAME:z="_uwj";break;case k.THREAD_IMAGE:z="_uwk";break;case k.SERVER_ERROR:z="_uwl";break;case k.LIVE_LISTEN:z="_uwm";break;case k.WALLPAPER:z="_uwn";break;case k.ORION:z="_uwo";break;case k.SWITCH_TO_WORK:z="_uwp";break;case k.PAGE_REPLY:z="_uwq";break;}return v("_497p"+((aa.log_message_type===k.PHONE_CALL||aa.log_message_type===k.VIDEO_CALL)&&!aa.log_message_data.answered?' '+"_3no3":''),z);}});f.exports=y;},null);
__d('MessengerContextualActions.react',['ContextualLayerUpdateOnScroll','LayerHideOnBlur','Link.react','React','ReactAbstractContextualDialog','ReactLayer','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=m.createClass(l.createSpec({displayName:'MessengerContextualActionsDialog',theme:{wrapperClassName:"_hw2",arrowDimensions:{offset:12,length:12}}})),q=k.createClass({displayName:'MessengerContextualActions',propTypes:{onToggle:o.func},render:function(){var s=this.props,t=s.children,u=babelHelpers.objectWithoutProperties(s,['children']);return (k.createElement(p,babelHelpers._extends({},u,{alignment:'center',behaviors:{ContextualLayerUpdateOnScroll:h,LayerHideOnBlur:i},onToggle:this.props.onToggle}),k.createElement('ul',{className:"_hw3"},t)));}}),r=k.createClass({displayName:'MessengerContextualActionsItem',propTypes:{onClick:o.func},render:function(){return (k.createElement('li',{className:"_hw4"},k.createElement(j,{className:"_hw5",onClick:this.props.onClick},this.props.children)));}});q.Item=r;f.exports=q;},null);
__d('MessengerDialogCancelButton.react',['MessengerDialogButton.react','ReactComponentWithPureRenderMixin','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MessengerDialogCancelButton',mixins:[i],render:function(){return (j.createElement(h,babelHelpers._extends({action:'cancel',label:k._("Cancel"),type:'secondary'},this.props)));}});f.exports=l;},null);
__d('MessengerMessageActionsWrapper.react',['DOMQuery','ImmutableObject','ReactLayeredComponentMixin','MercuryConfig','MercuryMessageActions','MercuryMessageInfo','MessengerActions','MessengerContextualActions.react','MessengerDeleteMessageDialog.react','Parent','React','ReactDOM','csx','cx','fbt','invariant','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';if(c.__markCompiled)c.__markCompiled();var y=o.Item,z=r.PropTypes,aa="_ui9",ba="._ui9",ca=r.createClass({displayName:'MessengerMessageActionsWrapper',mixins:[j],propTypes:{isActive:z.bool,isDeletable:z.bool,isFromViewer:z.bool,message:z.instanceOf(i).isRequired,onDeselect:z.func.isRequired,onSelect:z.func.isRequired},getDefaultProps:function(){return {isDeletable:true};},render:function(){return (r.createElement('div',babelHelpers._extends({onContextMenu:this._handleContextMenu},this.props),this.props.children));},renderLayers:function(){if(!this.props.isDeletable||!this.props.isActive)return {};var da=s.findDOMNode(this),ea=da&&h.scry(da,ba)[0];if(!ea)return {};return {contextualDialog:r.createElement(o,{context:ea,onToggle:this._handleActionsToggle,shown:this.props.isActive},this._renderRetry(),r.createElement(y,{onClick:this._handleDelete},this._renderActionItemMsg()))};},_renderActionItemMsg:function(){if(!this.props.isFromViewer&&k.MessengerGlobalDeleteGK)return v._("Hide");return v._("Delete");},_renderRetry:function(){if(!m.hasError(this.props.message))return null;return (r.createElement(y,{onClick:this._handleRetry},v._("Try Again")));},_handleActionsToggle:function(da){!da&&this._handleDeselect();},_handleDeselect:function(){this.props.onDeselect(this.props.message.message_id);},_handleDelete:function(){var da=this.props.message;n.showDialog(p,{onDelete:function(){l.get()['delete'](da.thread_id,[da.message_id]);},onToggle:this._handleDialogToggle,onCancel:this._handleDeselect,isFromViewer:this.props.isFromViewer});},_handleDialogToggle:function(da){if(!da)n.hideDialog();},_handleRetry:function(){this._handleDeselect();l.get().resend(this.props.message);},_handleContextMenu:function(da){if(!this._shouldAllowNativeContextMenu(da))da.preventDefault();x((function(){this.props.onSelect(this.props.message.message_id);}).bind(this));},_shouldAllowNativeContextMenu:function(da){!(da.target instanceof HTMLElement)?w(0):undefined;return (da.target.nodeName.toLowerCase()==='a'||window.getSelection().toString()!==''||!q.byClass(da.target,aa));}});f.exports=ca;},null);
__d('MessengerMessageSeenHeads.react',['Image.react','immutable','ImmutableObject','MercuryMessageInfo','MessengerConfig','ReactComponentWithPureRenderMixin','React','cssVar','cx','fbt','getViewportDimensions','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=n.PropTypes,u=l.MaxSeenHeadCount||8,v=n.createClass({displayName:'MessengerMessageSeenHeads',mixins:[m],propTypes:{isFromViewer:t.bool,message:t.instanceOf(j).isRequired,nextTimestamp:t.number.isRequired,participants:t.instanceOf(i.Map).isRequired,readReceipts:t.instanceOf(i.OrderedMap).isRequired},render:function(){var x=this.props,y=x.message,z=x.nextTimestamp,aa=x.participants,ba=x.readReceipts;if(k.isSending(y)||ba.isEmpty())return null;var ca=i.Seq(ba).filter(function(ka,la){return (ka>=y.timestamp&&ka<z);});if(ca.isEmpty())return null;var da=this.props.isFromViewer?u:w(),ea=ca.count()>da+1,fa=ea?ca.slice(0,da):ca,ga=fa.map(function(ka,la){var ma=aa.get(la);if(!ma)return null;var na=q._("Seen by {full name}",[q.param('full name',ma.name)]);return (n.createElement(h,{alt:na,className:"_jf2",key:la,src:ma.image_src,title:na}));}).toArray(),ha=ga.length;if(!ha)return null;var ia=ea?ca.slice(da).count():0;if(ia>0){var ja=ca.slice(da).map(function(ka,la){var ma=aa.get(la);return ma?ma.name:null;}).filter(function(ka){return !!ka;}).join('\n')+' ';ga.unshift(n.createElement('span',{className:"_jf3",key:'overflow',title:ja},'+'+ia));}return (n.createElement('span',{className:s(this.props.className,"_jf4"+(ha+ia===1?' '+"_jf5":''))},ga));}});function w(){var x=r().width;if(x<parseInt("920px".replace('px',''),10))return Math.min(u,8);if(x<parseInt("1211px".replace('px',''),10))return Math.min(u,3);return u;}f.exports=v;},null);
__d('messengerRTLClasses',['cx','isRTL'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k,l){var m=i(k||'');return l?m?"_4pv0":'':(!m?"direction_ltr":'')+(m?' '+"direction_rtl":'')+(!m?' '+"text_align_ltr":'')+(m?' '+"text_align_rtl":'')+(m?' '+"_4pv0":'');}f.exports=j;},null);
__d('MessengerMessage.react',['MercuryDisplayTimeFilterMessageRenderer','immutable','ImmutableObject','MercuryAttachment','MercuryConfig','MercuryMessageDeliveryState','MercuryMessageInfo','MessengerAttachmentAttribution.react','MessengerAttachmentRenderer','MessengerBubble.react','MessengerBubbleBlock.react','MessengerCodeBubble.react','MessengerCodePasteUtils','MessengerConfig','MessengerMessageActionsWrapper.react','MessengerMessageSeenHeads.react','React','cx','fbt','joinClasses','messengerRTLClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';if(c.__markCompiled)c.__markCompiled();var ca=x.PropTypes;function da(fa){switch(fa){case m.SENDING:return z._("Sending");case m.SENT:return z._("Sent");case m.DELIVERED:return z._("Delivered");case m.ERROR:return z._("Error");}return null;}var ea=x.createClass({displayName:'MessengerMessage',propTypes:{deliveryTimestamp:ca.number.isRequired,isActive:ca.bool,isFromViewer:ca.bool,message:ca.instanceOf(j).isRequired,nextTimestamp:ca.number.isRequired,onDeselect:ca.func.isRequired,onSelect:ca.func.isRequired,participants:ca.instanceOf(i.Map).isRequired,readReceipts:ca.instanceOf(i.OrderedMap).isRequired,showDeliveryState:ca.bool},shouldComponentUpdate:function(fa){return (fa.isActive!==this.props.isActive||fa.isFromViewer!==this.props.isFromViewer||fa.message!==this.props.message||fa.nextTimestamp!==this.props.nextTimestamp||fa.showDeliveryState!==this.props.showDeliveryState||fa.deliveryTimestamp!==this.props.deliveryTimestamp||!i.is(fa.readReceipts,this.props.readReceipts)||!i.is(fa.participants,this.props.participants));},render:function(){return (x.createElement(v,{className:aa("_o46"+(' '+"_3erg")+(this.props.isActive?' '+"_-5k":'')+(this.props.isFromViewer?' '+"_3i_m":'')+(this.props.isFromViewer?' '+"_nd_":'')+(!this.props.isFromViewer?' '+"_29_7":''),ba(this.props.message.body)),isActive:this.props.isActive,isDeletable:!this._isP2PAttachment(),isFromViewer:this.props.isFromViewer,message:this.props.message,onDeselect:this.props.onDeselect,onSelect:this.props.onSelect},x.createElement('div',{className:'clearfix'},this._renderBubble(),this._renderAttachmentsOutsideBubble()),this._renderErrorState(),this._renderDeliveryState(),x.createElement(w,{className:"_4jzq",isFromViewer:this.props.isFromViewer,message:this.props.message,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})));},_renderAttachmentsOutsideBubble:function(){var fa=p.getAttachmentsOutsideBubble(this.props.message);if(!fa||!fa.length)return null;var ga=x.createElement('div',{className:"_3058 _15gf"},fa);if(this.props.message.attachments.length===1&&k.hasAttribution(this.props.message.attachments[0]))return (x.createElement(r,null,ga,x.createElement(o,{attachment:new j(this.props.message.attachments[0])})));return ga;},_isP2PAttachment:function(){return (p.isP2PAttachment(this.props.message));},_renderBubble:function(){var fa=this.props.message,ga=i.List(p.getAttachmentsInsideBubble(fa));if(l.MessengerCodePaste&&t.containsCodeBlock(fa.body))return (x.createElement(s,{attachments:ga,body:fa.body,className:"_3058 _ui9",ranges:fa.ranges||[],threadID:fa.thread_id||''}));if(fa.is_filtered_content)return (x.createElement('div',{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},h.renderFilteredContent(fa)));if(fa.body||!ga.isEmpty())return (x.createElement(q,{attachments:ga,body:fa.body,className:"_3058 _ui9",isP2PAttachment:this._isP2PAttachment(),ranges:fa.ranges,threadID:fa.thread_id,customLike:fa.customLike}));return null;},_renderDeliveryState:function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var fa=n.getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(fa===m.UNKNOWN)return null;return (x.createElement('span',{className:"_2her"+(fa===m.SENDING?' '+"_4jzp":'')+(fa===m.SENT?' '+"_3zzf":'')+(fa===m.DELIVERED?' '+"_9ah":'')+(fa===m.ERROR?' '+"_5ei9":''),onClick:fa===m.ERROR?this._handleSelect:null,title:da(fa)}));},_renderErrorState:function(){var fa=this.props.message;if(!n.hasError(fa))return null;return (x.createElement('span',{className:"_3058 _2ygi",onClick:this._handleSelect},z._("Message couldn't be sent.")));},_handleSelect:function(fa){fa.stopPropagation();this.props.onSelect(this.props.message.message_id);}});f.exports=ea;},null);
__d('MessengerPageAdminNoteList.react',['LeftRight.react','MessengerBubble.react','PagesMessengerCreatorInfo.react','ReactComponentWithPureRenderMixin','React','enumerate','classWithMixins','cx','fbt','immutable','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t;'use strict';var u=l.PropTypes;s=babelHelpers.inherits(v,n(l.Component,r(k)));t=s&&s.prototype;v.prototype.render=function(){var w=[],x=this.calculateGroups(this.props.notes);x.forEach((function(y,z){w.push(l.createElement('li',{className:"_4kd2",key:'group:'+z},this.$MessengerPageAdminNoteList1(y)));}).bind(this));return (l.createElement('ul',{className:"_4kd3"},w));};v.prototype.$MessengerPageAdminNoteList1=function(w){var x=[];w.forEach((function(y,z){x.push(l.createElement('div',{className:"_4kd4",key:'note:'+z},this.$MessengerPageAdminNoteList2(y,w)));}).bind(this));return x;};v.prototype.$MessengerPageAdminNoteList2=function(w,x){var y=q.List([l.createElement(h,{className:"_561k"},l.createElement('div',{className:"_561l"},p._("Private Note")),l.createElement(j,{key:'creator_info',creator_info:x[0].creator_info,isNote:true}))]);return (l.createElement('div',{className:"_o46 _3i_m _nd_"},l.createElement('div',{className:'clearfix'},l.createElement(i,{body:w.body,attachments:y,className:"_3058 _4kd5"}))));};v.prototype.calculateGroups=function(w){var x=[],y=null,z=null,aa=m(w),ba;while(!(ba=aa.next()).done){var ca=z&&z.value.creator_info.creatorID===ba.value.creator_info.creatorID;if(!ca){y=[];x.push(y);}if(y)y.push(ba.value);z=ba;}return x;};function v(){s.apply(this,arguments);}v.propTypes={notes:u.arrayOf(u.shape({id:u.string,body:u.string.isRequired,creator_info:u.shape({creatorID:u.string.isRequired,creatorName:u.string.isRequired,creatorType:u.string.isRequired,labelType:u.string.isRequired,pageID:u.string.isRequired,profileURI:u.string}),timestamp:u.number.isRequired})).isRequired};f.exports=v;},null);
__d('MessengerMessageGroup.react',['immutable','ImmutableObject','Image.react','Link.react','MercuryIDs','MercuryParticipants','MercuryTimestamp','MessengerActions','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','PagesMessengerCreatorInfo.react','React','ReactDOM','StoreAndPropBasedStateMixin','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=h.List,ba=h.OrderedMap,ca=v.PropTypes,da=32,ea=new i({image_src:'',is_messenger_user:true,name:''}),fa=v.createClass({displayName:'MessengerMessageGroup',mixins:[x(m)],propTypes:{activeMessageID:ca.string,deliveryTimestamp:ca.number.isRequired,hasDateBreak:ca.bool,isCanonical:ca.bool,isFromViewer:ca.bool,isPageMessage:ca.bool,lastReadTimestamp:ca.number.isRequired,messages:ca.instanceOf(h.List).isRequired,nextTimestamp:ca.number.isRequired,onMessageDeselect:ca.func.isRequired,onMessageSelect:ca.func.isRequired,readReceipts:ca.instanceOf(ba).isRequired,thread:ca.object},statics:{calculateState:function(ia){return {participants:ga(ia)};}},shouldComponentUpdate:function(ia,ja){return (this.props.activeMessageID!==ia.activeMessageID||this.props.isFromViewer!==ia.isFromViewer||this.props.deliveryTimestamp!==ia.deliveryTimestamp||this.props.lastReadTimestamp!==ia.lastReadTimestamp||!h.is(this.props.messages,ia.messages)||!h.is(this.props.readReceipts,ia.readReceipts)||!h.is(this.state.participants,ja.participants));},render:function(){return (v.createElement('div',null,v.createElement('div',{className:"_1t_p"+(' '+"clearfix")+(t.isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),this._renderName(),v.createElement('div',{className:"_1t_s"},this._renderMessages())),this.props.isPageMessage?this._renderNotes():null));},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var ia=this.props.messages.last(),ja=this.state.participants.get(ia.author)||ea,ka=z._("{name} {time}",[z.param('name',ja.name),z.param('time',n.getPreciseTimestamp(ia.timestamp))]),la=v.createElement(s,{className:"_1t_r",isMessengerUser:ja.is_messenger_user,size:da,showBadge:true,tooltipContent:ka},v.createElement(j,{alt:'',src:ja.image_src,height:da,width:da}));if(!this.props.isCanonical)la=v.createElement(k,{className:"_5f0v",onClick:this._handleContactSelect.bind(this,ja),tabIndex:-1},la);return (v.createElement('div',{className:"_1t_q"},la));},_renderMessages:function(){var ia=this.props.messages.size,ja=[];this.props.messages.forEach((function(ka,la,ma){var na=ka.message_id===this.props.activeMessageID;if(na&&!(la===0&&this.props.hasDateBreak))ja.push(v.createElement(p,{className:"_5r8z",date:new Date(ka.timestamp),key:'db:'+ka.message_id}));ja.push(v.createElement(q,{deliveryTimestamp:this.props.deliveryTimestamp,isActive:na,isFromViewer:this.props.isFromViewer,key:ka.message_id,message:ka,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(ma,ia,la),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:ka.timestamp>this.props.lastReadTimestamp,ref:ka.message_id}));if(ha(this.props.isPageMessage,ma,la,ka))ja.push(v.createElement(u,{key:'creator_info:'+la,creator_info:ka.creator_info}));}).bind(this));return ja;},_renderNotes:function(){var ia=[];this.props.messages.forEach((function(ja,ka,la){if(this.props.isPageMessage&&ja.page_admin_notes)ia.push(v.createElement(r,{key:'notes:'+ja.message_id,notes:ja.page_admin_notes}));}).bind(this));return ia;},_renderName:function(){var ia=this.state.participants.get(this.props.messages.first().author);if(!ia)return null;var ja=ia.short_name;if(this.props.thread){var ka=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,la=l.getUserIDFromParticipantID(ia.id);if(ka&&la&&ka[la])ja=ka[la];}return (v.createElement('h5',{className:"_ih3"+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":'')},v.createElement('span',{className:"_3oh-"},ja)));},getMessageElement:function(ia){return w.findDOMNode(this.refs[ia]);},_hasSeenHeadsAtBottom:function(){var ia=this.props,ja=ia.messages,ka=ia.nextTimestamp,la=ia.readReceipts,ma=ja.last().timestamp,na=0;la.forEach(function(oa){if(oa>=ma&&oa<ka)if(++na===2)return false;});return na===2;},_getNextTimestamp:function(ia,ja,ka){return ka<ja-1?ia.get(ka+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function(ia){var ja=l.getThreadIDFromParticipantID(ia.id);ja&&o.selectThread(ja);}});function ga(ia){var ja=ia.messages.first().author;return h.Map().withMutations(function(ka){ia.readReceipts.forEach(function(la,ma){ka.set(ma,m.getOrFetch(ma));});ka.set(ja,m.getOrFetch(ja));});}function ha(ia,ja,ka,la){if(!ia||!la.creator_info)return false;if(ka===ja.size-1)return true;var ma=ja.get(ka+1).creator_info;if(!ma)return true;return la.creator_info.creatorID!==ma.creatorID;}f.exports=fa;},null);
__d('MessengerTypingIndicator.react',['Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=32,t=o.createClass({displayName:'MessengerTypingIndicator',mixins:[n,p(j)],propTypes:{userID:r.string,showName:r.bool},statics:{calculateState:function(u){return {author:j.getOrFetch(u.userID)};}},render:function(){if(!this.state.author)return null;var u=this.state.author;return (o.createElement('div',{className:"_1t_p _1hbw"},o.createElement('div',{className:"_1t_q"},o.createElement(l,{className:"_1t_r",isMessengerUser:u.is_messenger_user,size:s,showBadge:true},o.createElement(h,{alt:'',src:u.image_src,height:s,width:s}))),o.createElement('div',{className:"_1t_s"},o.createElement('div',{className:"_o46 _3erg _29_7"},o.createElement('div',{className:'clearfix'},o.createElement(m,{attachments:i.List([o.createElement(k,{key:'animation'})]),body:'',className:"_3058",ref:'bubble'}))))));},getBubble:function(){return this.refs.bubble;}});f.exports=t;},null);
__d('MercurySeenIndicator.react',['MercuryDelayedRoger','MercuryIDs','React','SubscriptionsHandler','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'MercurySeenIndicator',propTypes:{thread:m.object.isRequired,viewer:m.string.isRequired},componentDidMount:function(){this._subscriptions=new k();this._subscriptions.addSubscriptions(h.subscribe('state-changed',(function(o,p){p[this.props.thread.thread_id]&&this.forceUpdate();}).bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var o=this._separateParticipants(),p=o.viewer,q=o.others,r=this._viewerLastToReply(p),s=this._seenByAll(q);return (j.createElement('span',{className:"_3jy5"+(r?' '+"repliedLast":'')+(r&&s?' '+"seenByAll":'')}));},_separateParticipants:function(){var o=i.getParticipantIDFromUserID(this.props.viewer),p=this.props.thread.participants.filter(function(q){return q!==o;});return {viewer:o,others:p};},_viewerLastToReply:function(o){return o===this.props.thread.snippet_sender;},_seenByAll:function(o){var p=this.props.thread.thread_id;return h.getSeenBy(p).length===o.length;}});f.exports=n;},null);
__d('MercuryThreadSnippet.react',['immutable','MercuryAttachmentSnippet.react','MercuryIDs','React','TextWithEmoticons.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=k.createClass({displayName:'MercuryThreadSnippet',propTypes:{participants:o.instanceOf(h.Map).isRequired,shouldAlwaysRenderSender:o.bool,shouldRenderYou:o.bool,thread:o.object.isRequired,viewer:o.string.isRequired},shouldComponentUpdate:function(s,t){return (this.props.shouldRenderYou!==s.shouldRenderYou||this.props.thread!==s.thread||this.props.viewer!==s.viewer||!h.is(s.participants,this.props.participants));},render:function(){return (k.createElement('span',{className:this.props.className},this._renderAttachmentIndicator(),this._renderSnippet()));},_renderAttachmentIndicator:function(){if(!this.props.thread.snippet||!q(this.props.thread))return null;return (k.createElement('span',{className:"_j0r"}));},_renderSnippet:function(){var s=this.props.thread,t=j.getParticipantIDFromUserID(this.props.viewer),u=this._renderInnerSnippet(),v=s.participants.length;if(s.is_subscribed)v--;if(s.snippet_has_attachment||!s.snippet_sender)return u;if(s.snippet_sender===t){if(!this.props.shouldRenderYou)return u;return n._("You: {conversation_snippet}",[n.param('conversation_snippet',u)]);}if(v<=1&&!this.props.shouldAlwaysRenderSender)return u;var w=this.props.participants.get(s.snippet_sender);if(!w||!w.short_name)return u;var x=w.short_name;if(s){var y=s.custom_nickname?s.custom_nickname:null,z=j.getUserIDFromParticipantID(w.id);if(y&&z&&y[z])x=y[z];}return n._("{name}: {conversation_snippet}",[n.param('name',x),n.param('conversation_snippet',u)]);},_renderInnerSnippet:function(){var s=this.props.thread,t=s.snippet;if(t&&t.startsWith('?OTR'))return n._("[encrypted message]");if(t)return (k.createElement(l,{renderEmoticons:true,renderEmoji:true,text:t.replace(/\r\n|[\r\n]/g,' ')}));if(q(s))return (k.createElement(i,{thread:s,viewer:this.props.viewer}));return null;}});function q(s){return (s.snippet_has_attachment&&s.snippet_attachments&&s.snippet_attachments.length>0);}function r(s){return !s.snippet&&q(s);}f.exports=p;},null);
__d('MercuryThreadTimestamp.react',['ReactComponentWithPureRenderMixin','React','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MercuryThreadTimestamp',mixins:[h],propTypes:{time:l.number,title:l.string,text:l.string},render:function(){var n=this.props.time;if(!n)return i.createElement('abbr',null);return (i.createElement('abbr',{className:k(this.props.className,'timestamp'),title:this.props.title||new Date(n).toLocaleDateString(),'data-utime':n/1000},this.props.text||j(new Date(n),'g:ia')));}});f.exports=m;},null);
__d('MercuryDragDropPrompt.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'MercuryDragDropPrompt',render:function(){return (h.createElement('div',{className:"_4g6x"},h.createElement('div',{className:"_4g6y"},h.createElement('div',{className:"_4g6z _4g71"},j._("Drag Links\/Files Here")),h.createElement('div',{className:"_4g6z _4g6- _4g6_"},j._("Drop Files Here")),h.createElement('div',{className:"_4g6z _4g6- _4g70"},j._("Drop Link Here")))));}});f.exports=k;},null);
__d('PagesMessengerOmnipicker.react',['React','Link.react','Omnipicker.react','ComputerPanel.react','OmnipickerComputerSelector.react','OmnipickerDialog.react','OmnipickerDialogRenderer','OmnipickerPagePostedPhotosPanel.react','OmnipickerPagePostedPhotosSelector.react','OmnipickerPanelList.react','OmnipickerSelectorList.react','OmnipickerWaterfallLogger','PUWApplications','PUWSteps','WaterfallIDGenerator','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=h.PropTypes,aa=h.createClass({displayName:'PagesMessengerOmnipicker',_waterfallLogger:s,_dialogRenderer:null,propTypes:{uploadURI:z.string.isRequired,onPhotosSelected:z.func.isRequired,pageID:z.string.isRequired},componentDidMount:function(){this._waterfallLogger=new s(t.WEB_PAGES_MESSENGER,v.generate());var ba={fileUploadURI:this.props.uploadURI};this._dialogRenderer=new n(h.createElement(m,{onCancel:this._onPickerCancel,title:x._("Select Photo")},h.createElement(j,{logger:this._waterfallLogger,onDoneSelecting:this._onDoneSelecting},h.createElement(r,null,h.createElement(l,null),h.createElement(p,null)),h.createElement(q,null,h.createElement(k,{config:ba}),h.createElement(o,{pageID:this.props.pageID})))));},render:function(){return (h.createElement('div',{className:"_k6_"},h.createElement(i,{className:"_k70",onClick:this._onPickerLaunch},h.createElement('i',{alt:x._("Camera"),className:"_k72"}))));},_onPickerLaunch:function(){this._waterfallLogger.logStep(u.CLIENT_FLOW_BEGIN);!this._dialogRenderer?y(0):undefined;this._dialogRenderer.show();},_onPickerCancel:function(){!this._dialogRenderer?y(0):undefined;this._dialogRenderer.hide();this._waterfallLogger.logStep(u.CLIENT_FLOW_CANCEL);},_onDoneSelecting:function(ba){!this._dialogRenderer?y(0):undefined;this._dialogRenderer.hide();this.props.onPhotosSelected(ba);}});f.exports=aa;},null);
__d("SavedResponsesConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={editPanelViewMode:{LIST:"LIST",CREATE:"CREATE",EDIT:"EDIT",PERSONALIZE:"PERSONALIZE"},browsePanelAttachModeWidth:300,editPanelDialogWidth:600,listItemImageHeight:60,listItemImageWidth:60};f.exports=h;},null);
__d('SavedResponsesActionButton.react',['React','Image.react','XUIGrayText.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';var o=h.PropTypes;m=babelHelpers.inherits(p,h.Component);n=m&&m.prototype;function p(q,r){n.constructor.call(this,q,r);}p.prototype.render=function(){var q=l("_uvx",this.props.className);return (h.createElement('div',{className:q,onClick:this.props.onClick},h.createElement(i,{src:this.props.image,className:"_uvy"}),h.createElement(j,{shade:'medium',className:"_uvz"},this.props.label)));};p.propTypes={image:o.object.isRequired,label:o.string.isRequired,onClick:o.func.isRequired};f.exports=p;},null);
__d("XPagesSavedResponseImagePreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/image\/preview\/",{});},null);
__d('SavedResponsesImage.react',['ActorURI','AsyncRequest','LoadingIndicator.react','React','Image.react','XPagesSavedResponseImagePreviewController','XUICloseButton.react','cx','isEmpty','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=k.PropTypes;r=babelHelpers.inherits(u,k.Component);s=r&&r.prototype;function u(v,w){s.constructor.call(this,v,w);this.$SavedResponsesImage1=null;this.state={currentThumbnailImageId:'',imageUrl:null,isFetchingThumbnail:false};}u.prototype.componentWillReceiveProps=function(v){if(v.imageID!==this.props.imageID)this.$SavedResponsesImage2(v.imageID);};u.prototype.componentDidMount=function(){if(this.props.imageID)this.$SavedResponsesImage2(this.props.imageID);};u.prototype.componentWillUnmount=function(){if(this.$SavedResponsesImage1&&this.$SavedResponsesImage1.abort){this.$SavedResponsesImage1.abort();this.$SavedResponsesImage1=null;}};u.prototype.render=function(){if(!this.$SavedResponsesImage3()&&!this.state.imageUrl)return null;var v="_3mgf";if(this.$SavedResponsesImage3()){v=q(v,this.props.loadingClassName);}else v=q(v,this.props.displayClassName);return (k.createElement('div',{className:this.props.className},k.createElement('div',{className:v},this.$SavedResponsesImage4())));};u.prototype.$SavedResponsesImage2=function(v){if(p(v)){this.setState({imageUrl:null});return;}this.setState({isFetchingThumbnail:true});var w=m.getURIBuilder().getURI();w=h.create(w,this.props.pageID);this.$SavedResponsesImage1=new i();this.$SavedResponsesImage1.setURI(w).setHandler((function(x){return this.$SavedResponsesImage5(x);}).bind(this)).setMethod('POST').setData({image_id:v,target_width:this.props.width,target_height:this.props.height}).send();};u.prototype.$SavedResponsesImage3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading;};u.prototype.$SavedResponsesImage4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail){return (k.createElement(j,{size:'medium',color:'white',className:"_3mgg"}));}else if(this.state.imageUrl){return (k.createElement('div',null,k.createElement(n,{className:"_3mgn"+(!this.props.shouldShowCloseButton?' '+"hidden_elem":''),size:'medium',onClick:this.props.onClose}),k.createElement(l,{src:this.state.imageUrl})));}else return null;};u.prototype.$SavedResponsesImage5=function(v){this.setState({imageUrl:v.payload.url,isFetchingThumbnail:false});};u.propTypes={displayClassName:t.string.isRequired,height:t.number.isRequired,imageID:t.string,isUploading:t.bool,loadingClassName:t.string.isRequired,onClose:t.func,pageID:t.string.isRequired,shouldShowCloseButton:t.bool.isRequired,width:t.number.isRequired};f.exports=u;},null);
__d("XPagesSavedResponsesAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/",{page_id:{type:"Int",required:true},other_user_id:{type:"Int",required:true}});},null);
__d('SavedResponsesUtils',['ActorURI','AsyncRequest','XPagesSavedResponsesAsyncController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={generateImageMetadata:function(l){return {filename:'Photo.jpg',image_id:l,filetype:'image/jpeg'};},fetchSavedResponses:function(l,m,n){var o=j.getURIBuilder().setInt('other_user_id',m).setInt('page_id',l).getURI();o=h.create(o,l);new i().setURI(o).setHandler(function(p){return n(p.payload.responses,p.payload.tokens);}).send();}};f.exports=k;},null);
__d('SavedResponsesImageUploader.react',['ChatFileUploaderMixin','Image.react','MercuryConfig','MercuryFileUploader','SavedResponsesUtils','URI','XUIGrayText.react','React','ReactDOM','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=o.PropTypes,t=o.createClass({displayName:'SavedResponsesImageUploader',mixins:[h],propTypes:{image:s.object.isRequired,label:s.string.isRequired,pageID:s.string},componentDidMount:function(){this._fileUploader=new k(this.props.attachmentsShelf,p.findDOMNode(this.refs.form),p.findDOMNode(this.refs.input),p.findDOMNode(this.refs.attachID));if(this.props.imageID)this._fileUploader.addCachedAttachments([l.generateImageMetadata(this.props.imageID)]);this.setUpSubscriptionsHandler(this._fileUploader);},getActionURI:function(){return this.props.pageID?new m(j.upload_url).addQueryData('request_user_id',this.props.pageID).toString():j.upload_url;},getDefaultProps:function(){return {pageID:null};},componentDidUpdate:function(u,v){if(this.props.imageID){this._fileUploader.removeAttachments();this._fileUploader.addCachedAttachments([l.generateImageMetadata(this.props.imageID)]);}},render:function(){var u=r("_uvx",this.props.className);return (o.createElement('form',{action:this.getActionURI(),className:u,method:'post',ref:'form'},o.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),o.createElement('div',{className:"_4q60"},o.createElement('div',{className:"_4q61 _2d_p"},o.createElement(i,{src:this.props.image,className:"_uvy"}),o.createElement(n,{shade:'medium',className:"_uvz"},this.props.label)),o.createElement('input',{type:'file',className:"_2d_q",name:'attachment[]',accept:this.props.imagesOnly?'image/*':'*',ref:'input'}))));}});f.exports=t;},null);
__d("SavedResponsesImageUploadHelper",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){"use strict";this.$SavedResponsesImageUploadHelper1=i;this.$SavedResponsesImageUploadHelper2=j;}h.prototype.onUploaderMounted=function(i){"use strict";this.$SavedResponsesImageUploadHelper3=i;};h.prototype.onUploadFinished=function(){"use strict";if(!this.$SavedResponsesImageUploadHelper3)return;var i=this.$SavedResponsesImageUploadHelper3.getImageFiles().pop().toString();this.$SavedResponsesImageUploadHelper2(i);};h.prototype.onUploadStarted=function(){"use strict";this.$SavedResponsesImageUploadHelper1();};f.exports=h;},null);
__d('MacroInput.react',['AbstractTextEditor.react','AbstractTextEditorProps','EditorState','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'MacroInput',propTypes:{autoflip:n.bool,editorState:n.instanceOf(j).isRequired,onChange:n.func.isRequired,placeholder:n.string,spellCheck:n.bool},getDefaultProps:i.getDefaultProps,blur:function(){this.refs.abstractTextEditor&&this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor&&this.refs.abstractTextEditor.focus();},render:function(){var p=m(this.props.className,"_38bx");return (k.createElement('div',{className:p,onClick:this.focus,onFocus:this.focus},k.createElement('div',{className:"_18_r"},k.createElement(h,babelHelpers._extends({},this.props,{ref:'abstractTextEditor'})))));}});f.exports=o;},null);
__d('SavedResponsesEditResponseContentView.react',['AbstractTextArea.react','React','SavedResponsesActionButton.react','SavedResponsesImage.react','SavedResponsesImageUploader.react','SavedResponsesImageUploadHelper','ScrollableArea.react','MacroInput.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=i.PropTypes;s=babelHelpers.inherits(v,i.Component);t=s&&s.prototype;v.prototype.render=function(){'use strict';var w="_38bx"+(' '+"_38by")+(this.props.editorState.getSelection().getHasFocus()?' '+"_38bz":''),x=q._("Enter reply title here"),y=q._("Enter your message here");return (i.createElement('div',{className:this.props.className},i.createElement(h,{className:"_4451 _1vw8",onChange:(function(z){return this.props.onTitleChange(z.target.value);}).bind(this),placeholder:x,value:this.props.responseTitle}),i.createElement('div',{className:"_38bw _57hg"},i.createElement(n,{fade:true,shadow:true},i.createElement(o,{className:w,editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:y,ref:'macroInput'}),i.createElement(k,{className:"_57hh",displayClassName:"_57hn",imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",pageID:this.props.pageID,height:250,onClose:this.props.onDeleteImage,shouldShowCloseButton:true,width:250}))),this.$SavedResponsesEditResponseContentView1()));};v.prototype.$SavedResponsesEditResponseContentView1=function(){'use strict';return (i.createElement('div',{className:"_57ho"},i.createElement(l,{className:"_3-8v",image:r('/images/mobile/glyph/photos_dark-grey_l.png'),label:q._("Add Image"),onFileUploaderMounted:(function(w){return this.props.uploadHandler.onUploaderMounted(w);}).bind(this),onSubmit:(function(){return this.props.uploadHandler.onUploadStarted();}).bind(this),onUploadFinished:(function(){return this.props.uploadHandler.onUploadFinished();}).bind(this),pageID:this.props.pageID}),i.createElement(j,{image:r('/images/mobile/glyph/love_dark-grey_l.png'),className:"_3-8v",label:q._("Personalize"),onClick:this.props.onPersonalize})));};function v(){'use strict';s.apply(this,arguments);}v.propTypes={editorState:u.object.isRequired,isUploadingImage:u.bool.isRequired,pageID:u.string.isRequired,responseImageID:u.string,responseTitle:u.string,onContentChange:u.func.isRequired,onDeleteImage:u.func.isRequired,onPersonalize:u.func.isRequired,onTitleChange:u.func.isRequired,uploadHandler:u.instanceOf(m).isRequired};f.exports=v;},null);
__d('SavedResponsesFooterButton.react',['React','Image.react','XUIButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){return (h.createElement(j,babelHelpers._extends({},this.props,{className:"_3-8i"+(this.props.isHidden?' '+"hidden_elem":''),size:'large',label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?h.createElement(i,{src:this.props.image}):null})));};o.propTypes={image:n.object,isHidden:n.bool,label:n.string.isRequired,onClick:n.func.isRequired,use:n.oneOf(['default','special','confirm'])};o.defaultProps={use:'default',isHidden:false};f.exports=o;},null);
__d('SavedResponsesMacroDetailView.react',['React','ScrollableArea.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){var p=this.props.macro;if(!p)return null;return (h.createElement(i,{fade:true,shadow:true},h.createElement('div',null,h.createElement('div',{className:"_tpd"},p.key),h.createElement('div',{className:"_tpe"},p.description),h.createElement('div',{className:"_tpf"},k._("Example")),h.createElement('div',{className:"_tpg"},p.example))));};o.propTypes={macro:n.shape({description:n.string.isRequired,example:n.string.isRequired,key:n.string.isRequired,name:n.string.isRequired,value:n.string.isRequired})};f.exports=o;},null);
__d('SavedResponsesMacroListItem.react',['React','Image.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);this.state={isHover:false};}o.prototype.render=function(){return (h.createElement('div',{className:"_5y_z",'data-id':this.props.macro.key,onClick:(function(){return this.$SavedResponsesMacroListItem1();}).bind(this),onMouseOut:(function(){return this.$SavedResponsesMacroListItem2();}).bind(this),onMouseOver:(function(){return this.$SavedResponsesMacroListItem3();}).bind(this)},h.createElement('div',{className:"_5y__"},this.props.macro.key),h.createElement('div',{className:"_5z00"+(!this.state.isHover?' '+"hidden_elem":'')},h.createElement(i,{src:k('/images/pages/macro_listitem_triangle.png')}))));};o.prototype.$SavedResponsesMacroListItem3=function(){this.props.onHover(this.props.macro);this.setState({isHover:true});};o.prototype.$SavedResponsesMacroListItem2=function(){this.setState({isHover:false});};o.prototype.$SavedResponsesMacroListItem1=function(){this.props.onSelect(this.props.macro);};o.propTypes={macro:n.shape({key:n.string.isRequired,value:n.string.isRequired}).isRequired,onHover:n.func.isRequired,onSelect:n.func.isRequired};f.exports=o;},null);
__d('SavedResponsesMacroListView.react',['React','SavedResponsesMacroListItem.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=h.PropTypes;j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);}m.prototype.render=function(){return (h.createElement('ul',null,this.$SavedResponsesMacroListView1()));};m.prototype.$SavedResponsesMacroListView1=function(){var n=[];for(var o in this.props.macros){var p=this.props.macros[o];n.push(h.createElement(i,{macro:p,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected}));}return n;};m.propTypes={macros:l.object.isRequired,onMacroHover:l.func.isRequired,onMacroSelected:l.func.isRequired};f.exports=m;},null);
__d('SavedResponsesMacroBrowseView.react',['Grid.react','React','SavedResponsesFooterButton.react','SavedResponsesMacroDetailView.react','SavedResponsesMacroListView.react','ScrollableArea.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.GridItem,t=i.PropTypes;q=babelHelpers.inherits(u,i.Component);r=q&&q.prototype;function u(v,w){'use strict';r.constructor.call(this,v,w);this.state={activeMacro:null};}u.prototype.render=function(){'use strict';return (i.createElement('div',null,this.renderBodyPart(),i.createElement('div',{className:"_3ohz"},this.renderFooterPart())));};u.prototype.renderBodyPart=function(){'use strict';var v=p("_552a",this.props.className);return (i.createElement('div',{className:v},i.createElement(h,{cols:2,spacing:'none',className:"_552b"},i.createElement(s,{className:"_552c"},i.createElement('div',{className:"_552d"}),i.createElement(m,{fade:true,shadow:true},i.createElement('div',{className:"_2t-k"},i.createElement(l,{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:(function(w){return this.$SavedResponsesMacroBrowseView1(w);}).bind(this)})))),i.createElement(s,{className:"_552e"},i.createElement(k,{macro:this.state.activeMacro})))));};u.prototype.renderFooterPart=function(){'use strict';var v=o._("Cancel");return (i.createElement('div',null,i.createElement('div',{className:"_552g"},i.createElement(j,{label:v,onClick:this.props.onCancel}))));};u.prototype.$SavedResponsesMacroBrowseView1=function(v){'use strict';this.setState({activeMacro:v});};u.propTypes={macros:t.object.isRequired,onCancel:t.func.isRequired,onMacroSelected:t.func.isRequired};f.exports=u;},null);
__d('SavedResponsesPanel.react',['React','Image.react','XUICloseButton.react','XUIDialogBody.react','XUIDialogTitle.react','XUIGrayText.react','cx','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=h.PropTypes;r=babelHelpers.inherits(u,h.Component);s=r&&r.prototype;function u(v,w){s.constructor.call(this,v,w);}u.prototype.render=function(){return (h.createElement('div',{className:this.props.className},h.createElement(l,{className:"_3alh",showCloseButton:false},h.createElement('div',{className:"_2rp7"},h.createElement('div',{className:"_2rp8"+(!this.props.shouldShowBackButton?' '+"hidden_elem":''),onClick:this.props.onBackButtonClicked},h.createElement(i,{src:q("/images/help/rooms/back.png"),className:"_2rp9"}),h.createElement(m,{shade:'light',className:"_2rpa"},this.props.backButtonLabel),h.createElement('div',{className:"_2rpb"})),h.createElement('span',{className:"_5hp9"},this.props.title)),this.$SavedResponsesPanel1()),h.createElement(k,{className:"_2rpc"},this.props.children)));};u.prototype.$SavedResponsesPanel1=function(){var v=p._("Close");return (h.createElement(j,{className:"_2rpe",label:v,onClick:this.props.onClose,shade:'dark',size:'medium',title:v,type:'button'}));};u.propTypes={backButtonLabel:t.string,onBackButtonClicked:t.func,onClose:t.func.isRequired,shouldShowBackButton:t.bool,title:t.string.isRequired};u.defaultProps={backButtonLabel:null,onBackButtonClicked:o,shouldShowBackButton:false};f.exports=u;},null);
__d('MacroSpan.react',['DraftEntity','React','XUICloseButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MacroSpan',propTypes:{entityKey:l.string.isRequired,offsetKey:l.string.isRequired,onRemoveToken:l.func.isRequired,tokens:l.object.isRequired},getInitialState:function(){return {isMouseOver:false};},render:function(){var n=this._getEntityData();return (i.createElement('span',{className:"_vxd",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement('span',{className:"_vxe",contentEditable:false,'data-offset-key':this.props.offsetKey,spellCheck:false},this._getContent(n),i.createElement(j,{size:'small',className:"_vxf",onClick:this._removeToken}))));},_getContent:function(n){var o=n.key in this.props.tokens?this.props.tokens[n.key].value:n.key,p=n.key in this.props.tokens?this.props.tokens[n.key].key:n.key;return this.state.isMouseOver?p:o;},_onMouseEnter:function(){this.setState({isMouseOver:true});},_onMouseLeave:function(){this.setState({isMouseOver:false});},_removeToken:function(){this.props.onRemoveToken(this.props.offsetKey);},_getEntityData:function(){return h.get(this.props.entityKey).getData();}});f.exports=m;},null);
__d('getMacrosInputDecorator',['CompositeDraftDecorator','DraftDecorator','MacroSpan.react','getEntityMatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){return new h([new i(k(function(o){return o.getType()==='TOKEN';}),j,{onRemoveToken:n,tokens:m})]);}f.exports=l;},null);
__d('SavedResponsesTokensUtils',['DraftEntity','createEditorStateWithEntities','getMacrosInputDecorator'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=new RegExp('{{(.*?)}}','ig'),l={_parseTemplateFieldTokens:function(m){var n=m,o=[],p;while(p=k.exec(n)){var q={text:p[0],offset:p.index,length:p[0].length,entity:{token:p[0],key:p[1]}};o.push(q);n=n.replace(p[0],q.text);k.lastIndex=q.offset+q.length;}if(o.length>0){if(o[0].offset===0){n=" "+n;o.forEach(function(s){s.offset++;});}var r=o[o.length-1];if(r.length+r.offset===n.length)n=n+" ";}return {ranges:o,text:n};},createTemplateFieldsEditorStateWithText:function(m,n,o){var p=l._parseTemplateFieldTokens(m),q=p.ranges,r=p.text;return i({text:r,ranges:q,decorator:j(o,n),entityCreationFn:function(s){return h.create('TOKEN','IMMUTABLE',s);}});},prepareforSend:function(m,n){var o=m.match(/\{{(.*?)\}}/g);if(o)o.forEach(function(p){var q=p.replace('{{','').replace('}}',''),r=q in n?n[q].value:q;m=m.replace(p,r);});return m;}};f.exports=l;},null);
__d("XPagesSavedResponsesAddController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/add\/",{owner_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},user_message:{type:"String"}});},null);
__d("XPagesSavedResponsesDeleteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/delete\/",{response_id:{type:"Int",required:true}});},null);
__d("XPagesSavedResponsesEditController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/edit\/",{response_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},remove_photo_id:{type:"Int"}});},null);
__d('SavedResponsesEditResponseView.react',['ActorURI','AsyncRequest','DraftEntity','DraftModifier','DraftOffsetKey','EditorState','PagesEventObserver','PagesEventType','React','SavedResponsesEditResponseContentView.react','SavedResponsesFooterButton.react','SavedResponsesImageUploadHelper','SavedResponsesMacroBrowseView.react','SavedResponsesPanel.react','SavedResponsesTokensUtils','SelectionState','XPagesSavedResponsesAddController','XPagesSavedResponsesDeleteController','XPagesSavedResponsesEditController','XUISpinner.react','cx','fbt','invariant','getMacrosInputDecorator'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa,ga,ha=p.PropTypes;fa=babelHelpers.inherits(ia,p.Component);ga=fa&&fa.prototype;function ia(ja,ka){'use strict';ga.constructor.call(this,ja,ka);var la=!!this.props.initialResponse||false,ma=!!this.props.initialResponse&&!!this.props.initialResponse.image?this.props.initialResponse.image.id:'',na=this.$SavedResponsesEditResponseView1(la);this.state={anyContent:na.getCurrentContent().hasText(),editorState:na,imageID:ma,isEditing:la,isModified:false,isPersonalizing:false,isProcessing:false,isUploadingImage:false,message:na.getCurrentContent().getPlainText(),shouldShowDeleteWarning:false,shouldShowDiscardWarning:false,title:!!this.props.initialResponse?this.props.initialResponse.title:'',uploadHandler:new s((function(){return this.$SavedResponsesEditResponseView2();}).bind(this),(function(oa){return this.$SavedResponsesEditResponseView3(oa);}).bind(this))};}ia.prototype.render=function(){'use strict';return (p.createElement(u,{backButtonLabel:this.$SavedResponsesEditResponseView4(),className:"_15ht",onBackButtonClicked:(function(){return this.$SavedResponsesEditResponseView5();}).bind(this),onClose:this.props.onClose,shouldShowBackButton:true,title:this.$SavedResponsesEditResponseView6()},this.$SavedResponsesEditResponseView7(),p.createElement('div',{className:"_3ohz"},this.$SavedResponsesEditResponseView8())));};ia.prototype.$SavedResponsesEditResponseView9=function(){'use strict';return ca._("Cancel");};ia.prototype.$SavedResponsesEditResponseView10=function(){'use strict';return ca._("Delete");};ia.prototype.$SavedResponsesEditResponseView11=function(){'use strict';return ca._("Save reply");};ia.prototype.$SavedResponsesEditResponseView7=function(){'use strict';if(this.state.isPersonalizing){return (p.createElement(t,{className:"_1wxh",macros:this.props.supportedMacros,onCancel:(function(){return this.$SavedResponsesEditResponseView12();}).bind(this),onMacroSelected:(function(ja){return this.$SavedResponsesEditResponseView13(ja);}).bind(this)}));}else return (p.createElement(q,{className:"_1wxh",editorState:this.state.editorState,isUploadingImage:this.state.isUploadingImage,onContentChange:(function(ja){return this.$SavedResponsesEditResponseView14(ja);}).bind(this),onDeleteImage:(function(){return this.$SavedResponsesEditResponseView15();}).bind(this),onPersonalize:(function(){return this.$SavedResponsesEditResponseView16();}).bind(this),onTitleChange:(function(ja){this.setState({title:ja,isModified:true});}).bind(this),pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler}));};ia.prototype.$SavedResponsesEditResponseView8=function(){'use strict';if(this.state.isPersonalizing){return (p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.$SavedResponsesEditResponseView12();}).bind(this)}));}else return this.$SavedResponsesEditResponseView17();};ia.prototype.$SavedResponsesEditResponseView18=function(){'use strict';var ja=ca._("Continue Editing"),ka=ca._("Discard");return (p.createElement('div',null,p.createElement('div',{className:"_2ln1"},ca._("Are you sure you want to discard your edit?")),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:ka,onClick:(function(){return this.$SavedResponsesEditResponseView19();}).bind(this)}),p.createElement(r,{label:ja,onClick:(function(){return this.$SavedResponsesEditResponseView20();}).bind(this),use:'confirm'}))));};ia.prototype.$SavedResponsesEditResponseView21=function(){'use strict';return (p.createElement('div',null,p.createElement('div',{className:"_2ln1"},ca._("Are you sure you want to delete this saved reply?")),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:this.$SavedResponsesEditResponseView10(),onClick:(function(){return this.$SavedResponsesEditResponseView22();}).bind(this)}),p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.$SavedResponsesEditResponseView23();}).bind(this),use:'confirm'}))));};ia.prototype.$SavedResponsesEditResponseView24=function(){'use strict';return (p.createElement('div',null,p.createElement(r,{label:this.$SavedResponsesEditResponseView10(),onClick:(function(){return this.$SavedResponsesEditResponseView25();}).bind(this),isHidden:!this.state.isEditing}),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.props.onEditDone(false);}).bind(this)}),p.createElement(r,{disabled:!this.state.anyContent,label:this.$SavedResponsesEditResponseView11(),onClick:(function(){return this.$SavedResponsesEditResponseView26();}).bind(this),use:'confirm'}),p.createElement(aa,{size:'small',className:(!this.state.isProcessing?"hidden_elem":'')+(' '+"_3-91")+(' '+"_3-99")}))));};ia.prototype.$SavedResponsesEditResponseView17=function(){'use strict';if(this.state.shouldShowDeleteWarning){return this.$SavedResponsesEditResponseView21();}else if(this.state.shouldShowDiscardWarning){return this.$SavedResponsesEditResponseView18();}else return this.$SavedResponsesEditResponseView24();};ia.prototype.$SavedResponsesEditResponseView4=function(){'use strict';if(!this.state.isPersonalizing){return ca._("List");}else return ca._("Edit");};ia.prototype.$SavedResponsesEditResponseView6=function(){'use strict';if(this.state.isPersonalizing){return ca._("Add Personalization");}else if(this.state.isEditing){return ca._("Edit Reply");}else return ca._("Create Reply");};ia.prototype.$SavedResponsesEditResponseView27=function(ja){'use strict';var ka={text:'{{'+ja.name+'}}',key:ja.name},la=this.state.editorState,ma=la.getSelection(),na=la.getCurrentContent(),oa=ma.getStartKey(),pa=ma.getStartOffset(),qa=na.getBlockForKey(oa),ra;if(qa.getText().substr(pa-1,1).trim().length>0){var sa=k.replaceText(na,ma,' ');ma=sa.getSelectionAfter();ra=k.insertText(sa,ma,ka.text,la.getCurrentInlineStyle(),j.create('TOKEN','IMMUTABLE',ka));}else ra=k.replaceText(na,ma,ka.text,la.getCurrentInlineStyle(),j.create('TOKEN','IMMUTABLE',ka));ra=k.insertText(ra,ra.getSelectionAfter(),' ');la=m.push(la,ra,'insert-fragment');la=m.forceSelection(la,la.getSelection());this.$SavedResponsesEditResponseView14(la);};ia.prototype.$SavedResponsesEditResponseView28=function(){'use strict';var ja=this.state.editorState.getCurrentContent().getPlainText();n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_EDIT_REPLY,page_id:this.props.pageID,response_content:ja},null);var ka=this.props.initialResponse;!!!ka?da(0):undefined;var la=this.state.imageID?this.state.imageID.toString():'',ma=z.getURIBuilder().setInt('response_id',ka.id).setString('message',ja).setString('title',this.state.title);if(!la&&ka.image&&ka.image.id){ma.setInt('remove_photo_id',ka.image.id);}else ma.setInt('photo_id',la);ma=h.create(ma.getURI(),this.props.pageID);new i().setURI(ma).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView29=function(){'use strict';var ja=this.state.editorState.getCurrentContent().getPlainText();n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_CREATE_REPLY,page_id:this.props.pageID,response_content:ja},null);var ka=this.state.imageID?this.state.imageID.toString():'',la=x.getURIBuilder().setInt('owner_id',this.props.pageID).setString('message',ja).setString('title',this.state.title).setInt('photo_id',ka).getURI();la=h.create(la,this.props.pageID);new i().setURI(la).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView1=function(ja){'use strict';if(ja&&this.props.initialResponse){var ka=this.props.initialResponse.message||'';return v.createTemplateFieldsEditorStateWithText(ka,(function(la){return this.$SavedResponsesEditResponseView30(la);}).bind(this),this.props.supportedMacros);}else return m.createEmpty(ea(this.props.supportedMacros||{},(function(la){return this.$SavedResponsesEditResponseView30(la);}).bind(this)));};ia.prototype.$SavedResponsesEditResponseView15=function(){'use strict';this.setState({imageID:null});};ia.prototype.$SavedResponsesEditResponseView5=function(){'use strict';if(this.state.isPersonalizing){this.setState({isPersonalizing:false});}else if(this.state.isModified){this.setState({shouldShowDiscardWarning:true});}else this.props.onBackButtonClicked();};ia.prototype.$SavedResponsesEditResponseView12=function(){'use strict';this.setState({isPersonalizing:false});};ia.prototype.$SavedResponsesEditResponseView13=function(ja){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_PERSONALIZE,page_id:this.props.pageID},null);this.setState({isPersonalizing:false});this.$SavedResponsesEditResponseView27(ja);};ia.prototype.$SavedResponsesEditResponseView16=function(){'use strict';this.setState({isPersonalizing:true});this.props.onEnterPersonalizeView();};ia.prototype.$SavedResponsesEditResponseView14=function(ja){'use strict';this.setState({anyContent:ja.getCurrentContent().hasText(),editorState:ja,isModified:true});};ia.prototype.$SavedResponsesEditResponseView2=function(){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_ADD_IMAGE,page_id:this.props.pageID},null);this.setState({imageID:null,isUploadingImage:true});};ia.prototype.$SavedResponsesEditResponseView3=function(ja){'use strict';this.setState({imageID:ja,isUploadingImage:false});};ia.prototype.$SavedResponsesEditResponseView30=function(ja){'use strict';var ka=this.state.editorState,la=l.decode(ja),ma=la.blockKey,na=la.decoratorKey,oa=ka.getBlockTree(ma).getIn([na]),pa=new w({anchorKey:ma,anchorOffset:oa.get('start'),focusKey:ma,focusOffset:oa.get('end'),isBackward:false,hasFocus:true}),qa=k.removeRange(ka.getCurrentContent(),pa,'forward'),ra=m.push(ka,qa,'remove-range');this.$SavedResponsesEditResponseView14(ra);};ia.prototype.$SavedResponsesEditResponseView25=function(){'use strict';this.setState({shouldShowDeleteWarning:true});};ia.prototype.$SavedResponsesEditResponseView26=function(){'use strict';this.setState({isProcessing:true});this.state.isEditing?this.$SavedResponsesEditResponseView28():this.$SavedResponsesEditResponseView29();};ia.prototype.$SavedResponsesEditResponseView23=function(){'use strict';this.setState({shouldShowDeleteWarning:false});};ia.prototype.$SavedResponsesEditResponseView22=function(){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_DELETE_REPLY,page_id:this.props.pageID},null);this.setState({shouldShowDeleteWarning:false,isProcessing:true});!!!this.props.initialResponse?da(0):undefined;var ja=y.getURIBuilder().setInt('response_id',this.props.initialResponse.id).getURI();new i().setURI(ja).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView19=function(){'use strict';this.props.onBackButtonClicked();};ia.prototype.$SavedResponsesEditResponseView20=function(){'use strict';this.setState({shouldShowDiscardWarning:false});};ia.propTypes={initialResponse:ha.shape({id:ha.string.isRequired,title:ha.string,message:ha.string,image:ha.object}),onBackButtonClicked:ha.func.isRequired,onClose:ha.func.isRequired,onEditDone:ha.func.isRequired,onEnterPersonalizeView:ha.func.isRequired,pageID:ha.string.isRequired,supportedMacros:ha.object};f.exports=ia;},null);
__d('SavedResponsesListItem.react',['ClientIDs','Link.react','React','ReactDOM','SavedResponsesImage.react','SavedResponsesConstants','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=j.PropTypes,q=j.createClass({displayName:'SavedResponsesListItem',propTypes:{onResponseHover:p.func,onResponseSelected:p.func.isRequired,onResponseUnhover:p.func,pageID:p.string.isRequired,response:p.shape({id:p.string.isRequired,title:p.string,message:p.string.isRequired,image:p.object}),tokens:p.object.isRequired},getInitialState:function(){return {shouldShowSeeMoreLink:false,shouldLimitHeight:true};},componentDidMount:function(){this._refreshSeeMoreLink();},componentDidUpdate:function(){this._refreshSeeMoreLink();},render:function(){var r=this.props.response.image&&true;return (j.createElement('div',{className:"_33w3"+(r?' '+"_33w4":''),'data-id':this.props.response.id,onClick:this._onResponseSelected,onMouseEnter:this._onResponseHover,onMouseLeave:this.props.onResponseUnhover},j.createElement('div',{className:"_33w5"+(r?' '+"_33w6":'')+(' '+"fwb")},this.props.response.title),j.createElement('div',{className:"_33w7"+(this.state.shouldLimitHeight?' '+"_4en5":'')+(!this.props.response.title&&this.props.response.image?' '+"_2pid":''),ref:'message'},this.props.response.image?j.createElement(l,{className:"_33w8",displayClassName:"_33w9",height:m.listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:false,width:m.listItemImageWidth}):null,this._processTokens(this.props.response.message)),j.createElement(i,{className:"_4en6"+(!this.state.shouldShowSeeMoreLink?' '+"hidden_elem":''),onClick:this._onShowMoreClicked},o._("See more"))));},_refreshSeeMoreLink:function(){if(this.state.shouldLimitHeight===false||this.state.shouldShowSeeMoreLink)return;var r=k.findDOMNode(this.refs.message);if(r.scrollHeight>r.clientHeight)this.setState({shouldShowSeeMoreLink:true});},_processTokens:function(r){var s=0,t=0,u=/\{{(.*?)\}}/g,v=u.exec(r),w=[];while(v!=null){t=v.index;w.push(j.createElement('span',{key:h.getNewClientID()},r.substring(s,t)));s=t+v[0].length;var x=v[1] in this.props.tokens?this.props.tokens[v[1]].value:v[1];w.push(j.createElement('span',{key:h.getNewClientID(),className:"_-8"},x));v=u.exec(r);}w.push(j.createElement('span',{key:h.getNewClientID()},r.substring(s,r.length)));return w;},_onResponseSelected:function(){this.props.onResponseSelected(this.props.response,this.props.tokens);},_onResponseHover:function(){this.props.onResponseHover&&this.props.onResponseHover(this.props.response,this.props.tokens);},_onShowMoreClicked:function(r){this.setState({shouldShowSeeMoreLink:false,shouldLimitHeight:false});r.stopPropagation();}});f.exports=q;},null);
__d('SavedResponsesListView.react',['React','SavedResponsesListItem.react','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){if(this.props.isLoadingResponses)return (h.createElement('div',{className:"_e19"},h.createElement(j,{size:'large'})));var p=this.props.searchQuery.trim().toLowerCase(),q=function(r){return (r.message.toLowerCase().indexOf(p)!==-1||(r.title||'').toLowerCase().indexOf(p)!==-1);};return (h.createElement('ul',{className:this.props.shouldAdjustRightMargin?"_e1a":''},this.props.responses.filter(q).map((function(r){return (h.createElement(i,{key:r.id,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,response:r,tokens:this.props.supportedMacros}));}).bind(this))));};o.propTypes={isLoadingResponses:n.bool.isRequired,onResponseHover:n.func,onResponseSelected:n.func.isRequired,onResponseUnhover:n.func,pageID:n.string.isRequired,responses:n.array.isRequired,searchQuery:n.string.isRequired,shouldAdjustRightMargin:n.bool};f.exports=o;},null);
__d('SavedResponsesListViewContainer.react',['React','XUICloseButton.react','XUITextInput.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=h.PropTypes;n=babelHelpers.inherits(q,h.Component);o=n&&n.prototype;function q(r,s){o.constructor.call(this,r,s);}q.prototype.render=function(){var r=m("_3ohy",this.props.className);return (h.createElement('div',{className:r},this.renderSearchField(),this.props.children,h.createElement('div',{className:"_3ohz"},this.props.footerPart)));};q.prototype.renderSearchField=function(){return (h.createElement('div',{className:"_1x3h"},h.createElement('span',{className:"_1x3i"}),h.createElement(j,{onChange:this.props.onSearchQueryChanged,ref:'inputField',placeholder:l._("Search replies"),value:this.props.searchQuery}),h.createElement(i,{size:'small',onClick:this.props.onSearchQueryCleared,className:this.props.searchQuery.length===0?"hidden_elem":''})));};q.propTypes={footerPart:p.object.isRequired,onSearchQueryChanged:p.func.isRequired,onSearchQueryCleared:p.func.isRequired,searchQuery:p.string.isRequired};f.exports=q;},null);
__d('SavedResponsesManageListView.react',['React','SavedResponsesFooterButton.react','SavedResponsesListView.react','SavedResponsesListViewContainer.react','SavedResponsesPanel.react','ScrollableArea.react','cx','ix','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.PropTypes;q=babelHelpers.inherits(t,h.Component);r=q&&q.prototype;function t(u,v){'use strict';r.constructor.call(this,u,v);this.state={searchQuery:""};}t.prototype.render=function(){'use strict';return (h.createElement(l,{className:"_15ht",shouldShowBackButton:false,onClose:this.props.onClose,title:p._("Saved Replies")},h.createElement(k,{footerPart:this.$SavedResponsesManageListView1(),onSearchQueryChanged:(function(u){return this.$SavedResponsesManageListView2(u);}).bind(this),onSearchQueryCleared:(function(){return this.$SavedResponsesManageListView3();}).bind(this),searchQuery:this.state.searchQuery},this.$SavedResponsesManageListView4())));};t.prototype.$SavedResponsesManageListView4=function(){'use strict';return (h.createElement('div',{className:"_4pno"},h.createElement(m,{fade:true,shadow:true},h.createElement(j,{isLoadingResponses:false,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros}),this.$SavedResponsesManageListView5())));};t.prototype.$SavedResponsesManageListView1=function(){'use strict';var u=p._("Create Reply"),v=p._("Done");return (h.createElement('div',{className:"_4pnp"},h.createElement(i,{label:u,onClick:this.props.onCreateNewReplyClicked,image:o('/images/mobile/glyph/compose_dark-grey_m.png')}),h.createElement(i,{label:v,onClick:this.props.onDoneClicked})));};t.prototype.$SavedResponsesManageListView5=function(){'use strict';return (h.createElement('div',{className:"_4pnq"},h.createElement('div',{className:"_50f8"+(' '+"_4pnr")},p._("End of saved replies"))));};t.prototype.$SavedResponsesManageListView2=function(u){'use strict';this.setState({searchQuery:u.target.value});};t.prototype.$SavedResponsesManageListView3=function(){'use strict';this.setState({searchQuery:""});};t.propTypes={onClose:s.func.isRequired,onCreateNewReplyClicked:s.func.isRequired,onDoneClicked:s.func.isRequired,onResponseSelected:s.func.isRequired,otherUserID:s.string.isRequired,pageID:s.string.isRequired,responses:s.array.isRequired,supportedMacros:s.object.isRequired};f.exports=t;},null);
__d('SavedResponsesManagePanel.react',['React','SavedResponsesConstants','SavedResponsesEditResponseView.react','SavedResponsesManageListView.react','SavedResponsesUtils','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=h.PropTypes;o=babelHelpers.inherits(r,h.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);this.state={isLoadingResponses:true,responseToEdit:null,responses:[],supportedMacros:null,viewType:this.props.initialViewType};}r.prototype.componentWillMount=function(){this.$SavedResponsesManagePanel1();};r.prototype.render=function(){if(this.state.isLoadingResponses)return (h.createElement('div',{className:"_15ht"},h.createElement('div',{className:"_15hu"},h.createElement(m,{size:'large'}))));switch(this.state.viewType){case i.editPanelViewMode.LIST:return (h.createElement(k,{onCreateNewReplyClicked:(function(){return this.$SavedResponsesManagePanel2();}).bind(this),onDoneClicked:(function(){return this.$SavedResponsesManagePanel3();}).bind(this),otherUserID:this.props.otherUserID,onResponseSelected:(function(s,t){return (this.$SavedResponsesManagePanel4(s,t));}).bind(this),onClose:this.props.onClose,pageID:this.props.pageID,responses:this.state.responses,supportedMacros:this.state.supportedMacros}));case i.editPanelViewMode.EDIT:case i.editPanelViewMode.CREATE:case i.editPanelViewMode.PERSONALIZE:return (h.createElement(j,{initialResponse:this.state.responseToEdit,onBackButtonClicked:(function(){return this.$SavedResponsesManagePanel5(false);}).bind(this),onClose:this.props.onClose,onEditDone:(function(s){return this.$SavedResponsesManagePanel5(s);}).bind(this),onEnterPersonalizeView:(function(){return this.$SavedResponsesManagePanel6();}).bind(this),pageID:this.props.pageID,supportedMacros:this.state.supportedMacros}));}};r.prototype.$SavedResponsesManagePanel1=function(){this.setState({isLoadingResponses:true});l.fetchSavedResponses(this.props.pageID,this.props.otherUserID,(function(s,t){return (this.setState({responses:s,supportedMacros:t,isLoadingResponses:false}));}).bind(this));};r.prototype.$SavedResponsesManagePanel5=function(s){if(this.props.initialViewType===i.editPanelViewMode.CREATE){this.props.onClose();return;}if(s)this.$SavedResponsesManagePanel1();this.setState({responseToEdit:null,viewType:i.editPanelViewMode.LIST});};r.prototype.$SavedResponsesManagePanel2=function(){this.setState({responseToEdit:null,viewType:i.editPanelViewMode.CREATE});};r.prototype.$SavedResponsesManagePanel3=function(){this.props.onClose();};r.prototype.$SavedResponsesManagePanel6=function(){this.setState({viewType:i.editPanelViewMode.PERSONALIZE});};r.prototype.$SavedResponsesManagePanel4=function(s){this.setState({responseToEdit:s,viewType:i.editPanelViewMode.EDIT});};r.propTypes={initialViewType:q.string,onClose:q.func.isRequired,otherUserID:q.string.isRequired,pageID:q.string.isRequired};r.defaultProps={initialViewType:i.editPanelViewMode.LIST};f.exports=r;},null);
__d('PagesManagerCountDownTimer.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l,m=1000;k=babelHelpers.inherits(n,h.Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);this.state={timeRemaining:this.$PagesManagerCountDownTimer1(this.props.expireTimestamp),isCountingDown:false};}n.prototype.componentDidMount=function(){'use strict';if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};n.prototype.componentWillReceiveProps=function(o){'use strict';this.setState({timeRemaining:this.$PagesManagerCountDownTimer1(o.expireTimestamp)});if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};n.prototype.render=function(){'use strict';return (h.createElement('div',{className:"_3uo9"+(this.props.isHidden?' '+"hidden_elem":'')},this.$PagesManagerCountDownTimer3()));};n.prototype.$PagesManagerCountDownTimer3=function(){'use strict';var o=Math.floor(this.state.timeRemaining/1000/60),p=this.$PagesManagerCountDownTimer4(Math.floor(o/60)),q=this.$PagesManagerCountDownTimer4(o%60);if(this.props.isNewInbox)return j._("Returning in {hours}:{minutes}",[j.param('hours',p),j.param('minutes',q)]);return j._("{hours}:{minutes} left",[j.param('hours',p),j.param('minutes',q)]);};n.prototype.$PagesManagerCountDownTimer1=function(o){'use strict';return o?o-Date.now():0;};n.prototype.$PagesManagerCountDownTimer2=function(){'use strict';this.setState({isCountingDown:true});var o=(function(){var p=this.$PagesManagerCountDownTimer1(this.props.expireTimestamp);if(p>0){this.setState({timeRemaining:p});this.$PagesManagerCountDownTimer2();return;}this.setState({isCountingDown:false});this.props.onTimeup();}).bind(this);setTimeout(o,m);};n.prototype.$PagesManagerCountDownTimer4=function(o){'use strict';return ("0"+o).slice(-2);};n.defaultProps={isNewInbox:false};f.exports=n;},null);
__d('PagesManagerPerfLogger',['PagesManagerPerfTypedLogger','Set'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=1000;function k(){this.$PagesManagerPerfLogger1=new i();}k.prototype.log=function(l,m){var n=m.perfID+':'+l;if(this.$PagesManagerPerfLogger1.has(n))return;this.$PagesManagerPerfLogger1.add(n);var o=Date.now()/j-m.baseTime;new h().setPageID(m.pageID).setEventName(l).setEventSeriesID(m.perfID).setPerfTime(Math.round(o)).logVital();};f.exports=new k();},null);
__d('PagesManagerActionType',['ImmutableObject','keyMirrorRecursive'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=new h(i({LIST:{FETCH:'',FETCHED:'',UPDATED:'',LOAD_MORE:'',LOADING:'',PREVENT_SCROLL:'',SELECT:'',DESELECT_ALL:'',VIEW:'',INITIAL_VIEW:'',CLEAR_INITIAL_VIEW:''},NAVIGATION_UNIT:{CHANGE:'',NOTIFICATION_COUNT_CHANGE:''},LAYOUT:{HEIGHT_CHANGE:''},SEARCH:{TOGGLE_SEARCH:'',CHANGE_SEARCH_TERM:'',IS_SEARCHING_CHANGED:''}}));f.exports=j;},null);
__d('PagesManagerDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerStore',['PagesManagerActionType','FluxStore','Map','PagesManagerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,k);this.$PagesManagerStore1=null;this.$PagesManagerStore2=0;this.$PagesManagerStore3=0;this.$PagesManagerStore4=[];this.$PagesManagerStore5=new j();}n.prototype.__onDispatch=function(o){'use strict';switch(o.type){case h.LIST.VIEW:this.$PagesManagerStore1=o.listItem;this.__emitChange();break;case h.LIST.SELECT:this.$PagesManagerStore6(o);this.__emitChange();break;case h.LAYOUT.HEIGHT_CHANGE:this.$PagesManagerStore2=o.heights.navigationHeight;this.$PagesManagerStore3=o.heights.layoutHeight;this.__emitChange();break;case h.LIST.DESELECT_ALL:this.$PagesManagerStore6({rowsAdded:[],rowsRemoved:this.$PagesManagerStore4,selectedRows:[]});this.__emitChange();break;case h.LIST.INITIAL_VIEW:this.$PagesManagerStore7(o.item);break;case h.LIST.CLEAR_INITIAL_VIEW:this.$PagesManagerStore8=null;break;default:return;}};n.prototype.$PagesManagerStore7=function(o){'use strict';this.$PagesManagerStore8=o;this.$PagesManagerStore1=o;};n.prototype.$PagesManagerStore6=function(o){'use strict';this.$PagesManagerStore4=o.selectedRows;o.rowsAdded.forEach((function(p){this.$PagesManagerStore5.set(p,true);}).bind(this));o.rowsRemoved.forEach((function(p){this.$PagesManagerStore5.set(p,false);}).bind(this));};n.prototype.getViewingListItem=function(){'use strict';return this.$PagesManagerStore1;};n.prototype.getInitialViewingItem=function(){'use strict';return this.$PagesManagerStore8;};n.prototype.getLayoutHeight=function(){'use strict';return this.$PagesManagerStore3;};n.prototype.getNavigationHeight=function(){'use strict';return this.$PagesManagerStore2;};n.prototype.getIsRowSelected=function(o){'use strict';return this.$PagesManagerStore5.has(o)?this.$PagesManagerStore5.get(o):false;};n.prototype.getSelectedRows=function(){'use strict';return this.$PagesManagerStore4;};f.exports=new n(k);},null);
__d('PagesManagerListBatchActionContainer.react',['FluxContainer','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j.Component);l=k&&k.prototype;m.getStores=function(){'use strict';return [i];};m.calculateState=function(n){'use strict';var o=i.getSelectedRows(),p=o.length>0;return {showBatchAction:p,selectedRows:o};};m.prototype.render=function(){'use strict';var n=this.props,o=n.ChildClass,p=babelHelpers.objectWithoutProperties(n,['ChildClass']);return (j.createElement(o,babelHelpers._extends({},p,{selectedRows:this.state.selectedRows,showBatchAction:this.state.showBatchAction})));};function m(){'use strict';k.apply(this,arguments);}f.exports=h.create(m);},null);
__d('PagesManagerAction',['PagesManagerActionType','PagesManagerDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={viewListItem:function(k){i.dispatch({type:h.LIST.VIEW,listItem:k});},setInitialViewItem:function(k){i.dispatch({type:h.LIST.INITIAL_VIEW,item:k});},clearInitialViewItem:function(){i.dispatch({type:h.LIST.CLEAR_INITIAL_VIEW});},setHeight:function(k){i.dispatch({type:h.LAYOUT.HEIGHT_CHANGE,heights:k});},handleSelectionChange:function(k,l,m){i.dispatch({type:h.LIST.SELECT,rowsAdded:k,rowsRemoved:l,selectedRows:m});},deselectAll:function(){i.dispatch({type:h.LIST.DESELECT_ALL});}};f.exports=j;},null);
__d('PagesManagerResizeListener',['EventEmitter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerListDetailLayout.react',['PagesManagerAction','PagesManagerResizeListener','React','ReactDOM','ResizeListener','SubscriptionsHandler','Vector','XUICard.react','Grid.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=p.GridItem,v=200;s=babelHelpers.inherits(w,j.Component);t=s&&s.prototype;w.getTopOffsetRelativeToView=function(x){'use strict';var y=0;do{if(!isNaN(x.offsetTop))y+=x.offsetTop;}while(x=x.offsetParent);return y;};function w(x,y){'use strict';t.constructor.call(this,x,y);this.state={top:0,height:v};}w.prototype.recalculateHeight=function(){'use strict';var x=Math.max(v,n.getViewportDimensions().y-w.getTopOffsetRelativeToView(k.findDOMNode(this))-2-30);this.setState({height:x});var y=n.getElementDimensions(k.findDOMNode(this.refs.navigationSection)).y;h.setHeight({layoutHeight:x,navigationHeight:y});this.setState({top:y+8});};w.prototype.componentDidMount=function(){'use strict';this.recalculateHeight();this.$PagesManagerListDetailLayout1=new m();this.$PagesManagerListDetailLayout1.addSubscriptions(l.add((function(){return this.recalculateHeight();}).bind(this)),i.addListener('change',(function(){return this.recalculateHeight();}).bind(this)));};w.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerListDetailLayout1&&this.$PagesManagerListDetailLayout1.release();};w.prototype.render=function(){'use strict';var x=this.state.height+'px',y=this.state.top+'px',z=this.props.navigationSection===null?null:j.createElement('div',{className:"_2-97",ref:'navigationSection'},this.props.navigationSection);return (j.createElement(o,{style:{height:x}},z,j.createElement('div',{className:"_10ua",style:{top:y}},j.createElement(p,{alignv:'top',className:"_10ue",cols:2},j.createElement(u,{className:r("_10uf",this.props.listClassName)},this.props.listSection),j.createElement(u,{className:"_10ug"},this.props.detailSection)))));};f.exports=w;},null);
__d('PagesManagerListRowContainer.react',['FluxContainer','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j.Component);l=k&&k.prototype;m.getStores=function(){'use strict';return [i];};m.calculateState=function(n,o){'use strict';var p=false,q=false;if(o&&o.listItem){p=i.getIsRowSelected(o.listItem);q=i.getViewingListItem()===o.listItem;}return {selected:p,isViewing:q};};m.prototype.render=function(){'use strict';var n=this.props,o=n.ChildClass,p=babelHelpers.objectWithoutProperties(n,['ChildClass']);return (j.createElement(o,babelHelpers._extends({ref:'childClass',selected:this.state.selected,isViewing:this.state.isViewing},p)));};function m(){'use strict';k.apply(this,arguments);}f.exports=h.create(m,{withProps:true});},null);
__d('PagesManagerListView.react',['PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;n.prototype.$PagesManagerListView1=function(o){'use strict';i.viewListItem(o);};n.prototype.componentWillUpdate=function(o){'use strict';if(o.navigationKey!==this.props.navigationKey){i.deselectAll();this.refs.selectableList.clearSelection();}};function n(o){'use strict';m.constructor.call(this,o);this.state={scrollableHeight:0};}n.prototype.render=function(){'use strict';var o;if(!this.props.list.length){if(!this.props.initLoading){o=this.props.emptyView;}else o=this.$PagesManagerListView2();}else o=this.$PagesManagerListView3();return (k.createElement(j,{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',enableOnVisible:this.props.hasMoreItem,forceRequestMoreRows:true,height:this.props.height,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.props.onScroll,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false},o));};n.prototype.$PagesManagerListView3=function(){'use strict';return this.props.list.map((function(o){return (k.createElement(h,{ChildClass:this.props.listRowContainer,listItem:o,pageID:this.props.pageID,ref:this.props.getKey(o),key:this.props.getKey(o),onViewingListItem:this.$PagesManagerListView1,type:'li'}));}).bind(this));};n.prototype.clearSelection=function(){'use strict';this.refs.selectableList.clearSelection();};n.prototype.$PagesManagerListView2=function(){'use strict';return k.createElement('div',{key:'loading'});};f.exports=n;},null);
__d('PagesManagerStaticStore',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_pageID:'',setPageID:function(i){this._pageID=i;},getPageID:function(){return this._pageID;}};f.exports=h;},null);
__d('PagesManagerDetailContainer.react',['FluxContainer','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j.Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);this.state={height:0,viewingListItem:null};}m.getStores=function(){'use strict';return [i];};m.calculateState=function(n){'use strict';var o=i.getLayoutHeight()-i.getNavigationHeight();return {height:o,viewingListItem:i.getViewingListItem()};};m.prototype.render=function(){'use strict';var n=this.props,o=n.ChildContainerClass,p=babelHelpers.objectWithoutProperties(n,['ChildContainerClass']);return (j.createElement(o,babelHelpers._extends({height:this.state.height,viewingListItem:this.state.viewingListItem,listItemKey:this.props.getListItemKey(this.state.viewingListItem)},p)));};f.exports=h.create(m);},null);
__d('PagesManagerListContainer.react',['FluxContainer','PagesManagerAction','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);this.state={height:0};}n.getStores=function(){'use strict';return [j];};n.calculateState=function(o){'use strict';var p=j.getLayoutHeight()-j.getNavigationHeight();return {height:p};};n.prototype.render=function(){'use strict';var o=this.props,p=o.ChildContainerClass,q=babelHelpers.objectWithoutProperties(o,['ChildContainerClass']);return (k.createElement(p,babelHelpers._extends({height:this.state.height,onSelectionChange:this.$PagesManagerListContainer1},q)));};n.prototype.$PagesManagerListContainer1=function(o){'use strict';var p=o.rowsAdded,q=o.rowsRemoved,r=o.selectedRows;i.handleSelectionChange(p,q,r);};f.exports=h.create(n);},null);
__d('AbstractPagesManagerListStore',['PagesManagerActionType','FluxStore','Map','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);this.__hasMoreItem=new j();this.__isLoading=false;}n.prototype.__onDispatch=function(o){'use strict';switch(o.type){case h.LIST.FETCH:this.__handleListFetch(o);break;case h.LIST.FETCHED:case h.LIST.UPDATED:this.__emitChange();break;case h.LIST.LOADING:this.__isLoading=true;this.__emitChange();break;case h.NAVIGATION_UNIT.CHANGE:this.__handleNavigationUnitChange(o);break;default:return;}};n.prototype.__handleListFetch=function(o){'use strict';k(0);};n.prototype.__handleNavigationUnitChange=function(o){'use strict';k(0);};n.prototype.hasMoreItem=function(o){'use strict';return this.__hasMoreItem.get(o);};n.prototype.getItemList=function(o,p){'use strict';k(0);};n.prototype.isLoading=function(){'use strict';return this.__isLoading;};f.exports=n;},null);
__d('PagesManagerMessagingActionType',['PagesManagerActionType','keyMirrorRecursive'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i({THREAD_LEVEL:{READ_STATUS:'',ARCHIVE_STATUS:'',SPAM_STATUS:'',UPDATE_THREAD:''},MESSAGE_LEVEL:{READ_RECEIPTS:''},SET_SCROLL_HEIGHT:null,AWAY_STATE:{UPDATE:null,FETCH:null,SET:null},SET_IS_CONTEXT_CARD_HIDDEN:null,MESSAGE_SEARCH:{NAME_SEARCH_CHANGE:null,SNIPPET_SEARCH_CHANGE:null,LOAD_MORE_NAME_RESULT:null,LOAD_MORE_SNIPPET_RESULT:null}});Object.assign(j,h);f.exports=j;},null);
__d('PagesManagerMessagingAwayStatusDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerAwayToggleAction',['PagesManagerMessagingActionType','PagesManagerMessagingAwayStatusDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={fetchStatus:function(k){i.dispatch({pageID:k,type:h.AWAY_STATE.FETCH});},setToggleStatus:function(k,l){i.dispatch({pageID:k,toggle:l,type:h.AWAY_STATE.SET});}};f.exports=j;},null);
__d('PagesManagerAwayBanner.react',['PagesManagerAwayToggleAction','Image.react','LeftRight.react','Link.react','PagesManagerResizeListener','PagesManagerCountDownTimer.react','React','XUIText.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u='/help/800788243369168';s=babelHelpers.inherits(v,n.Component);t=s&&s.prototype;v.prototype.$PagesManagerAwayBanner1=function(){'use strict';h.setToggleStatus(this.props.pageID,false);};v.prototype.componentDidUpdate=function(w){'use strict';if(w.isAway!==this.props.isAway)l.emit('change');};v.prototype.renderLeftChild=function(){'use strict';var w=this.props.expirationTimestamp*1000;return (n.createElement('div',null,n.createElement(i,{className:"_2fei",src:r('images/pages/pages_manager/messages/clock.png')}),n.createElement(o,{className:"_2fek",size:'small',display:'inline'},q._("Currently Away"),n.createElement('div',{className:"_2fel"},n.createElement(m,{expireTimestamp:w,isHidden:!this.props.isAway,isNewInbox:true,onTimeup:(function(){return this.$PagesManagerAwayBanner1();}).bind(this)})))));};v.prototype.renderRightChild=function(){'use strict';return (n.createElement('div',null,n.createElement(k,{className:"_2fem",href:u,target:'_blank'},q._("Learn More")),n.createElement(o,{className:"_2fen",onClick:(function(){h.setToggleStatus(this.props.pageID,false);}).bind(this)},q._("Turn Off"))));};v.prototype.render=function(){'use strict';if(!this.props.isInitialized)return n.createElement('div',null);return (n.createElement(j,{className:"_2feo"+(!this.props.isAway?' '+"hidden_elem":'')},this.renderLeftChild(),this.renderRightChild()));};function v(){'use strict';s.apply(this,arguments);}f.exports=v;},null);
__d("XPagesAwayToggleController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/",{});},null);
__d("XPagesAwayToggleStatusController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/status\/",{});},null);
__d('PagesManagerMessagingAwayStatusStore',['ActorURI','AsyncRequest','PagesManagerMessagingActionType','FluxStore','PagesManagerMessagingAwayStatusDispatcher','XPagesAwayToggleController','XPagesAwayToggleStatusController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';o=babelHelpers.inherits(q,k);p=o&&o.prototype;function q(r){p.constructor.call(this,r);this.$PagesManagerMessagingAwayStatusStore1=false;this.$PagesManagerMessagingAwayStatusStore2=false;this.$PagesManagerMessagingAwayStatusStore3=0;}q.prototype.$PagesManagerMessagingAwayStatusStore4=function(r){var s=n.getURIBuilder().getURI();s=h.create(s,r);new i().setURI(s).setHandler((function(t){this.$PagesManagerMessagingAwayStatusStore1=t.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=t.payload.expiration;this.$PagesManagerMessagingAwayStatusStore2=true;this.__dispatcher.dispatch({type:j.AWAY_STATE.UPDATE});}).bind(this)).send();};q.prototype.$PagesManagerMessagingAwayStatusStore5=function(r,s){var t=m.getURIBuilder().getURI();t=h.create(t,r);new i().setURI(t).setMethod('POST').setData({is_away:s}).setHandler((function(u){this.$PagesManagerMessagingAwayStatusStore1=u.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=u.payload.expiration;this.__dispatcher.dispatch({type:j.AWAY_STATE.UPDATE});}).bind(this)).send();};q.prototype.__onDispatch=function(r){switch(r.type){case j.AWAY_STATE.SET:this.$PagesManagerMessagingAwayStatusStore5(r.pageID,r.toggle);break;case j.AWAY_STATE.FETCH:this.$PagesManagerMessagingAwayStatusStore4(r.pageID);break;case j.AWAY_STATE.UPDATE:this.__emitChange();break;default:break;}};q.prototype.isAway=function(){return this.$PagesManagerMessagingAwayStatusStore1;};q.prototype.isInitialized=function(){return this.$PagesManagerMessagingAwayStatusStore2;};q.prototype.getExpirationTimestamp=function(){return this.$PagesManagerMessagingAwayStatusStore3;};f.exports=new q(l);},null);
__d('PagesManagerAwayContainer.react',['PagesManagerMessagingAwayStatusStore','PagesManagerAwayToggleAction','FluxContainer','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;n.getStores=function(){'use strict';return [h];};n.calculateState=function(o,p){'use strict';return {isAway:h.isAway(),isInitialized:h.isInitialized(),expirationTimestamp:h.getExpirationTimestamp()};};n.prototype.componentWillMount=function(){'use strict';i.fetchStatus(this.props.pageID);};n.prototype.render=function(){'use strict';var o=this.props,p=o.RenderClass,q=babelHelpers.objectWithoutProperties(o,['RenderClass']);return (k.createElement(p,babelHelpers._extends({},q,this.state)));};function n(){'use strict';l.apply(this,arguments);}f.exports=j.create(n,{withProps:true});},null);
__d('PagesManagerMessagingComposerActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({ATTACHMENT:{ALL_COMPLETE:'attachment/attach/complete/all',ATTACH_CACHED:'attachment/attach/cached',ATTACH_COMPLETE:'attachment/attach/complete',ATTACH_START:'attachment/attach/start',CANCEL:'attachment/cancel',DETACH:'attachment/detach',DETACH_ALL:'attachment/detach/all'},MESSAGE:{CLEAR:'message/clear',SET:'message/set'},PARTICIPANT:{SET:'participant/set'},SAVED_REPLIES:{LOADING:'saved-replies/loading',SET:'saved-replies/set'},SHARE_UPLOADER:{READY:'share-uploader/ready',CLEAR:'share-uploader/clear'},UPLOADER:{READY:'uploader/ready'}});f.exports=i;},null);
__d('PagesManagerMessagingComposerDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerMessagingComposerActions',['PagesManagerMessagingComposerActionTypes','PagesManagerMessagingComposerDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={clearMessage:function(){i.dispatch({actionType:h.MESSAGE.CLEAR});},clearShareLinkUploader:function(){i.dispatch({actionType:h.SHARE_UPLOADER.CLEAR});},completeAllAttachments:function(){i.dispatch({actionType:h.ATTACHMENT.ALL_COMPLETE});},completeAttachment:function(k){i.dispatch({actionType:h.ATTACHMENT.ATTACH_COMPLETE,attachment:k});},detachAllAttachments:function(){i.dispatch({actionType:h.ATTACHMENT.DETACH_ALL});},detachAttachment:function(k){i.dispatch({actionType:h.ATTACHMENT.DETACH,uploadID:k});},fileUploaderReady:function(k){i.dispatch({actionType:h.UPLOADER.READY,uploader:k});},setIsSavedRepliesLoading:function(k){i.dispatch({actionType:h.SAVED_REPLIES.LOADING,isLoading:k});},setMessage:function(k){i.dispatch({actionType:h.MESSAGE.SET,message:k});},setParticipant:function(k){i.dispatch({actionType:h.PARTICIPANT.SET,participant:k});},setSavedReplies:function(k,l){i.dispatch({actionType:h.SAVED_REPLIES.SET,replies:k,tokens:l});},setShareLinkUploader:function(k){i.dispatch({actionType:h.SHARE_UPLOADER.READY,uploader:k});},startAttachment:function(k){i.dispatch({actionType:h.ATTACHMENT.ATTACH_START,files:k});}};f.exports=j;},null);
__d('PagesManagerMessagingComposerStore',['PagesManagerMessagingComposerActionTypes','FluxStore','Map','MercuryConfig','PagesManagerMessagingComposerDispatcher','PagesMessagingConfig','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';o=babelHelpers.inherits(q,i);p=o&&o.prototype;function q(r){p.constructor.call(this,r);this.$PagesManagerMessagingComposerStore1=new j();this.$PagesManagerMessagingComposerStore2=null;this.$PagesManagerMessagingComposerStore3=false;this.$PagesManagerMessagingComposerStore4='';this.$PagesManagerMessagingComposerStore5=null;this.$PagesManagerMessagingComposerStore6={replies:[],tokens:{}};this.$PagesManagerMessagingComposerStore7=null;}q.prototype.getAllAttachmentsMeta=function(){var r=this.$PagesManagerMessagingComposerStore8(),s=[];for(var t=this.$PagesManagerMessagingComposerStore1.values(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++];}else{v=t.next();if(v.done)break;w=v.value;}var x=w;if(x.id&&r.indexOf(x.id)!==-1||x.isUploading)s.push(x);}return s;};q.prototype.getAttachedAttachmentIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAttachments();return [];};q.prototype.getAttachedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getImageFiles();return [];};q.prototype.getAttachedAnimatedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAnimatedImageFiles();return [];};q.prototype.getAttachedVideoIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getVideoFiles();return [];};q.prototype.getAttachedAudioFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAudioFiles();return [];};q.prototype.getAttachedFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getFiles();return [];};q.prototype.getFileUploader=function(){return this.$PagesManagerMessagingComposerStore2;};q.prototype.getIsAttachmentUploading=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.isUploading();return false;};q.prototype.getIsSavedRepliesLoading=function(){return this.$PagesManagerMessagingComposerStore3;};q.prototype.getMessage=function(){return this.$PagesManagerMessagingComposerStore4;};q.prototype.getQuickReplyMode=function(){return m.sendOnEnter;};q.prototype.getParticipant=function(){return this.$PagesManagerMessagingComposerStore5;};q.prototype.getSavedReplies=function(){return this.$PagesManagerMessagingComposerStore6;};q.prototype.getShareLink=function(){if(this.$PagesManagerMessagingComposerStore7)return this.$PagesManagerMessagingComposerStore7.getAttachData();};q.prototype.getUploadActionFromUserID=function(r){if(!r)return null;return new n(k.upload_url).addQueryData('request_user_id',r).toString();};q.prototype.$PagesManagerMessagingComposerStore9=function(r,s){this.$PagesManagerMessagingComposerStore1.set(s.upload_id,{id:'',isUploading:true,name:s.metadata.filename,type:s.metadata.filetype,uploadID:s.upload_id});};q.prototype.$PagesManagerMessagingComposerStore10=function(r){r.map((function(s){this.$PagesManagerMessagingComposerStore1.set(s.upload_id,{id:'',isUploading:true,name:s.metadata.name,type:s.metadata.type,uploadID:s.upload_id});}).bind(this));};q.prototype.$PagesManagerMessagingComposerStore11=function(){this.$PagesManagerMessagingComposerStore4='';};q.prototype.$PagesManagerMessagingComposerStore12=function(r){if(this.$PagesManagerMessagingComposerStore1.has(r))this.$PagesManagerMessagingComposerStore1['delete'](r);};q.prototype.$PagesManagerMessagingComposerStore13=function(){if(this.$PagesManagerMessagingComposerStore7)this.$PagesManagerMessagingComposerStore7.clear();};q.prototype.$PagesManagerMessagingComposerStore14=function(r){var s;if(this.$PagesManagerMessagingComposerStore1.has(r.upload_id)){s=this.$PagesManagerMessagingComposerStore1.get(r.upload_id);s.id=this.$PagesManagerMessagingComposerStore15(r);s.isUploading=false;this.$PagesManagerMessagingComposerStore1.set(r.upload_id,s);}};q.prototype.$PagesManagerMessagingComposerStore8=function(){if(!this.$PagesManagerMessagingComposerStore2)return [];var r=this.$PagesManagerMessagingComposerStore2;return [].concat(r.getAttachments(),r.getImageFiles(),r.getAnimatedImageFiles(),r.getVideoFiles(),r.getAudioFiles(),r.getFiles());};q.prototype.$PagesManagerMessagingComposerStore15=function(r){return r.metadata.image_id||r.metadata.gif_id||r.metadata.video_id||r.metadata.audio_id||r.metadata.file_id;};q.prototype.__onDispatch=function(r){switch(r.actionType){case h.ATTACHMENT.ALL_COMPLETE:this.$PagesManagerMessagingComposerStore16();this.__emitChange();break;case h.ATTACHMENT.ATTACH_COMPLETE:this.$PagesManagerMessagingComposerStore14(r.attachment);this.__emitChange();break;case h.ATTACHMENT.ATTACH_START:this.$PagesManagerMessagingComposerStore10(r.files);this.__emitChange();break;case h.ATTACHMENT.DETACH:this.$PagesManagerMessagingComposerStore17(r.uploadID);this.__emitChange();break;case h.ATTACHMENT.DETACH_ALL:this.$PagesManagerMessagingComposerStore18();this.__emitChange();break;case h.MESSAGE.CLEAR:this.$PagesManagerMessagingComposerStore11();break;case h.MESSAGE.SET:this.$PagesManagerMessagingComposerStore19(r.message);this.__emitChange();break;case h.PARTICIPANT.SET:this.$PagesManagerMessagingComposerStore20(r.participant);this.__emitChange();break;case h.SAVED_REPLIES.LOADING:this.$PagesManagerMessagingComposerStore21(r.isLoading);this.__emitChange();break;case h.SAVED_REPLIES.SET:this.$PagesManagerMessagingComposerStore22(r.replies,r.tokens);this.__emitChange();break;case h.SHARE_UPLOADER.READY:this.$PagesManagerMessagingComposerStore23(r.uploader);break;case h.SHARE_UPLOADER.CLEAR:this.$PagesManagerMessagingComposerStore13();break;case h.UPLOADER.READY:this.$PagesManagerMessagingComposerStore24(r.uploader);this.$PagesManagerMessagingComposerStore25();break;}};q.prototype.$PagesManagerMessagingComposerStore18=function(){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeAttachments();this.$PagesManagerMessagingComposerStore1.clear();}};q.prototype.$PagesManagerMessagingComposerStore17=function(r){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeOneAttachment(r);this.$PagesManagerMessagingComposerStore12(r);}};q.prototype.$PagesManagerMessagingComposerStore16=function(){this.$PagesManagerMessagingComposerStore1.forEach((function(r,s){if(r.isUploading)this.$PagesManagerMessagingComposerStore1['delete'](r.uploadID);}).bind(this));};q.prototype.$PagesManagerMessagingComposerStore24=function(r){this.$PagesManagerMessagingComposerStore2=r;};q.prototype.$PagesManagerMessagingComposerStore21=function(r){this.$PagesManagerMessagingComposerStore3=r;};q.prototype.$PagesManagerMessagingComposerStore19=function(r){this.$PagesManagerMessagingComposerStore4=r;};q.prototype.$PagesManagerMessagingComposerStore20=function(r){this.$PagesManagerMessagingComposerStore5=r;};q.prototype.$PagesManagerMessagingComposerStore22=function(r,s){this.$PagesManagerMessagingComposerStore6={replies:r,tokens:s};};q.prototype.$PagesManagerMessagingComposerStore23=function(r){this.$PagesManagerMessagingComposerStore7=r;};q.prototype.$PagesManagerMessagingComposerStore25=function(){var r=this.$PagesManagerMessagingComposerStore2;if(r)r.subscribe('cached-file-added',this.$PagesManagerMessagingComposerStore9.bind(this));};f.exports=new q(l);},null);
__d('PagesManagerMessagingComposerAttachmentListItem.react',['Image.react','React','XUICloseButton.react','XUISpinner.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=i.PropTypes;n=babelHelpers.inherits(q,i.Component);o=n&&n.prototype;function q(r){o.constructor.call(this,r);this.$PagesManagerMessagingComposerAttachmentListItem1=(function(){return this.props.onDetach(this.props.uploadID);}).bind(this);}q.prototype.$PagesManagerMessagingComposerAttachmentListItem2=function(){if(this.props.type.startsWith('image')){return m('/images/pages/pages_manager/messages/photo-attachment.png');}else if(this.props.type.startsWith('video')){return m('/images/pages/pages_manager/messages/video-attachment.png');}else if(this.props.type.startsWith('audio')){return m('/images/pages/pages_manager/messages/audio-attachment.png');}else if(this.props.type.startsWith('text'))return m('/images/pages/pages_manager/messages/text-attachment.png');return m('/images/pages/pages_manager/messages/general-attachment.png');};q.prototype.$PagesManagerMessagingComposerAttachmentListItem3=function(){return (i.createElement(j,{className:"_2uia",onClick:this.$PagesManagerMessagingComposerAttachmentListItem1}));};q.prototype.$PagesManagerMessagingComposerAttachmentListItem4=function(){return (i.createElement('span',{className:"_2uib"},this.props.isUploading?i.createElement(k,{size:'large'}):i.createElement(h,{src:this.$PagesManagerMessagingComposerAttachmentListItem2(),alt:this.props.type})));};q.prototype.$PagesManagerMessagingComposerAttachmentListItem5=function(){return (i.createElement('span',{className:"_2uic"},this.props.name));};q.prototype.render=function(){return (i.createElement('li',{className:"clearfix _2uid"},i.createElement('span',{className:"_kqe _kqf"},this.$PagesManagerMessagingComposerAttachmentListItem4()),i.createElement('span',{className:"_kqe _kqh"},this.$PagesManagerMessagingComposerAttachmentListItem5()),i.createElement('span',{className:"_kqe _kqi"},this.$PagesManagerMessagingComposerAttachmentListItem3())));};q.propTypes={attachmentID:p.string,isUploading:p.bool,key:p.string,name:p.string,onDetach:p.func,type:p.string,uploadID:p.string};f.exports=q;},null);
__d('PagesManagerMessagingComposerAttachmentList.react',['PagesManagerMessagingComposerAttachmentListItem.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';var m=i.PropTypes;k=babelHelpers.inherits(n,i.Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);}n.prototype.$PagesManagerMessagingComposerAttachmentList1=function(o){return (i.createElement(h,{isUploading:o.isUploading,key:o.uploadID,name:o.name,onDetach:this.props.onDetach,type:o.type,uploadID:o.uploadID}));};n.prototype.render=function(){if(this.props.attachments.length>0)return (i.createElement('ul',{className:"_27ru"},this.props.attachments.map(this.$PagesManagerMessagingComposerAttachmentList1,this)));return null;};n.propTypes={attachments:m.array.isRequired,onDetach:m.func.isRequired};n.defaultProps={attachments:[]};f.exports=n;},null);
__d("XPagesSavedResponsesImageDuplicationController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/image\/duplication\/",{});},null);
__d('PagesManagerMessagingSavedRepliesListItem.react',['ActorURI','AsyncRequest','LeftRight.react','React','SavedResponsesImage.react','SavedResponsesTokensUtils','SavedResponsesUtils','XPagesSavedResponsesImageDuplicationController','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=k.PropTypes,u=53,v=53;r=babelHelpers.inherits(w,k.Component);s=r&&r.prototype;function w(x){s.constructor.call(this,x);this.state={isHovering:false};}w.prototype.$PagesManagerMessagingSavedRepliesListItem1=function(){if(this.props.reply.image){var x=this.props.reply.image.id;return (k.createElement(l,{className:"_3-9b _wba",displayClassName:"_wba",height:u,imageID:x,loadingClassName:"_wba",pageID:this.props.pageID,shouldShowCloseButton:false,width:v}));}};w.prototype.$PagesManagerMessagingSavedRepliesListItem2=function(){if(this.props.reply.title)return (k.createElement('h4',{className:"_wbb"},this.props.reply.title));};w.prototype.$PagesManagerMessagingSavedRepliesListItem3=function(){var x=m.prepareforSend(this.props.reply.message,this.props.tokens),y=null,z,aa;if(!this.props.reply.image){this.props.onClick(x,y);return;}y=this.props.reply.image.id;z=o.getURIBuilder().getURI();aa=h.create(z,this.props.pageID);new i().setURI(aa).setMethod('POST').setData({image_id:y}).setHandler((function(ba){var ca=n.generateImageMetadata(''+ba.payload.duplicatedImageID);this.props.onClick(x,ca);}).bind(this)).send();};w.prototype.$PagesManagerMessagingSavedRepliesListItem4=function(){var x=m.prepareforSend(this.props.reply.message,this.props.tokens);this.props.onMouseEnter(x);};w.prototype.$PagesManagerMessagingSavedRepliesListItem5=function(x){var y=0,z=0,aa=/\{{(.*?)\}}/g,ba=aa.exec(x),ca=0,da=[];while(ba!=null){z=ba.index;da.push(k.createElement('span',{key:'token:'+ca},x.substring(y,z)));y=z+ba[0].length;ca+=1;var ea=ba[1] in this.props.tokens?this.props.tokens[ba[1]].value:ba[1];da.push(k.createElement('span',{className:"_3p6b",key:'token:'+ca},ea));ba=aa.exec(x);ca+=1;}da.push(k.createElement('span',{key:'token:'+ca},x.substring(y,x.length)));ca+=1;return da;};w.prototype.render=function(){return (k.createElement('li',{className:q("_2ph_ _1_2c",this.props.className),onClick:(function(){return this.$PagesManagerMessagingSavedRepliesListItem3();}).bind(this),onMouseEnter:(function(){return this.$PagesManagerMessagingSavedRepliesListItem4();}).bind(this),onMouseLeave:(function(){return this.props.onMouseLeave();}).bind(this),ref:'replyItem'},k.createElement(j,{direction:'right'},k.createElement('div',null,this.$PagesManagerMessagingSavedRepliesListItem2(),this.$PagesManagerMessagingSavedRepliesListItem5(this.props.reply.message)),this.$PagesManagerMessagingSavedRepliesListItem1())));};w.propTypes={className:t.string,onClick:t.func.isRequired,onMouseEnter:t.func.isRequired,onMouseLeave:t.func.isRequired,pageID:t.string.isRequired,reply:t.object.isRequired,tokens:t.object.isRequired};f.exports=w;},null);
__d('PagesManagerMessagingSavedRepliesList.react',['Link.react','React','PagesManagerMessagingSavedRepliesListItem.react','ScrollableArea.react','XUISpinner.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=i.PropTypes;o=babelHelpers.inherits(r,i.Component);p=o&&o.prototype;r.prototype.$PagesManagerMessagingSavedRepliesList1=function(s){return (s.message.toLowerCase().indexOf(this.props.filter)!==-1||(s.title||'').toLowerCase().indexOf(this.props.filter)!==-1);};r.prototype.render=function(){return (i.createElement('div',{className:"_1_25"+(this.props.isLoading?' '+"_1_26":'')+(!this.props.isLoading&&this.props.replies.length===0?' '+"_1_27":'')},this.props.isLoading?this.$PagesManagerMessagingSavedRepliesList2():null,this.$PagesManagerMessagingSavedRepliesList3()));};r.prototype.$PagesManagerMessagingSavedRepliesList4=function(){return (i.createElement(h,{onClick:(function(){return this.props.onCreateNewReply();}).bind(this),className:"_1_2a"},n._("Create new reply")));};r.prototype.$PagesManagerMessagingSavedRepliesList5=function(){return (i.createElement('div',{className:"_2ph_ _1_28"},i.createElement('p',null,this.$PagesManagerMessagingSavedRepliesList6()),i.createElement('p',null,this.$PagesManagerMessagingSavedRepliesList4())));};r.prototype.$PagesManagerMessagingSavedRepliesList2=function(){return (i.createElement('div',null,i.createElement('div',{className:"_2ph_ _1_29"},i.createElement(l,{size:'large'}))));};r.prototype.$PagesManagerMessagingSavedRepliesList6=function(){return n._("End of saved replies");};r.prototype.$PagesManagerMessagingSavedRepliesList3=function(){return (i.createElement(k,{fade:true,shadow:false,height:300},i.createElement('ul',{className:"_1_2b"},this.props.replies.map(this.$PagesManagerMessagingSavedRepliesList7,this),i.createElement('li',{className:"_2ph_ _1_2c"},this.$PagesManagerMessagingSavedRepliesList5()))));};r.prototype.$PagesManagerMessagingSavedRepliesList7=function(s,t){return (i.createElement(j,{className:!this.$PagesManagerMessagingSavedRepliesList1(s)?"hidden_elem":'',key:t,onClick:this.props.onReplySelected,onMouseEnter:this.props.onReplyMouseEnter,onMouseLeave:this.props.onReplyMouseLeave,pageID:this.props.pageID,reply:s,tokens:this.props.tokens}));};function r(){o.apply(this,arguments);}r.defaultProps={filter:''};r.propTypes={filter:q.string,isLoading:q.bool.isRequired,onCreateNewReply:q.func.isRequired,onReplyMouseEnter:q.func.isRequired,onReplyMouseLeave:q.func.isRequired,onReplySelected:q.func.isRequired,pageID:q.string.isRequired,replies:q.array.isRequired,tokens:q.object.isRequired};f.exports=r;},null);
__d('PagesManagerMessagingSavedRepliesFlyout.react',['Image.react','LeftRight.react','Link.react','PagesManagerMessagingSavedRepliesList.react','React','XUICloseButton.react','XUITextInput.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=l.PropTypes;r=babelHelpers.inherits(u,l.Component);s=r&&r.prototype;function u(v){s.constructor.call(this,v);this.state={searchQuery:''};}u.prototype.$PagesManagerMessagingSavedRepliesFlyout1=function(v){var w=v.target.value;this.setState({searchQuery:w});};u.prototype.$PagesManagerMessagingSavedRepliesFlyout2=function(){this.setState({searchQuery:''});};u.prototype.render=function(){return (l.createElement('div',{className:"_201v"},this.$PagesManagerMessagingSavedRepliesFlyout3(),this.$PagesManagerMessagingSavedRepliesFlyout4(),this.$PagesManagerMessagingSavedRepliesFlyout5()));};u.prototype.$PagesManagerMessagingSavedRepliesFlyout3=function(){return (l.createElement('div',{className:"_2ph_ _201w"},l.createElement(i,null,l.createElement('h3',{className:"_201x"},p._("Saved Save Replies")),l.createElement(j,{className:'PagesManagerMessagingSavedRepliesFlyout/manageLink',onClick:this.props.onManageReplies},p._("Manage Replies")))));};u.prototype.$PagesManagerMessagingSavedRepliesFlyout5=function(){return (l.createElement(k,{filter:this.state.searchQuery,isLoading:this.props.isLoading,onCreateNewReply:this.props.onCreateNewReply,onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,tokens:this.props.tokens}));};u.prototype.$PagesManagerMessagingSavedRepliesFlyout4=function(){return (l.createElement('div',{className:"_2ph_ _201y"},l.createElement(h,{className:"_201z",src:q('/images/browse/search/search-gray.png')}),l.createElement(n,{className:"_201-",onChange:this.$PagesManagerMessagingSavedRepliesFlyout1.bind(this),ref:'inputField',placeholder:p._("Search Saved Replies"),value:this.state.searchQuery}),l.createElement(m,{size:'small',onClick:this.$PagesManagerMessagingSavedRepliesFlyout2.bind(this),className:this.state.searchQuery.length===0?"hidden_elem":''})));};u.propTypes={isLoading:t.bool.isRequired,onCreateNewReply:t.func.isRequired,onManageReplies:t.func.isRequired,onReplyMouseEnter:t.func.isRequired,onReplyMouseLeave:t.func.isRequired,onReplySelected:t.func.isRequired,pageID:t.string.isRequired,replies:t.array.isRequired,tokens:t.object.isRequired};f.exports=u;},null);
__d('PagesManagerMessagingSavedRepliesButton.react',['Image.react','Link.react','PagesEventObserver','PagesEventType','PagesManagerMessagingSavedRepliesFlyout.react','React','SavedResponsesConstants','SavedResponsesManagePanel.react','XUIContextualDialog.react','XUIDialog.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;'use strict';var w=m.PropTypes,x=600,y=405;u=babelHelpers.inherits(z,m.Component);v=u&&u.prototype;function z(aa){v.constructor.call(this,aa);this.state={initialSavedResponsesManageViewType:n.editPanelViewMode.LIST,isFlyoutShown:false,isManageDialogVisible:false};}z.prototype.$PagesManagerMessagingSavedRepliesButton1=function(){this.props.onFetchReplies();j.notify(k.SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:!this.state.isFlyoutShown});this.setState({isFlyoutShown:!this.state.isFlyoutShown});};z.prototype.$PagesManagerMessagingSavedRepliesButton2=function(){this.props.onFetchReplies();this.setState({isManageDialogVisible:false});};z.prototype.$PagesManagerMessagingSavedRepliesButton3=function(){setTimeout((function(){j.notify(k.SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:false});this.setState({isFlyoutShown:false});}).bind(this),0);};z.prototype.render=function(){var aa=s._("Choose a Saved Reply");return (m.createElement('div',null,m.createElement(i,{'aria-label':this.props.showTooltip?aa:null,className:"_3xmz",'data-hover':'tooltip','data-tooltip-align':'right',onClick:this.$PagesManagerMessagingSavedRepliesButton1.bind(this)},m.createElement(h,{alt:'',className:"_3xm-",ref:'icon',src:t('/images/pages/pages_manager/messages/composer-saved-replies.png'),tabIndex:0})),this.$PagesManagerMessagingSavedRepliesButton4(),this.$PagesManagerMessagingSavedRepliesButton5()));};z.prototype.$PagesManagerMessagingSavedRepliesButton4=function(){if(this.state.isFlyoutShown)return (m.createElement(p,{alignment:'right',className:"_3xm_",contextRef:(function(){return this.refs.icon;}).bind(this),hasActionableContext:true,hideOnEscape:false,onBlur:this.$PagesManagerMessagingSavedRepliesButton3.bind(this),position:'above',ref:'flyoutDialog',shown:this.state.isFlyoutShown,width:y},m.createElement(l,{isLoading:this.props.isSavedRepliesLoading,onCreateNewReply:(function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:n.editPanelViewMode.CREATE});}).bind(this),onManageReplies:(function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:n.editPanelViewMode.LIST});}).bind(this),onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,tokens:this.props.tokens})));};z.prototype.$PagesManagerMessagingSavedRepliesButton5=function(){if(this.state.isManageDialogVisible)return (m.createElement(q,{layerHideOnBlur:false,ref:'managementDialog',shown:this.state.isManageDialogVisible,width:x},m.createElement(o,{initialViewType:this.state.initialSavedResponsesManageViewType,onClose:this.$PagesManagerMessagingSavedRepliesButton2.bind(this),otherUserID:this.props.recipientID,pageID:this.props.pageID})));};z.propTypes={isSavedRepliesLoading:w.bool.isRequired,onFetchReplies:w.func.isRequired,onReplyMouseEnter:w.func.isRequired,onReplyMouseLeave:w.func.isRequired,onReplySelected:w.func.isRequired,pageID:w.string.isRequired,recipientID:w.string.isRequired,replies:w.array.isRequired,showTooltip:w.bool,tokens:w.object.isRequired};z.defaultProps={showTooltip:true};f.exports=z;},null);
__d('PagesManagerMessagingComposerView.react',['PagesManagerMessagingComposerAttachmentList.react','Image.react','MercuryDragDropPrompt.react','PagesManagerMessagingSavedRepliesButton.react','PagesMessageSuggestedResponseHandler','PagesMessengerFileUploader.react','PagesMessengerOmnipicker.react','PagesMessengerSuggestedResponseView.react','PagesMessengerTextInput.react','React','UFIStickerButton.react','XUIButton.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x;'use strict';var y=q.PropTypes,z=function(){};w=babelHelpers.inherits(aa,q.Component);x=w&&w.prototype;function aa(ba){x.constructor.call(this,ba);this.state={isAttachmentsButtonVisible:true,isSavedRepliesButtonVisible:true,isStickerButtonVisible:true,placeholder:''};}aa.prototype.componentDidUpdate=function(ba,ca){if(this.props.onInitialRender&&!ba.participant&&this.props.participant)this.props.onInitialRender();if(ba&&ba.message!==this.props.message)this.refs.textInput.updateHeight();};aa.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerView1(this.props);};aa.prototype.componentWillReceiveProps=function(ba){this.$PagesManagerMessagingComposerView1(ba,this.state);};aa.prototype.$PagesManagerMessagingComposerView1=function(ba){var ca=ba.attachments.length,da=ba.message.length;this.setState({isSavedRepliesButtonVisible:da<1&&ca<1,isStickerButtonVisible:da<1&&ca<1});};aa.prototype.$PagesManagerMessagingComposerView2=function(){return (this.props.canAttachFiles&&this.state.isAttachmentsButtonVisible);};aa.prototype.$PagesManagerMessagingComposerView3=function(){return (this.props.canUseSavedReplies&&this.state.isSavedRepliesButtonVisible);};aa.prototype.$PagesManagerMessagingComposerView4=function(){return (this.props.canUseStickers&&this.state.isStickerButtonVisible);};aa.prototype.$PagesManagerMessagingComposerView5=function(ba){this.props.onEmoticonSelected(ba,this.refs.textInput.getTextFieldDOM());};aa.prototype.$PagesManagerMessagingComposerView6=function(ba){ba.preventDefault();this.props.onSend();};aa.prototype.$PagesManagerMessagingComposerView7=function(){if(this.$PagesManagerMessagingComposerView2()){if(this.props.canUseOmnipicker)return (q.createElement('div',{className:"_4dvy"},q.createElement(n,{onPhotosSelected:this.props.onOmnipickerPhotosSelected,uploadURI:this.props.uploaderActionURI,pageID:this.props.userID})));return (q.createElement('div',{className:"_4dvy"},q.createElement(m,{actionURI:this.props.uploaderActionURI,iconSize:'large',onFileUploaderMounted:this.props.onFileUploaderMounted,onSubmit:this.props.onFileUploaderSubmit,onUpdateAttachmentsShelf:this.props.onFileUploadUpdateUI,onUploadFinished:this.props.onFileUploadFinished,ref:'fileUploader'})));}};aa.prototype.$PagesManagerMessagingComposerView8=function(){if(this.props.canAttachFiles)return (q.createElement(h,{attachments:this.props.attachments,attachmentsUploading:this.props.attachmentsUploading,onDetach:this.props.onAttachmentDetach,ref:'attachmentList'}));};aa.prototype.$PagesManagerMessagingComposerView9=function(){var ba=this.state.placeholder||u._("Write a reply...");return (q.createElement('div',{className:"_4dv-"},q.createElement(p,{className:"_1p7p _5id1 _4dv_",onNoShiftEnter:this.props.isQuickReplyMode?(function(ca){return this.$PagesManagerMessagingComposerView6(ca);}).bind(this):null,onFocus:this.props.onFocus,placeholder:ba,onChange:this.props.onInputChange,value:this.props.message,ref:'textInput'})));};aa.prototype.$PagesManagerMessagingComposerView10=function(){return (q.createElement('div',{className:"_6fk",ref:'linkPreview'}));};aa.prototype.$PagesManagerMessagingComposerView11=function(){return (q.createElement('div',{className:"_4dw0"},q.createElement(i,{className:"_1cjc",src:this.props.participant.image_src})));};aa.prototype.$PagesManagerMessagingComposerView12=function(){if(this.$PagesManagerMessagingComposerView3()&&this.props.recipientID)return (q.createElement('span',{className:"_4dw1"},q.createElement(k,{recipientID:this.props.recipientID,isSavedRepliesLoading:this.props.isSavedRepliesLoading,onFetchReplies:this.props.onFetchReplies,onReplyMouseEnter:this.$PagesManagerMessagingComposerView13.bind(this),onReplyMouseLeave:this.$PagesManagerMessagingComposerView14.bind(this),onReplySelected:this.$PagesManagerMessagingComposerView15.bind(this),pageID:this.props.userID,replies:this.props.savedReplies.replies,showTooltip:true,tokens:this.props.savedReplies.tokens})));};aa.prototype.$PagesManagerMessagingComposerView16=function(){var ba=u._("Send");return (q.createElement('div',{className:"_4dw3"},q.createElement(s,{disabled:this.props.isSendBlocked,label:ba,onClick:(function(ca){return this.$PagesManagerMessagingComposerView6(ca);}).bind(this),use:'confirm'})));};aa.prototype.$PagesManagerMessagingComposerView17=function(){var ba=u._("Post a sticker");if(this.$PagesManagerMessagingComposerView4())return (q.createElement('span',{className:"_4dw4"},q.createElement(r,{onStickerSelected:this.props.onStickerSelected,onEmoticonSelected:(function(ca){return this.$PagesManagerMessagingComposerView5(ca);}).bind(this)},q.createElement(i,{alt:ba,className:"_3fhi",src:v('/images/pages/pages_manager/messages/composer-stickers.png')}))));};aa.prototype.$PagesManagerMessagingComposerView18=function(){return (q.createElement(o,{suggestedResponseHandler:this.props.suggestedResponseHandler,onAccepted:this.props.onSuggestedResponseAccept,onDeclined:this.props.onSuggestedResponseDecline}));};aa.prototype.render=function(){if(!this.props.participant)return q.createElement('div',{className:"_26ue"});return (q.createElement('div',{className:"__1d"},q.createElement(j,null),q.createElement('div',{className:"_4dw9"},this.$PagesManagerMessagingComposerView11(),this.$PagesManagerMessagingComposerView9(),q.createElement('div',{className:"_3-8o _4dwa"},this.$PagesManagerMessagingComposerView7(),this.$PagesManagerMessagingComposerView17(),this.$PagesManagerMessagingComposerView12(),this.$PagesManagerMessagingComposerView16())),q.createElement('div',{className:"_6fl"},this.$PagesManagerMessagingComposerView18(),this.$PagesManagerMessagingComposerView10()),this.$PagesManagerMessagingComposerView8()));};aa.prototype.$PagesManagerMessagingComposerView13=function(ba){this.setState({placeholder:ba});};aa.prototype.$PagesManagerMessagingComposerView14=function(){this.setState({placeholder:''});};aa.prototype.$PagesManagerMessagingComposerView15=function(ba,ca){this.setState({placeholder:''});this.props.onReplySelected(ba,ca);};aa.propTypes={attachments:y.array,canAttachFiles:y.bool,canUseSavedReplies:y.bool,canUseStickers:y.bool,isQuickReplyMode:y.bool,isSavedRepliesLoading:y.bool,isSendBlocked:y.bool,message:y.string.isRequired,onAttachmentDetach:y.func,onEmoticonSelected:y.func,onFetchReplies:y.func.isRequired,onFileUploaderSubmit:y.func,onFileUploaderMounted:y.func,onFileUploadFinished:y.func,onFocus:y.func,onInitialRender:y.func,onInputChange:y.func,onSend:y.func,onStickerSelected:y.func,onSuggestedResponseAccept:y.func,onSuggestedResponseDecline:y.func,participant:y.object,recipientID:y.string,savedReplies:y.object,suggestedResponseHandler:y.instanceOf(l),uploaderActionURI:y.string,userID:y.string};aa.defaultProps={attachments:[],canAttachFiles:true,canUseOmnipicker:false,canUseSavedReplies:true,canUseStickers:true,isSendBlocked:false,onAttachmentDetach:z,onEmoticonSelected:z,onFileUploaderMounted:z,onFileUploaderSubmit:z,onFileUploadFinished:z,onInputChange:z,onSend:z,onStickerSelected:z,onSuggestedResponseAccept:z};f.exports=aa;},null);
__d('PagesManagerMessagingNUXActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({RESET_STEP:'',SET_IS_VISIBLE:'',SET_ROOT_ELEMENT:'',SET_STEP:'',SET_SHOULD_SHOW_BANNER:'',SET_SHOULD_SHOW_CONTEXT_CARD_STEP:'',SET_DEPENDENCY_READY:{COMPOSER:'',CONTEXT_CARD:'',THREADLIST:''}});f.exports=i;},null);
__d('PagesManagerMessagingNUXDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerMessagingNUXActions',['PagesManagerMessagingNUXActionTypes','PagesManagerMessagingNUXDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={resetStep:function(){i.dispatch({actionType:h.RESET_STEP});},setComposerReady:function(){i.dispatch({actionType:h.SET_DEPENDENCY_READY.COMPOSER});},setContextCardReady:function(){i.dispatch({actionType:h.SET_DEPENDENCY_READY.CONTEXT_CARD});},setThreadlistReady:function(){i.dispatch({actionType:h.SET_DEPENDENCY_READY.THREADLIST});},setIsVisible:function(k){i.dispatch({actionType:h.SET_IS_VISIBLE,isVisible:k});},setRootElement:function(k){i.dispatch({actionType:h.SET_ROOT_ELEMENT,rootElement:k});},setStep:function(k){i.dispatch({actionType:h.SET_STEP,step:k});},setShouldShowBanner:function(k){i.dispatch({actionType:h.SET_SHOULD_SHOW_BANNER,shouldShow:k});},setShouldShowContextCardStep:function(k){i.dispatch({actionType:h.SET_SHOULD_SHOW_CONTEXT_CARD_STEP,shouldShow:k});}};f.exports=j;},null);
__d('PagesManagerMessagingComposerContainer.react',['DragDropTarget','EmoticonsList','EmoticonUtils','FluxContainer','MercuryIDs','MercuryMessageActions','MercuryMessageObject','MercuryParticipants','MercurySourceType','PagesEventObserver','PagesEventType','PagesManagerMessagingComposerActions','PagesManagerMessagingComposerStore','PagesManagerMessagingComposerView.react','PagesManagerMessagingNUXActions','PagesMessagingConfig','PagesMessengerShareLinkUploader','React','ReactDOM','SavedResponsesUtils','SelectionPosition','SubscriptionsHandler','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea,fa;'use strict';var ga=y.PropTypes;ea=babelHelpers.inherits(ha,y.Component);fa=ea&&ea.prototype;ha.getStores=function(){return [t];};ha.calculateState=function(ia,ja){var ka=ia?ia.isShareLinkUploading:false;return {attachments:t.getAllAttachmentsMeta(),isAttachmentUploading:t.getIsAttachmentUploading(),isSavedRepliesLoading:t.getIsSavedRepliesLoading(),isQuickReplyMode:t.getQuickReplyMode(),isShareLinkUploading:ka,message:t.getMessage(),participant:t.getParticipant(),savedReplies:t.getSavedReplies(),uploaderActionURI:t.getUploadActionFromUserID(ja.userID)};};ha.prototype.componentDidMount=function(){v.setComposerReady();};ha.prototype.$PagesManagerMessagingComposerContainer1=function(ia){this.$PagesManagerMessagingComposerContainer2.addSubscriptions(ia.subscribe('one-upload-completed',this.$PagesManagerMessagingComposerContainer3.bind(this)));};ha.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerContainer4(this.props);this.$PagesManagerMessagingComposerContainer5(this.props.userID);this.$PagesManagerMessagingComposerContainer2=new ca();};ha.prototype.componentWillReceiveProps=function(ia){this.$PagesManagerMessagingComposerContainer4(ia);if(ia.threadID!==this.props.threadID){s.clearMessage();s.detachAllAttachments();}if(ia.userID!==this.props.userID)this.$PagesManagerMessagingComposerContainer5(ia.userID);};ha.prototype.componentWillUpdate=function(ia,ja){if(this.props.onMessageOrAttachmentUpdate&&(ja.attachments.length!==this.state.attachments.length||ja.message!==this.state.message))this.props.onMessageOrAttachmentUpdate();};ha.prototype.componentWillUnmount=function(){this.$PagesManagerMessagingComposerContainer2&&this.$PagesManagerMessagingComposerContainer2.release();};ha.prototype.$PagesManagerMessagingComposerContainer6=function(){var ia=new x(z.findDOMNode(this.refs.composer.refs.linkPreview),this.refs.composer.refs.textInput.getTextFieldDOM(),da,da);this.$PagesManagerMessagingComposerContainer2.addSubscriptions(ia.subscribe('link-detected',(function(){this.setState({isShareLinkUploading:true});this.props.onMessageOrAttachmentUpdate();}).bind(this)),ia.subscribe('share-loaded',(function(){this.setState({isShareLinkUploading:false});}).bind(this)),ia.subscribe('closed',(function(){this.props.onMessageOrAttachmentUpdate();}).bind(this)));if(w.dragdropEnabled){this.$PagesManagerMessagingComposerContainer7=this.$PagesManagerMessagingComposerContainer7||new h(z.findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer7.setOnURLDropCallback(function(ja){return (ia.loadShare(ja));});}s.setShareLinkUploader(ia);};ha.prototype.$PagesManagerMessagingComposerContainer8=function(){if(this.state.isSavedRepliesLoading||!this.props.userID||!this.props.recipientID)return;s.setIsSavedRepliesLoading(true);aa.fetchSavedResponses(this.props.userID,this.props.recipientID,function(ia,ja){s.setIsSavedRepliesLoading(false);s.setSavedReplies(ia,ja);});};ha.prototype.$PagesManagerMessagingComposerContainer4=function(ia){this.$PagesManagerMessagingComposerContainer9=n.getForFBID(ia.userID);this.$PagesManagerMessagingComposerContainer10=m.getForFBID(ia.userID);};ha.prototype.$PagesManagerMessagingComposerContainer5=function(ia){var ja=l.getParticipantIDFromUserID(ia);o.get(ja,function(ka){s.setParticipant(ka);});};ha.prototype.isSendBlocked=function(){if(this.state.isAttachmentUploading||this.state.isShareLinkUploading||this.state.message===''&&this.state.attachments.length<1)return true;return false;};ha.prototype.$PagesManagerMessagingComposerContainer11=function(ia){s.detachAttachment(ia);};ha.prototype.$PagesManagerMessagingComposerContainer12=function(ia,ja){var ka=i.symbols[ia];if(!ka)return;this.$PagesManagerMessagingComposerContainer13=this.$PagesManagerMessagingComposerContainer13||new ba(ja);var la=j.insertEmoticon(ka,this.state.message,this.$PagesManagerMessagingComposerContainer13.getPos());this.$PagesManagerMessagingComposerContainer13.setPos(la.start,la.end);s.setMessage(la.result);};ha.prototype.$PagesManagerMessagingComposerContainer14=function(ia){this.$PagesManagerMessagingComposerContainer1(ia);if(w.dragdropEnabled){this.$PagesManagerMessagingComposerContainer7=this.$PagesManagerMessagingComposerContainer7||new h(z.findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer7.setOnFilesDropCallback(this.$PagesManagerMessagingComposerContainer15.bind(this));}s.fileUploaderReady(ia);};ha.prototype.$PagesManagerMessagingComposerContainer3=function(ia,ja){s.completeAttachment(ja);};ha.prototype.$PagesManagerMessagingComposerContainer16=function(ia,ja){s.startAttachment(ja.files);};ha.prototype.$PagesManagerMessagingComposerContainer17=function(ia){if(ia==='all-uploads-completed'){s.completeAllAttachments();}else ia==='upload-canceled';};ha.prototype.$PagesManagerMessagingComposerContainer18=function(ia){s.setMessage(ia.target.value);};ha.prototype.$PagesManagerMessagingComposerContainer19=function(ia,ja){var ka=t.getFileUploader();s.detachAllAttachments();s.setMessage(ia);if(ja&&ka)ka.addCachedAttachments([ja]);if(this.refs.composer&&this.refs.composer.refs.textInput)this.refs.composer.refs.textInput.getTextFieldDOM().focus();};ha.prototype.$PagesManagerMessagingComposerContainer20=function(ia){var ja=t.getFileUploader();if(ja)ja.addCachedAttachments(ia.map(function(ka){return {filename:'Photo.jpg',image_id:ka.fbid,filetype:'image/jpeg'};}));};ha.prototype.$PagesManagerMessagingComposerContainer21=function(){var ia=this.state.message,ja=t.getAttachedAttachmentIds(),ka=t.getAttachedImageIds(),la=t.getAttachedAnimatedImageIds(),ma=t.getAttachedVideoIds(),na=t.getAttachedAudioFilesIds(),oa=t.getAttachedFilesIds(),pa=t.getShareLink(),qa=this.$PagesManagerMessagingComposerContainer9.constructUserGeneratedMessageObject(ia,p.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);if(this.isSendBlocked()||!ia&&!ja.length&&!na.length&&!ka.length&&!oa.length&&!la.length&&!ma.length&&!pa)return;if(pa){qa.has_attachment=true;qa.content_attachment=pa;}if(ja.length>0){qa.has_attachment=true;qa.raw_attachments=ja;}if(ka.length>0){qa.image_ids=ka;qa.has_attachment=true;}if(la.length>0){qa.gif_ids=la;qa.has_attachment=true;}if(ma.length>0){qa.video_ids=ma;qa.has_attachment=true;}if(na.length>0){qa.audio_ids=na;qa.has_attachment=true;}if(oa.length>0){qa.file_ids=oa;qa.has_attachment;}q.logData_DEPRECATED({page_id:this.props.user,event_name:r.MESSAGES_DIALOG_SEND,thread_id:this.props.threadElementID},null);this.$PagesManagerMessagingComposerContainer10.send(qa);s.detachAllAttachments();s.clearMessage();s.clearShareLinkUploader();};ha.prototype.$PagesManagerMessagingComposerContainer22=function(ia){var ja=this.$PagesManagerMessagingComposerContainer9.constructUserGeneratedMessageObject('',p.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);ja.has_attachment=true;ja.sticker_id=ia;this.$PagesManagerMessagingComposerContainer10.send(ja);s.clearMessage();};ha.prototype.$PagesManagerMessagingComposerContainer15=function(ia){if(this.refs.composer&&this.refs.composer.refs.fileUploader)this.refs.composer.refs.fileUploader.addFiles(ia);};ha.prototype.render=function(){return (y.createElement(u,babelHelpers._extends({},this.props,this.state,{isSendBlocked:this.isSendBlocked(),onAttachmentDetach:this.$PagesManagerMessagingComposerContainer11.bind(this),onEmoticonSelected:this.$PagesManagerMessagingComposerContainer12.bind(this),onFetchReplies:this.$PagesManagerMessagingComposerContainer8.bind(this),onFileUploaderMounted:this.$PagesManagerMessagingComposerContainer14.bind(this),onFileUploaderSubmit:this.$PagesManagerMessagingComposerContainer16.bind(this),onFileUploadFinished:this.$PagesManagerMessagingComposerContainer17.bind(this),onInitialRender:(function(){return this.$PagesManagerMessagingComposerContainer6();}).bind(this),onInputChange:(function(ia){return this.$PagesManagerMessagingComposerContainer18(ia);}).bind(this),onOmnipickerPhotosSelected:this.$PagesManagerMessagingComposerContainer20.bind(this),onReplySelected:this.$PagesManagerMessagingComposerContainer19.bind(this),onSend:(function(){return this.$PagesManagerMessagingComposerContainer21();}).bind(this),onStickerSelected:this.$PagesManagerMessagingComposerContainer22.bind(this),ref:'composer'})));};function ha(){ea.apply(this,arguments);}ha.propTypes={creatorInfo:ga.object,onMessageOrAttachmentUpdate:ga.func,threadElementID:ga.string,threadID:ga.string,userID:ga.string};f.exports=k.create(ha,{withProps:true});},null);
__d('PagesManagerMessagingNavigationUnitKey',['MercuryFilters','MessagingTag','PageMessageEnumTag'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={FILTERS:{ALL:h.ALL,UNREAD:h.UNREAD,FLAGGED:j.FLAG},FOLDERS:{INBOX:i.INBOX,ARCHIVED:i.ACTION_ARCHIVED,SPAM:i.SPAM}};f.exports=k;},null);
__d('PagesManagerNavigationUnit',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.$PagesManagerNavigationUnit1=j;}i.prototype.getDisplayTitle=function(){h(0);};i.prototype.getKey=function(){return this.$PagesManagerNavigationUnit1;};i.prototype.getNotificationCount=function(j,k){return 0;};f.exports=i;},null);
__d('PagesManagerMessagingAllNavigationUnit',['PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(){l.constructor.call(this,h.FILTERS.ALL);}m.prototype.getDisplayTitle=function(){return j._("All");};f.exports=m;},null);
__d('PagesManagerMessagingFolderNavigationUnit',['immutable','PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.List;l=babelHelpers.inherits(o,j);m=l&&l.prototype;o.prototype.getSupportedFilterKeys=function(){return n([i.FILTERS.ALL]);};o.prototype.assertSupportsFilter=function(p){!(this.getSupportedFilterKeys().indexOf(p.getKey())>=0)?k(0):undefined;};function o(){l.apply(this,arguments);}f.exports=o;},null);
__d('PagesManagerMessagingArchiveNavigationUnit',['PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i.FOLDERS.ARCHIVED);}m.prototype.getDisplayTitle=function(){return j._("Archived");};f.exports=m;},null);
__d('PagesManagerMessagingFlaggedNavigationUnit',['PagesManagerNavigationUnit','PagesManagerMessagingNavigationUnitKey','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i.FILTERS.FLAGGED);}m.prototype.getDisplayTitle=function(){return j._("Flagged");};f.exports=m;},null);
__d('PagesManagerMessagingUnreadCountHelper',['MercuryThreadlistConstants','MercuryUnreadState'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={getUnreadCount:function(k,l){var m=i.getForFBID(k),n=m.exceedsMaxCount(l);return n?h.MAX_UNREAD_COUNT:m.getUnreadCount(l);}};f.exports=j;},null);
__d('PagesManagerMessagingInboxNavigationUnit',['immutable','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';var o=h.List;m=babelHelpers.inherits(p,i);n=m&&m.prototype;function p(){n.constructor.call(this,j.FOLDERS.INBOX);}p.prototype.getDisplayTitle=function(){return l._("Inbox");};p.prototype.getSupportedFilterKeys=function(){return o([j.FILTERS.ALL,j.FILTERS.UNREAD,j.FILTERS.FLAGGED]);};p.prototype.getNotificationCount=function(q,r){return k.getUnreadCount(q,this.getKey());};f.exports=p;},null);
__d('PagesManagerMessagingLogger',['MessagingTag','PagesEventObserver','PagesEventType','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='messages',m='inbox',n=':',o={logMessagesSectionViewEvent:function(p,q){var r=q||m,s=[];if(r.indexOf(':')){s=r.split(n);r=s[s.length-1];}i.notify(j.VIEW_MESSAGES,p,{section:l,subsection:r});},logPageViewFolderEvent:function(p,q,r){var event='';switch(q.getKey()){case h.INBOX:event=j.MESSAGES_VIEW_INBOX;break;case h.ACTION_ARCHIVED:event=j.MESSAGES_VIEW_ARCHIVED;break;case h.SPAM:event=j.MESSAGES_VIEW_SPAM;break;default:k(0);}i.notify(event,p,{source:r});}};f.exports=o;},null);
__d('PagesManagerMessagingSpamNavigationUnit',['PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i.FOLDERS.SPAM);}m.prototype.getDisplayTitle=function(){return j._("Spam");};f.exports=m;},null);
__d('PagesManagerMessagingThreadlistDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(){j.constructor.call(this);this.dispatch=this.dispatch.bind(this);}f.exports=new k();},null);
__d('PagesManagerMessagingThreadlistAction',['PagesManagerMessagingActionType','PagesManagerMessagingThreadlistDispatcher','MercuryThreadlistConstants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={initThreadlist:function(l){this.fetchThreadlist(l,0,j.WEBMESSENGER_THREAD_COUNT);},fetchThreadlist:function(l,m,n){i.dispatch({offset:m,limit:n,pageID:l,type:h.LIST.FETCH});},updateThreadlist:function(l){i.dispatch({pageID:l,type:h.LIST.UPDATED});},changeSearchTerm:function(l,m,n){i.dispatch({type:h.SEARCH.CHANGE_SEARCH_TERM,searchTerm:m,pageID:l,activeFolder:n});},changeIsSearchingNameStatus:function(l){i.dispatch({type:h.MESSAGE_SEARCH.NAME_SEARCH_CHANGE,isSearching:l});},changeIsSearchingSnippetStatus:function(l){i.dispatch({type:h.MESSAGE_SEARCH.SNIPPET_SEARCH_CHANGE,isSearching:l});},loadMoreNameResult:function(l,m,n){i.dispatch({type:h.MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT,searchTerm:m,pageID:l,activeFolder:n});},loadMoreSnippetResult:function(l,m,n){i.dispatch({type:h.MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT,searchTerm:m,pageID:l,activeFolder:n});},resetSearch:function(l){k.changeSearchTerm(l,'','');}};f.exports=k;},null);
__d('PagesManagerMessagingSearchStore',['PagesManagerMessagingActionType','PagesManagerMessagingThreadlistDispatcher','FluxStore','MercurySearchSnippetResults','MercurySearchThreadResults','MercurySearchThreadResultOrderer','MercurySearchThreadsStrategy','PagesManagerMessagingThreadlistAction','emptyFunction','guid'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';r=babelHelpers.inherits(t,j);s=r&&r.prototype;function t(){s.constructor.call(this,i);this.$PagesManagerMessagingSearchStore1='';this.$PagesManagerMessagingSearchStore2=false;this.$PagesManagerMessagingSearchStore3=false;this.$PagesManagerMessagingSearchStore4=false;this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore6=false;this.$PagesManagerMessagingSearchStore7='';this.$PagesManagerMessagingSearchStore8=[];this.$PagesManagerMessagingSearchStore9={};}t.prototype.getCurrentSearchTerm=function(){return this.$PagesManagerMessagingSearchStore1;};t.prototype.getIsInSearchMode=function(){return this.$PagesManagerMessagingSearchStore4;};t.prototype.getThreadNameSearchResults=function(){return this.$PagesManagerMessagingSearchStore8;};t.prototype.getThreadSnippetSearchResults=function(){return this.$PagesManagerMessagingSearchStore9;};t.prototype.getIsSearchingName=function(){return this.$PagesManagerMessagingSearchStore5;};t.prototype.getIsSearchingSnippet=function(){return this.$PagesManagerMessagingSearchStore6;};t.prototype.hasMoreNameSearchResult=function(){return this.$PagesManagerMessagingSearchStore2;};t.prototype.hasMoreSnippetSearchResult=function(){return this.$PagesManagerMessagingSearchStore3;};t.prototype.__onDispatch=function(u){switch(u.type){case h.SEARCH.CHANGE_SEARCH_TERM:this.$PagesManagerMessagingSearchStore1=u.searchTerm;if(this.$PagesManagerMessagingSearchStore1===''){this.$PagesManagerMessagingSearchStore8=[];this.$PagesManagerMessagingSearchStore4=false;}else{this.$PagesManagerMessagingSearchStore4=true;this.$PagesManagerMessagingSearchStore10(u.pageID,u.searchTerm,u.activeFolder);}this.__emitChange();break;case h.MESSAGE_SEARCH.NAME_SEARCH_CHANGE:this.$PagesManagerMessagingSearchStore5=u.isSearching;this.__emitChange();break;case h.MESSAGE_SEARCH.SNIPPET_SEARCH_CHANGE:this.$PagesManagerMessagingSearchStore6=u.isSearching;this.__emitChange();break;case h.MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT:this.$PagesManagerMessagingSearchStore11(u.pageID,u.searchTerm,u.activeFolder);this.__emitChange();break;case h.MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT:this.$PagesManagerMessagingSearchStore12(u.pageID,u.searchTerm,u.activeFolder);this.__emitChange();break;}};t.prototype.$PagesManagerMessagingSearchStore10=function(u,v,w){var x=q();this.$PagesManagerMessagingSearchStore7=x;var y=n.getForFBID(u),z=k.getForFBID(u),aa=m.getForFBID(u);this.$PagesManagerMessagingSearchStore5=true;this.$PagesManagerMessagingSearchStore6=true;y.search(v,(function(ba){this.$PagesManagerMessagingSearchStore8=aa.filterThreadsInFolder(ba,w);this.__emitChange();}).bind(this),(function(ba,ca){if(x!==this.$PagesManagerMessagingSearchStore7)return;var da=aa.filterThreadsInFolder(ba,w);this.$PagesManagerMessagingSearchStore8=aa.orderResults(this.$PagesManagerMessagingSearchStore8,[],da,w);this.$PagesManagerMessagingSearchStore2=!ca;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore5=false;this.__emitChange();}else o.changeIsSearchingNameStatus(false);}).bind(this),p);z.getAllThreadSearchResults(v,(function(ba,ca,da){this.$PagesManagerMessagingSearchStore9=this.$PagesManagerMessagingSearchStore13(ca,ba,w);this.$PagesManagerMessagingSearchStore3=!da;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange();}else o.changeIsSearchingSnippetStatus(false);}).bind(this,aa));this.__emitChange();};t.prototype.$PagesManagerMessagingSearchStore13=function(u,v,w){var x=Object.keys(u),y=v.filterThreadsInFolder(x,w),z={};y.forEach(function(aa){z[aa]=u[aa];});return z;};t.prototype.$PagesManagerMessagingSearchStore11=function(u,v,w){var x=l.getForFBID(u),y=m.getForFBID(u);this.$PagesManagerMessagingSearchStore5=true;x.getMoreThreadlist(v,(function(z,aa){var ba=y.filterThreadsInFolder(z,w);this.$PagesManagerMessagingSearchStore8=ba;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore5=false;this.__emitChange();}else o.changeIsSearchingNameStatus(false);}).bind(this));};t.prototype.$PagesManagerMessagingSearchStore12=function(u,v,w){var x=k.getForFBID(u),y=m.getForFBID(u);x.getAllThreadSearchMoreResults(v,(function(z,aa,ba){this.$PagesManagerMessagingSearchStore3=!ba;this.$PagesManagerMessagingSearchStore9=this.$PagesManagerMessagingSearchStore13(aa,z,w);if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange();}else o.changeIsSearchingSnippetStatus(false);}).bind(this,y));};f.exports=new t();},null);
__d('PagesManagerMessagingUnreadNavigationUnit',['PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper','PagesManagerNavigationUnit','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,j);m=l&&l.prototype;function n(){m.constructor.call(this,h.FILTERS.UNREAD);}n.prototype.getDisplayTitle=function(){return k._("Unread");};n.prototype.getNotificationCount=function(o,p){if(p.activeFolder.getKey()!==h.FOLDERS.INBOX)return 0;return i.getUnreadCount(o,p.activeFolder.getKey());};f.exports=n;},null);
__d('PagesManagerMessagingFilterStore',['FluxStore','immutable','Map','MessageThreadViewSource','PagesManagerActionType','PagesManagerMessagingAllNavigationUnit','PagesManagerMessagingArchiveNavigationUnit','PagesManagerMessagingFlaggedNavigationUnit','PagesManagerMessagingInboxNavigationUnit','PagesManagerMessagingLogger','PagesManagerMessagingSpamNavigationUnit','PagesManagerMessagingSearchStore','PagesManagerMessagingThreadlistDispatcher','PagesManagerMessagingUnreadNavigationUnit','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x;'use strict';w=babelHelpers.inherits(y,h);x=w&&w.prototype;function y(){x.constructor.call(this,t);this.$PagesManagerMessagingFilterStore1=i.List([new p(),new n(),new r()]);this.$PagesManagerMessagingFilterStore2=new m();this.$PagesManagerMessagingFilterStore3=i.List([this.$PagesManagerMessagingFilterStore2,new u(),new o()]);this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore1.first();this.$PagesManagerMessagingFilterStore5=this.$PagesManagerMessagingFilterStore6(this.$PagesManagerMessagingFilterStore4.getSupportedFilterKeys().first());this.$PagesManagerMessagingFilterStore7=false;}y.prototype.$PagesManagerMessagingFilterStore8=function(z,aa){var ba=z.filter(function(ca){return ca.getKey()===aa;});!(ba.size>0)?v(0):undefined;return ba.first();};y.prototype.$PagesManagerMessagingFilterStore6=function(z){return this.$PagesManagerMessagingFilterStore8(this.$PagesManagerMessagingFilterStore3,z);};y.prototype.$PagesManagerMessagingFilterStore9=function(z){return this.$PagesManagerMessagingFilterStore8(this.$PagesManagerMessagingFilterStore1,z);};y.prototype.$PagesManagerMessagingFilterStore10=function(z,aa){q.logMessagesSectionViewEvent(z,aa.getKey());q.logPageViewFolderEvent(z,aa,k.NEW_MESSAGETAB);this.$PagesManagerMessagingFilterStore4=aa;this.$PagesManagerMessagingFilterStore5=this.$PagesManagerMessagingFilterStore6(aa.getSupportedFilterKeys().first());this.__emitChange();};y.prototype.$PagesManagerMessagingFilterStore11=function(z,aa){this.$PagesManagerMessagingFilterStore4.assertSupportsFilter(aa);this.$PagesManagerMessagingFilterStore5=aa;this.__emitChange();};y.prototype.getAvailableFolders=function(){return this.$PagesManagerMessagingFilterStore1;};y.prototype.getAvailableFilters=function(){return i.List(this.$PagesManagerMessagingFilterStore3.filter((function(z){return this.getActiveFolder().getSupportedFilterKeys().indexOf(z.getKey())>=0;}).bind(this)));};y.prototype.getActiveFolder=function(){return this.$PagesManagerMessagingFilterStore4;};y.prototype.getActiveFilter=function(){return this.$PagesManagerMessagingFilterStore7?this.$PagesManagerMessagingFilterStore2:this.$PagesManagerMessagingFilterStore5;};y.prototype.getActiveFolderName=function(){return this.getActiveFolder().getKey();};y.prototype.getActiveFilterName=function(){return this.getActiveFilter().getKey();};y.prototype.getUnitNotificationCountMap=function(z){var aa=new j(),ba=(function(ca){return aa.set(ca,ca.getNotificationCount(z,{activeFolder:this.getActiveFolder(),activeFilter:this.getActiveFilter()}));}).bind(this);this.getAvailableFolders().map(ba);this.getAvailableFilters().map(ba);return aa;};y.prototype.getNavigationKey=function(){return this.getActiveFolderName()+'|'+this.getActiveFilterName();};y.prototype.__onDispatch=function(z){switch(z.type){case l.NAVIGATION_UNIT.CHANGE:if(this.getAvailableFolders().indexOf(z.unit)>=0){this.$PagesManagerMessagingFilterStore10(z.pageID,z.unit);}else this.$PagesManagerMessagingFilterStore11(z.pageID,z.unit);break;case l.NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE:this.__emitChange();break;case l.SEARCH.CHANGE_SEARCH_TERM:t.waitFor([s.getDispatchToken()]);var aa=z.searchTerm!=='';if(this.$PagesManagerMessagingFilterStore7!==aa){this.$PagesManagerMessagingFilterStore7=aa;this.__emitChange();}break;}};f.exports=new y();},null);
__d('PagesManagerMessagingMessageDateBreak.react',['MessengerDateBreak.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,i.Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);}m.prototype.render=function(){'use strict';return (i.createElement(h,{className:"_2hvw",date:this.props.date}));};f.exports=m;},null);
__d('PagesManagerMessagingMessageList.react',['ChatTypingIndicators.react','immutable','MessengerTypingIndicator.react','MessageList.react','MessengerLogMessage.react','MessengerMessageGroup.react','MessengerSpinner.react','PagesEventObserver','PagesEventType','PagesManagerMessagingMessageDateBreak.react','React','MercuryShareAttachmentRenderLocations','ScrollableArea.react','cloneWithProps','cx','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x,y,z='message_tab';x=babelHelpers.inherits(aa,r.Component);y=x&&x.prototype;function aa(ba,ca){'use strict';y.constructor.call(this,ba,ca);this.$PagesManagerMessagingMessageList1=true;this.prevScrollTop=0;this.prevScrollHeight=0;}aa.prototype.componentDidUpdate=function(ba){'use strict';var ca=this.props.messagelist.last()&&this.props.messagelist.last().thread_fbid,da=ba.messagelist.last()&&ba.messagelist.last().thread_fbid;if(ba.messagelist.size===0&&this.props.messagelist.size!==0||ca!=da){this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}else if(this.props.messagelist.size!==ba.messagelist.size)this.$PagesManagerMessagingMessageList2(this.prevScrollHeight,this.prevScrollTop);};aa.prototype.$PagesManagerMessagingMessageList2=function(ba,ca){'use strict';if(!this.refs.scrollableArea)return;var da=this.refs.scrollableArea.getArea(),ea=da.getScrollHeight()-ba+ca;da.setScrollTop(ea,false);};aa.prototype.$PagesManagerMessagingMessageList3=function(){'use strict';if(!this.refs.scrollableArea)return;var ba=this.refs.scrollableArea.getArea(),ca=this.prevScrollTop,da=this.prevScrollHeight;this.$PagesManagerMessagingMessageList4();if(ba.isScrolledToTop()){this.props.fetchEarlierMessages();}else if(ba.isScrolledToBottom()){this.$PagesManagerMessagingMessageList5();}else{if(ba.getScrollTop()===ca&&ba.getScrollHeight()!==da)this.$PagesManagerMessagingMessageList2(da,ca);this.$PagesManagerMessagingMessageList6();}};aa.prototype.$PagesManagerMessagingMessageList5=function(){'use strict';if(!this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=true;};aa.prototype.$PagesManagerMessagingMessageList6=function(){'use strict';if(this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=false;};aa.prototype.$PagesManagerMessagingMessageList4=function(){'use strict';var ba=this.refs.scrollableArea;this.prevScrollHeight=ba?ba.getArea().getScrollHeight():0;this.prevScrollTop=ba?ba.getArea().getScrollTop():0;};aa.prototype.$PagesManagerMessagingMessageList7=function(){'use strict';var ba=Math.floor(this.props.scrollHeight/130);return (r.createElement('div',{className:"_31m6",style:{height:this.props.scrollHeight}},r.createElement('div',{className:"_31m7",style:{height:130*ba}},this.$PagesManagerMessagingMessageList8(ba))));};aa.prototype.$PagesManagerMessagingMessageList8=function(ba){'use strict';var ca=r.createElement('div',null,r.createElement('div',{className:"_31m8"}),r.createElement('div',{className:"_31ma"}),r.createElement('div',{className:"_31mb"}),r.createElement('div',{className:"_31mc"}),r.createElement('div',{className:"_31me"}),r.createElement('div',{className:"_31mf"}),r.createElement('div',{className:"_31mg"}),r.createElement('div',{className:"_31mh"}),r.createElement('div',{className:"_31mi"}),r.createElement('div',{className:"_31mj"}),r.createElement('div',{className:"_31mk"}),r.createElement('div',{className:"_31ml"}),r.createElement('div',{className:"_31mm"}),r.createElement('div',{className:"_31mn"}),r.createElement('div',{className:"_31mo"}),r.createElement('div',{className:"_31mp"}),r.createElement('div',{className:"_31mq"})),da=[];for(var ea=0;ea<ba;ea++)da.push(u(ca,{key:'loading'+ea}));return da;};aa.prototype.$PagesManagerMessagingMessageList9=function(){'use strict';if(!this.props.isLoadingMore)return null;return (r.createElement('div',{className:"_2k8v"},r.createElement(n,null)));};aa.prototype.$PagesManagerMessagingMessageList10=function(){'use strict';o.notify(p.MESSAGES_VIEW_THREAD,this.props.pageID,{source:z,thread_id:this.props.threadID});return (r.createElement('div',{className:"clearfix _1ej0 _2mpc"},r.createElement(k,{DateBreak:q,deliveryTimestamp:0,isCanonical:true,isPageMessage:true,location:s.MESSENGER,LogMessage:l,MessageGroup:m,messages:this.props.messagelist,readReceipts:this.props.readReceipts,viewer:this.props.pageID}),r.createElement(h,{indicatorClass:j,indicatorsWillShow:function(){},indicatorsDidShow:(function(){this.$PagesManagerMessagingMessageList1&&this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}).bind(this),rootClassName:"clearfix _17pz _4gv2",threadID:this.props.threadID,viewer:this.props.pageID})));};aa.prototype.render=function(){'use strict';if(this.props.initLoading)return this.$PagesManagerMessagingMessageList7();return (r.createElement(t,{className:"_11y7",fade:false,height:this.props.scrollHeight,onScroll:w((function(){return this.$PagesManagerMessagingMessageList3();}).bind(this),500),ref:'scrollableArea',shadow:false},this.$PagesManagerMessagingMessageList9(),r.createElement('div',{className:"_14y3"},this.props.threadID?this.$PagesManagerMessagingMessageList10():r.createElement('div',null))));};f.exports=aa;},null);
__d('PagesManagerMessagingMessagelistDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerMessagingMessagelistAction',['PagesManagerMessagingActionType','PagesManagerMessagingMessagelistDispatcher'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.LIST,k={updateMessagelist:function(l,m,n){i.dispatch({type:j.LOADED,pageID:l,threadID:m,data:n});},setIsLoading:function(l){i.dispatch({type:j.LOADING,isLoading:l});},setIsLoadingMore:function(l){i.dispatch({type:j.LOAD_MORE,isLoadingMore:l});},setScrollAreaHeight:function(l){i.dispatch({type:h.SET_SCROLL_HEIGHT,height:l});},updateReadReceipts:function(l,m,n){i.dispatch({type:h.MESSAGE_LEVEL.READ_RECEIPTS,pageID:l,threadID:m,readReceipts:n});},updateThread:function(l,m){i.dispatch({type:h.THREAD_LEVEL.UPDATE_THREAD,pageID:l,threadID:m});},setIsContextCardHidden:function(l){i.dispatch({type:h.SET_IS_CONTEXT_CARD_HIDDEN,isHidden:l});}};f.exports=k;},null);
__d("XPagesContextCardSetIsHiddenController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/customer\/context_card\/set_is_hidden\/",{});},null);
__d('PagesManagerMessagingMessagelistStore',['PagesManagerMessagingActionType','AsyncRequest','FluxStore','immutable','PagesManagerMessagingMessagelistDispatcher','MercuryMessages','PagesManagerMessagingMessagelistDispatcher','MercuryThreadlistConstants','XPagesContextCardSetIsHiddenController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;q=babelHelpers.inherits(s,j);r=q&&q.prototype;function s(){'use strict';r.constructor.call(this,n);this.$PagesManagerMessagingMessagelistStore1='';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore3=false;this.$PagesManagerMessagingMessagelistStore4=[];this.$PagesManagerMessagingMessagelistStore5=k.OrderedMap();this.$PagesManagerMessagingMessagelistStore6=0;}s.prototype.__onDispatch=function(t){'use strict';switch(t.type){case h.LIST.LOADED:this.$PagesManagerMessagingMessagelistStore7(t);this.__emitChange();break;case h.LIST.LOADING:this.$PagesManagerMessagingMessagelistStore2=t.isLoading;this.__emitChange();break;case h.LIST.LOAD_MORE:this.$PagesManagerMessagingMessagelistStore3=t.isLoadingMore;this.__emitChange();break;case h.MESSAGE_LEVEL.READ_RECEIPTS:this.$PagesManagerMessagingMessagelistStore8(t);this.__emitChange();break;case h.SET_SCROLL_HEIGHT:var u=t.height;if(u!==this.$PagesManagerMessagingMessagelistStore6){this.$PagesManagerMessagingMessagelistStore6=u;this.__emitChange();}break;case h.THREAD_LEVEL.UPDATE_THREAD:this.__emitChange();break;case h.SET_IS_CONTEXT_CARD_HIDDEN:this.$PagesManagerMessagingMessagelistStore9(t.isHidden);this.__emitChange();break;default:return;}};s.prototype.$PagesManagerMessagingMessagelistStore7=function(t){'use strict';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore1=t.threadID;this.$PagesManagerMessagingMessagelistStore4=t.data.messages;};s.prototype.$PagesManagerMessagingMessagelistStore8=function(t){'use strict';if(this.$PagesManagerMessagingMessagelistStore1!==t.threadID)this.$PagesManagerMessagingMessagelistStore4=[];this.$PagesManagerMessagingMessagelistStore1=t.threadID;this.$PagesManagerMessagingMessagelistStore5=t.readReceipts;};s.prototype.isLoading=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore2;};s.prototype.isLoadingMore=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore3;};s.prototype.getMessagelist=function(t,u){'use strict';if(u!=this.$PagesManagerMessagingMessagelistStore1)return m.getForFBID(t).getThreadMessagesRangeNow(u,0,o.RECENT_MESSAGES_LIMIT).reverse();return this.$PagesManagerMessagingMessagelistStore4;};s.prototype.getScrollHeight=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore6;};s.prototype.getReadReceipts=function(t){'use strict';if(t!=this.$PagesManagerMessagingMessagelistStore1)return k.OrderedMap();return this.$PagesManagerMessagingMessagelistStore5;};s.prototype.isCardHidden=function(){'use strict';if(this.$PagesManagerMessagingMessagelistStore10===undefined||this.$PagesManagerMessagingMessagelistStore10===null)return null;return this.$PagesManagerMessagingMessagelistStore10;};s.prototype.$PagesManagerMessagingMessagelistStore9=function(t){'use strict';this.$PagesManagerMessagingMessagelistStore10=t;var u=p.getURIBuilder().getURI();new i().setURI(u).setData({is_hidden:t}).send();};f.exports=new s(l);},null);
__d('PagesManagerMessagingNoteComposerView.react',['Image.react','PagesMessengerTextInput.react','React','XUIButton.react','cx','fbt','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=j.PropTypes;o=babelHelpers.inherits(r,j.Component);p=o&&o.prototype;function r(s){p.constructor.call(this,s);this.state={isQuickReplyMode:true};}r.prototype.$PagesManagerMessagingNoteComposerView1=function(s){s.preventDefault();this.props.onCreateNote();};r.prototype.$PagesManagerMessagingNoteComposerView2=function(){var s=m._("Cancel");return (j.createElement('div',{className:"_1vgy"},j.createElement(k,{label:s,onClick:this.props.onCancelCreateNote})));};r.prototype.$PagesManagerMessagingNoteComposerView3=function(){var s=m._("Add");if(this.props.message.length>0)return (j.createElement('div',{className:"_1vgz"},j.createElement(k,{label:s,onClick:(function(t){return this.$PagesManagerMessagingNoteComposerView1(t);}).bind(this),use:'confirm'})));};r.prototype.$PagesManagerMessagingNoteComposerView4=function(){var s=m._("Add an admin note...");return (j.createElement('div',{className:"_4dv-"},j.createElement(i,{className:"_1p7p"+(' '+"_5id1")+(n(this.props.message)?' '+"_3197":'')+(' '+"_1vg-"),onNoShiftEnter:this.state.isQuickReplyMode?(function(t){return this.$PagesManagerMessagingNoteComposerView1(t);}).bind(this):null,placeholder:s,onChange:this.props.onInputChange,value:this.props.message,ref:'textInput'})));};r.prototype.$PagesManagerMessagingNoteComposerView5=function(){return (j.createElement('div',{className:"_4dw0"},j.createElement(h,{className:"_1cjc",src:this.props.participant.image_src})));};r.prototype.render=function(){if(!this.props.participant)return j.createElement('div',{className:"_1vg_"});return (j.createElement('div',{className:"_1vh0"},j.createElement('div',{className:"_1vh1"},this.$PagesManagerMessagingNoteComposerView5(),this.$PagesManagerMessagingNoteComposerView4(),j.createElement('div',{className:"_4dwa"},this.$PagesManagerMessagingNoteComposerView2(),this.$PagesManagerMessagingNoteComposerView3()))));};r.propTypes={onInputChange:q.func,onCancelCreateNote:q.func,onCreateNote:q.func,participant:q.object};f.exports=r;},null);
__d('PagesManagerMessagingNoteComposerContainer.react',['MercuryIDs','MercuryMessageIDs','MercuryMessages','MercuryPageMessageActions','MercuryParticipants','PagesManagerMessagingNoteComposerView.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=n.PropTypes;o=babelHelpers.inherits(r,n.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);this.state={message:'',participant:null};}r.prototype.$PagesManagerMessagingNoteComposerContainer1=function(){this.setState({message:''});};r.prototype.componentWillMount=function(){this.$PagesManagerMessagingNoteComposerContainer2(this.props);};r.prototype.componentWillReceiveProps=function(s){this.$PagesManagerMessagingNoteComposerContainer3(s.userID);this.$PagesManagerMessagingNoteComposerContainer2(s);if(s.threadID!==this.props.threadID)this.$PagesManagerMessagingNoteComposerContainer1();if(s.userID!==this.props.userID)this.$PagesManagerMessagingNoteComposerContainer3(s.userID);};r.prototype.componentDidMount=function(){setTimeout((function(){return this.$PagesManagerMessagingNoteComposerContainer3(this.props.userID);}).bind(this),0);};r.prototype.componentWillUpdate=function(s,t){if(this.props.onMessageOrAttachmentUpdate&&t.message!==this.state.message)this.props.onMessageOrAttachmentUpdate();};r.prototype.$PagesManagerMessagingNoteComposerContainer2=function(s){var t=s.userID;this.$PagesManagerMessagingNoteComposerContainer4=k.getForFBID(t);this.$PagesManagerMessagingNoteComposerContainer5=j.getForFBID(t);};r.prototype.$PagesManagerMessagingNoteComposerContainer6=function(s){var t=s.target;this.setState({message:t.value});};r.prototype.$PagesManagerMessagingNoteComposerContainer7=function(){if(!this.props.threadID)return;var s=this.props.creatorInfo?{creatorID:this.props.creatorInfo.creatorID,creatorType:this.props.creatorInfo.creatorType,creatorName:this.props.creatorInfo.creatorName,labelType:'page_admin_note',pageID:this.props.creatorInfo.pageID,profileURI:this.props.creatorInfo.profileURI}:null,t={id:null,body:this.state.message,creator_info:s,timestamp:Math.floor(Date.now()/1000)};this.$PagesManagerMessagingNoteComposerContainer5.getThreadMessagesRange(this.props.threadID,0,1,(function(u){if(!u.length)return;var v=u[0];if(this.$PagesManagerMessagingNoteComposerContainer5.isLocalMessage(v)){i.getServerIDs([v.message_id],(function(w){if(w.length){var x=w[0];this.$PagesManagerMessagingNoteComposerContainer4.createNote(t,this.props.threadID,x);}}).bind(this));}else this.$PagesManagerMessagingNoteComposerContainer4.createNote(t,this.props.threadID,v.message_id);}).bind(this));this.$PagesManagerMessagingNoteComposerContainer1();this.props.onDisablePageAdminNoteMode();};r.prototype.$PagesManagerMessagingNoteComposerContainer8=function(){this.$PagesManagerMessagingNoteComposerContainer1();this.props.onDisablePageAdminNoteMode();};r.prototype.$PagesManagerMessagingNoteComposerContainer3=function(s){var t=h.getParticipantIDFromUserID(s);l.get(t,(function(u){this.setState({participant:u});}).bind(this));};r.prototype.render=function(){return (n.createElement(m,babelHelpers._extends({},this.props,this.state,{onInputChange:(function(s){return this.$PagesManagerMessagingNoteComposerContainer6(s);}).bind(this),onCreateNote:(function(){return this.$PagesManagerMessagingNoteComposerContainer7();}).bind(this),onCancelCreateNote:(function(){return this.$PagesManagerMessagingNoteComposerContainer8();}).bind(this)})));};r.propTypes={creatorInfo:q.object,onDisablePageAdminNoteMode:q.func.isRequired,onMessageOrAttachmentUpdate:q.func,threadID:q.string,userID:q.string.isRequired};f.exports=r;},null);
__d('PagesManagerMessagingThreadInteractionHelper',['MercuryPageThreadActions','MercuryThreadIDMap','MercuryThreads','MessagingTag','PagesManagerMessagingMessagelistStore','PagesManagerStore','PagesMessagingActionPlacement','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={_getPermalinkURI:function(q,r){var s=i.getForFBID(r).getServerIDFromClientIDNow(q),t=o.getRequestURI(),u=j.getForFBID(r).getThreadMetaNow(q);t.addQueryData({threadid:s,mercurythreadid:q,timestamp:u?u.timestamp:null});return t;},_clearURLParam:function(){var q=o.getRequestURI();q.removeQueryData('mercurythreadid');q.removeQueryData('threadid');q.removeQueryData('timestamp');window.history.replaceState({},null,q);},handlePermalinkUpdate:function(q,r){if(!q){this._clearURLParam();return;}var s=p._getPermalinkURI(q,r);window.history.replaceState({},null,s);},handleUnreadStateUpdate:function(q,r,s){var t=m.getViewingListItem();if(!t)return;var u=j.getForFBID(r).getThreadMetaNow(t.toString()),v=l.getMessagelist(r,t.toString()),w=h.getForFBID(r);if(u&&u.unread_count>0||v.length>0)if(s===k.UNREAD&&q!==t){w.markRead(t,n.MESSAGE_DIALOG_SHOWN);}else if(s!==k.UNREAD)w.markRead(q,n.MESSAGE_DIALOG_SHOWN);}};f.exports=p;},null);
__d('PagesManagerMessagingBatchActionMenu.react',['MercuryPageThreadActions','PagesManagerAction','PagesManagerMessagingMessagelistAction','PagesMessengerActions','PagesMessagingActionPlacement','PopoverMenu.react','React','SimpleXUIDialog','ReactXUIMenu','XUIDialogButton.react','XUIDialogCancelButton.react','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w,x=p.Item;v=babelHelpers.inherits(y,n.Component);w=v&&v.prototype;function y(z){'use strict';w.constructor.call(this,z);this.$PagesManagerMessagingBatchActionMenu1=h.getForFBID(z.pageID);}y.prototype.$PagesManagerMessagingBatchActionMenu2=function(event,z){'use strict';var aa=z.item.getValue(),ba=null;switch(aa){case k.FLAG:ba=this.$PagesManagerMessagingBatchActionMenu1.batchAddFlag;break;case k.UNFLAG:ba=this.$PagesManagerMessagingBatchActionMenu1.batchRemoveFlag;break;case k.MARK_AS_SPAM:ba=this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam;break;case k.MARK_AS_UNSPAM:ba=this.$PagesManagerMessagingBatchActionMenu1.batchUnmarkSpam;break;case k.MARK_AS_READ:ba=this.$PagesManagerMessagingBatchActionMenu1.batchMarkRead;break;case k.MARK_AS_UNREAD:ba=this.$PagesManagerMessagingBatchActionMenu1.batchMarkUnread;break;case k.ARCHIVE:ba=this.$PagesManagerMessagingBatchActionMenu1.batchArchive;break;case k.UNARCHIVE:ba=this.$PagesManagerMessagingBatchActionMenu1.batchUnarchive;break;case k.DELETE_THREAD:this.$PagesManagerMessagingBatchActionMenu3();return;case k.HIDE_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu4();return;case k.SHOW_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu5();return;default:u(0);}if(ba)ba.call(this.$PagesManagerMessagingBatchActionMenu1,this.props.selectedRows,this.props.placement);i.deselectAll();this.props.onSelectionClear&&this.props.onSelectionClear();};y.prototype.$PagesManagerMessagingBatchActionMenu3=function(){'use strict';var z=this.props.selectedRows.length,aa=t._("Delete Messages"),ba=t._("Are you sure you want to delete {number of messages}?",[t.param('number of messages',n.createElement('span',{className:"_50f7"},t._({"*":{"message":"{number of messages} message","messages":"{number of messages} messages"}},[t.param('number of messages',z,[0]),t['enum'](z>1?'messages':'message',{message:'message',messages:'messages'})])))]),ca=t._("Delete Messages"),da=[n.createElement(r,null),n.createElement(q,{action:'cancel',label:ca,onClick:(function(){this.$PagesManagerMessagingBatchActionMenu1.batchDelete(this.props.selectedRows,l.THREAD_LIST_BATCH_ACTION);}).bind(this),use:'confirm'})];o.showEx(ba,aa,da);};y.prototype.$PagesManagerMessagingBatchActionMenu4=function(){'use strict';j.setIsContextCardHidden(true);};y.prototype.$PagesManagerMessagingBatchActionMenu5=function(){'use strict';j.setIsContextCardHidden(false);};y.prototype.renderMenu=function(){'use strict';return (n.createElement(p,{onItemClick:(function(event,z){return this.$PagesManagerMessagingBatchActionMenu2(event,z);}).bind(this)},this.props.inlineActionParam.showFlag?n.createElement(x,{value:k.FLAG},t._("Flag")):null,this.props.inlineActionParam.showUnflag?n.createElement(x,{value:k.UNFLAG},t._("Unflag")):null,this.props.inlineActionParam.showSpam?n.createElement(x,{value:k.MARK_AS_SPAM},t._("Report as Spam")):null,this.props.inlineActionParam.showUnspam?n.createElement(x,{value:k.MARK_AS_UNSPAM},t._("Move to Inbox")):null,this.props.inlineActionParam.showMarkRead?n.createElement(x,{value:k.MARK_AS_READ},t._("Mark as Read")):null,this.props.inlineActionParam.showMarkUnread?n.createElement(x,{value:k.MARK_AS_UNREAD},t._("Mark as Unread")):null,this.props.inlineActionParam.showArchive?n.createElement(x,{value:k.ARCHIVE},t._("Archive")):null,this.props.inlineActionParam.showUnarchive?n.createElement(x,{value:k.UNARCHIVE},t._("Move to Inbox")):null,this.props.inlineActionParam.showDelete?n.createElement(x,{value:k.DELETE_THREAD},t._("Delete")):null,this.props.inlineActionParam.showHideContextCard?n.createElement(x,{value:k.HIDE_CONTEXT_CARD},t._("Hide sender info")):null,this.props.inlineActionParam.showShowContextCard?n.createElement(x,{value:k.SHOW_CONTEXT_CARD},t._("Show sender info")):null));};y.prototype.render=function(){'use strict';return (n.createElement(m,{alignh:this.props.alignh,className:!this.props.showBatchAction?"hidden_elem":'',layerBehaviors:this.props.layerBehaviors,menu:this.renderMenu(),onHide:this.props.onHide,onShow:this.props.onShow,ref:'menu'},this.props.children));};y.defaultProps={alignh:'left'};f.exports=y;},null);
__d('PagesManagerMessagingThreadTitle.react',['ContextualDialogArrow','ContextualLayerAutoFlip','Image.react','LeftRight.react','MercuryThreadTitle.react','PagesManagerMessagingBatchActionMenu.react','PagesMessengerThreadUtils','PagesMessagingActionPlacement','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t;s=babelHelpers.inherits(u,p.Component);t=s&&s.prototype;u.prototype.render=function(){'use strict';if(this.props.thread===null||this.props.thread===undefined)return p.createElement('div',{className:"_174o"});var v=n.getBatchActionMenuParam(this.props.thread);v.showMarkRead=false;v.showMarkUnread=false;v.showHideContextCard=this.props.isContextCardEnabled&&!this.props.isContextCardHidden;v.showShowContextCard=this.props.isContextCardEnabled&&this.props.isContextCardHidden;return (p.createElement(k,{className:"_174o"},p.createElement(l,{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:false}),p.createElement(m,{alignh:'right',layerBehaviors:[h,i],onHide:(function(){this.setState({menuShown:false});}).bind(this),onShow:(function(){this.setState({menuShown:true});}).bind(this),pageID:this.props.pageID,inlineActionParam:v,placement:o.THREAD_TITLE_BAR,selectedRows:[this.props.thread&&this.props.thread.thread_id],showBatchAction:true},p.createElement(j,{className:"_3lq_",onClick:function(event){return event.stopPropagation();},src:r('/images/mobile/chrome/ui/divebar/settings_gear.png')}))));};function u(){'use strict';s.apply(this,arguments);}f.exports=u;},null);
__d('PagesManagerMessagingDetailContainer.react',['BootloadedComponent.react','FBID','FluxContainer','Grid.react','immutable','JSResource','MercuryMessageStore','MercuryRoger','MercuryThreadInformer','MercuryThreads','MessagingTag','MessengerConfig','PagesEventObserver','PagesEventType','PagesManagerMessagingComposerContainer.react','PagesManagerMessagingFilterStore','PagesManagerMessagingMessageList.react','PagesManagerMessagingMessagelistAction','PagesManagerMessagingMessagelistStore','PagesManagerMessagingNoteComposerContainer.react','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadTitle.react','PagesManagerPerfLogger','React','ReactDOM','Set','SubscriptionsHandler','Vector','XUIButton.react','cx','debounce','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){if(c.__markCompiled)c.__markCompiled();var oa,pa,qa=k.GridItem;oa=babelHelpers.inherits(ra,fa.Component);pa=oa&&oa.prototype;function ra(sa,ta){'use strict';pa.constructor.call(this,sa,ta);this.$PagesManagerMessagingDetailContainer1=o.getForFBID(sa.pageID);this.$PagesManagerMessagingDetailContainer2=p.getForFBID(sa.pageID);this.state={isContextCardEnabled:false,isLoading:false,isLoadingMore:false,isPageAdminNoteMode:false,messaginglist:[],preventScroll:false,hideContextCard:sa.config.hideContextCard,threadID:'',thread:{}};this.$PagesManagerMessagingDetailContainer3=ma((function(){if(this.props.height)this.$PagesManagerMessagingDetailContainer4(this.props.height);}).bind(this),50);}ra.getStores=function(){'use strict';return [z];};ra.calculateState=function(sa,ta){'use strict';var ua=[],va={},wa=null;if(ta.listItemKey){ua=z.getMessagelist(ta.pageID,ta.listItemKey);va=z.getReadReceipts(ta.listItemKey);wa=q.getForFBID(ta.pageID).getThreadMetaNow(ta.listItemKey);}var xa=z.isCardHidden();if(xa===null)xa=ta.config.hideContextCard;var ya=ta.config.enableContextCard&&wa&&wa.other_user_fbid&&i.isUser(wa.other_user_fbid);return {isContextCardEnabled:ya,hideContextCard:xa,isLoading:z.isLoading(),isLoadingMore:z.isLoadingMore(),isPageAdminNoteMode:sa?sa.isPageAdminNoteMode:false,scrollHeight:z.getScrollHeight(),messagelist:ua,readReceipts:va,threadID:ta.listItemKey,thread:wa};};ra.prototype.$PagesManagerMessagingDetailContainer4=function(sa){'use strict';var ta=ja.getElementDimensions(ga.findDOMNode(this.refs.threadTitle)).y,ua=ja.getElementDimensions(this.state.isPageAdminNoteMode?ga.findDOMNode(this.refs.noteComposer):ga.findDOMNode(this.refs.composer)).y,va=sa-ta-ua;if(va<0)va=0;y.setScrollAreaHeight(va);};ra.prototype.$PagesManagerMessagingDetailContainer5=function(sa,ta){'use strict';var ua=this.$PagesManagerMessagingDetailContainer1.getSeenTimestamps(sa),va=new ha(ua.keys());return ua.withMutations(function(wa){l.Seq(ta).reverse().forEach(function(xa){if(va.size===0)return false;if(!va.has(xa.author))return true;wa.update(xa.author,function(ya){return Math.max(ya,xa.timestamp);});va['delete'](xa.author);});});};ra.prototype.componentDidMount=function(){'use strict';ea.log(ba.MESSAGE_TAB_DETAIL_VIEW_DID_RENDER,this.props.perfParams);if(this.props.listItemKey)this.$PagesManagerMessagingDetailContainer6(this.props.listItemKey);};ra.prototype.componentWillReceiveProps=function(sa){'use strict';if(this.props.listItemKey!==sa.listItemKey)this.$PagesManagerMessagingDetailContainer6(sa.listItemKey);};ra.prototype.componentWillUpdate=function(sa){'use strict';if(sa.height!==this.props.height)this.$PagesManagerMessagingDetailContainer4(sa.height);};ra.prototype.getMessageStore=function(){'use strict';return this.$PagesManagerMessagingDetailContainer7;};ra.prototype.logMessageLoadingStart=function(){'use strict';var sa=Date.now();this.$PagesManagerMessagingDetailContainer8=this.props.pageID+String(Math.random()).slice(2)+'/'+sa;this.$PagesManagerMessagingDetailContainer9=true;t.notify(u.MESSAGES_MESSAGELIST_LOAD_START,this.props.pageID,{flowID:this.$PagesManagerMessagingDetailContainer8,page_id:this.props.pageID,loading_event_time:Date.now()});};ra.prototype.logMessageLoadingEnd=function(){'use strict';if(this.$PagesManagerMessagingDetailContainer9){this.$PagesManagerMessagingDetailContainer9=false;t.notify(u.MESSAGES_MESSAGELIST_LOAD_END,this.props.pageID,{flowID:this.$PagesManagerMessagingDetailContainer8,page_id:this.props.pageID,loading_event_time:Date.now()});}};ra.prototype.$PagesManagerMessagingDetailContainer6=function(sa){'use strict';this.$PagesManagerMessagingDetailContainer10&&this.$PagesManagerMessagingDetailContainer10.destroy();this.$PagesManagerMessagingDetailContainer11&&this.$PagesManagerMessagingDetailContainer11.release();this.$PagesManagerMessagingDetailContainer7=new n(sa,s.MessageLoadCount,this.props.pageID);var ta=z.getMessagelist(this.props.pageID,sa);if(ta.length===0){y.setIsLoadingMore(false);y.setIsLoading(true);this.logMessageLoadingStart();}var ua=this.$PagesManagerMessagingDetailContainer5(sa,ta);y.updateReadReceipts(this.props.pageID,sa,ua);this.$PagesManagerMessagingDetailContainer11=new ia();this.$PagesManagerMessagingDetailContainer11.addSubscriptions(this.$PagesManagerMessagingDetailContainer7.subscribe((function(va){this.logMessageLoadingEnd();y.setIsLoading(false);y.setIsLoadingMore(false);y.updateMessagelist(this.props.pageID,sa,va);}).bind(this)),this.$PagesManagerMessagingDetailContainer2.subscribe('threads-updated',(function(va,wa){if(wa[this.props.listItemKey])y.updateThread(this.props.pageID,this.props.listItemKey);}).bind(this)),this.$PagesManagerMessagingDetailContainer1.subscribe('change',(function(va,wa){if(wa[this.props.listItemKey]){var xa=z.getMessagelist(this.props.pageID,this.props.listItemKey),ya=this.$PagesManagerMessagingDetailContainer5(this.props.listItemKey,xa);y.updateReadReceipts(this.props.pageID,this.props.listItemKey,ya);}}).bind(this)));};ra.prototype.$PagesManagerMessagingDetailContainer12=function(){'use strict';var sa=w.getActiveFilterName();if(!this.props.listItemKey||sa===r.UNREAD)return;ca.handleUnreadStateUpdate(this.props.listItemKey,this.props.pageID,sa);ca.handlePermalinkUpdate(this.props.listItemKey,this.props.pageID);};ra.prototype.$PagesManagerMessagingDetailContainer13=function(){'use strict';if(!this.state.isLoadingMore)if(this.getMessageStore().fetchMoreMessages()){y.setIsLoading(false);y.setIsLoadingMore(true);}};ra.prototype.$PagesManagerMessagingDetailContainer14=function(){'use strict';return (fa.createElement(x,babelHelpers._extends({},this.props,{initLoading:this.state.isLoading,isLoadingMore:this.state.isLoadingMore,messagelist:l.List(this.state.messagelist),fetchEarlierMessages:(function(){return this.$PagesManagerMessagingDetailContainer13();}).bind(this),readReceipts:this.state.readReceipts,scrollHeight:this.state.scrollHeight,threadID:this.state.threadID,thread:this.state.thread})));};ra.prototype.$PagesManagerMessagingDetailContainer15=function(){'use strict';if(!this.state.isContextCardEnabled)return null;return (fa.createElement(qa,{alignv:'middle',className:"_2utd"+(this.state.hideContextCard?' '+"hidden_elem":'')},fa.createElement(h,{bootloadPlaceholder:fa.createElement('div',{className:"hidden_elem"}),bootloadLoader:m('PagesMessengerContextCardContainer.react'),pageID:this.props.pageID,userID:this.state.thread&&this.state.thread.other_user_fbid,scrollHeight:this.state.scrollHeight})));};ra.prototype.$PagesManagerMessagingDetailContainer16=function(){'use strict';if(!this.props.config.enableNotes)return null;var sa=na._("Add Note");return (fa.createElement('div',{className:"_iif"},fa.createElement(ka,{label:sa,onClick:(function(ta){return this.setState({isPageAdminNoteMode:true});}).bind(this)})));};ra.prototype.$PagesManagerMessagingDetailContainer17=function(){'use strict';this.setState({isPageAdminNoteMode:false});};ra.prototype.$PagesManagerMessagingDetailContainer18=function(){'use strict';return (this.props.config.enableComposer&&!this.state.isPageAdminNoteMode);};ra.prototype.$PagesManagerMessagingDetailContainer19=function(){'use strict';return (this.props.config.enableComposer&&this.state.isPageAdminNoteMode);};ra.prototype.render=function(){'use strict';return (fa.createElement('div',null,fa.createElement(da,{pageID:this.props.pageID,isContextCardEnabled:this.state.isContextCardEnabled,isContextCardHidden:this.state.hideContextCard,onIconClick:(function(){return this.$PagesManagerMessagingDetailContainer20();}).bind(this),ref:'threadTitle',thread:this.state.thread}),fa.createElement(k,{alignv:'top',className:"_2utb",cols:this.state.isContextCardEnabled?2:1},fa.createElement(qa,{className:"_2utc"},this.$PagesManagerMessagingDetailContainer14(),this.$PagesManagerMessagingDetailContainer16()),this.$PagesManagerMessagingDetailContainer15()),fa.createElement('div',{className:!this.$PagesManagerMessagingDetailContainer18()?"hidden_elem":''},fa.createElement(v,{canUseOmnipicker:this.props.config.enableOmnipicker,creatorInfo:this.props.config.creatorInfo,onMessageOrAttachmentUpdate:(function(){return this.$PagesManagerMessagingDetailContainer3();}).bind(this),onFocus:(function(){return this.$PagesManagerMessagingDetailContainer12();}).bind(this),recipientID:this.state.thread?this.state.thread.other_user_fbid.toString():null,ref:'composer',threadElementID:this.state.threadID,threadID:this.state.threadID,userID:this.props.pageID})),fa.createElement('div',{className:!this.$PagesManagerMessagingDetailContainer19()?"hidden_elem":''},fa.createElement(aa,{creatorInfo:this.props.config.creatorInfo,key:'notecomposer',onDisablePageAdminNoteMode:(function(){return (this.$PagesManagerMessagingDetailContainer17());}).bind(this),onMessageOrAttachmentUpdate:(function(){return this.$PagesManagerMessagingDetailContainer3();}).bind(this),ref:'noteComposer',threadID:this.state.threadID,userID:this.props.pageID}))));};f.exports=j.create(ra,{withProps:true});},null);
__d('PagesManagerMessagingFilterActions',['PagesManagerActionType','PagesManagerMessagingThreadlistDispatcher','PagesManagerMessagingThreadlistAction','PagesManagerNavigationUnit'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={changeFilter:function(m,n){i.dispatch({unit:n,pageID:m,type:h.NAVIGATION_UNIT.CHANGE});j.resetSearch(m);},notifyNotificationCountChanged:function(m){i.dispatch({pageID:m,type:h.NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE});}};f.exports=l;},null);
__d('PagesManagerMessagingNotificationCountSubscriber',['Map','MercuryThreadInformer','PagesManagerMessagingFilterActions'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={_pageIDTokenMap:new h(),enableRealtimeNotificationCountUpdates:function(l){var m=k._pageIDTokenMap;if(m.has(l))return;var n=i.getForFBID(l),o=n.subscribe('unread-updated',function(p,q){j.notifyNotificationCountChanged(l);});m.set(l,o);},disableRealtimeNotificationCountUpdates:function(l){var m=k._pageIDTokenMap;if(!m.has(l))return;var n=m.get(l);i.getForFBID(l).unsubscribe(n);m['delete'](n);}};f.exports=k;},null);
__d('PagesManagerNavigationView.react',['ContextualDialogArrow','ContextualLayerAutoFlip','Map','PagesManagerNavigationUnit','PopoverMenu.react','React','ReactXUIMenu','cx','invariant','immutable'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=n.Item,t=c('immutable').List;q=babelHelpers.inherits(u,m.Component);r=q&&q.prototype;function u(v,w){'use strict';r.constructor.call(this,v,w);this.$PagesManagerNavigationView1=this.$PagesManagerNavigationView1.bind(this);this.$PagesManagerNavigationView2=this.$PagesManagerNavigationView2.bind(this);}u.prototype.$PagesManagerNavigationView3=function(v){'use strict';var w=this.$PagesManagerNavigationView4(v,this.props.tabbarUnits);if(w)return w;w=this.$PagesManagerNavigationView4(v,this.props.dropdownUnits);if(w)return w;p(0);};u.prototype.$PagesManagerNavigationView4=function(v,w){'use strict';var x=w.filter(function(y){return y.getKey()===v;});if(x.count()>0)return x.get(0);};u.prototype.$PagesManagerNavigationView1=function(v,w){'use strict';this.props.onUnitSelected(this.$PagesManagerNavigationView3(w.item.getValue()));};u.prototype.render=function(){'use strict';return (m.createElement('div',{className:"_-7a"},this.$PagesManagerNavigationView5(),this.$PagesManagerNavigationView6()));};u.prototype.$PagesManagerNavigationView2=function(v){'use strict';return (m.createElement(s,{key:v.getKey(),value:v.getKey()},m.createElement('div',{className:"_-7b"},v.getDisplayTitle())));};u.prototype.$PagesManagerNavigationView5=function(){'use strict';if(this.props.dropdownUnits.size===0||!this.props.activeDropdownUnit)return null;var v=m.createElement(n,{onItemClick:this.$PagesManagerNavigationView1},this.props.dropdownUnits.map(this.$PagesManagerNavigationView2));return (m.createElement(l,{layerBehaviors:[h,i],menu:v},m.createElement('div',{className:"_-7c"},this.props.activeDropdownUnit.getDisplayTitle())));};u.prototype.$PagesManagerNavigationView7=function(v){'use strict';var w=this.props.unitNotificationCountMap.get(v);return (m.createElement('div',babelHelpers._extends({},this.props,{className:"_-7d"+(' '+"_-7e")+(v===this.props.activeTabbarUnit?' '+"_-7f":''),onClick:(function(){return this.props.onUnitSelected(v);}).bind(this),key:v.getKey()}),m.createElement('div',{className:"_-7g _-7e"},v.getDisplayTitle().toString().toUpperCase()),m.createElement('div',{className:"_-7h"+(' '+"_-7e")+(w===0?' '+"hidden_elem":'')},w)));};u.prototype.$PagesManagerNavigationView6=function(){'use strict';return this.props.tabbarUnits.map((function(v){return this.$PagesManagerNavigationView7(v);}).bind(this));};f.exports=u;},null);
__d('PagesManagerMessagingFilterContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','Map','PagesManagerMessagingFilterActions','PagesManagerMessagingNotificationCountSubscriber','PagesManagerNavigationUnit','PagesManagerNavigationView.react','React','immutable'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';var r=c('immutable').List;p=babelHelpers.inherits(s,o.Component);q=p&&p.prototype;function s(t){q.constructor.call(this,t);this.$PagesManagerMessagingFilterContainer1=(function(u){k.changeFilter(this.props.pageID,u);}).bind(this);}s.getStores=function(){return [h];};s.calculateState=function(t,u){return {activeFolder:h.getActiveFolder(),activeFilter:h.getActiveFilter(),folders:h.getAvailableFolders(),filters:h.getAvailableFilters(),unitNotificationCountMap:h.getUnitNotificationCountMap(u.pageID)};};s.prototype.componentWillMount=function(){l.enableRealtimeNotificationCountUpdates(this.props.pageID);};s.prototype.componentWillUnmount=function(){l.disableRealtimeNotificationCountUpdates(this.props.pageID);};s.prototype.render=function(){return (o.createElement(n,{activeDropdownUnit:this.state.activeFolder,activeTabbarUnit:this.state.activeFilter,tabbarUnits:this.state.filters,dropdownUnits:this.state.folders,unitNotificationCountMap:this.state.unitNotificationCountMap,onUnitSelected:this.$PagesManagerMessagingFilterContainer1}));};f.exports=i.create(s,{withProps:true});},null);
__d('PagesManagerMessagingBatchActionHeader.react',['PagesManagerMessagingBatchActionMenu.react','PagesMessagingActionPlacement','React','XUIPopoverButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';n=babelHelpers.inherits(p,j.Component);o=n&&n.prototype;p.prototype.render=function(){return (j.createElement(h,babelHelpers._extends({layerBehaviors:[],placement:i.THREAD_LIST_BATCH_ACTION},this.props),j.createElement(k,{className:"_3640",label:m._("Actions")})));};function p(){n.apply(this,arguments);}f.exports=p;},null);
__d('PagesManagerMessagingBatchActionHeaderContainer.react',['FluxContainer','MercuryPageThreadActions','MercuryThreads','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingBatchActionHeader.react','PagesManagerMessagingFilterStore','PagesMessengerThreadUtils','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,o.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);this.$PagesManagerMessagingBatchActionHeaderContainer1=i.getForFBID(s.pageID);}r.getStores=function(){return [m];};r.calculateState=function(s,t){var u=m.getActiveFolderName(),v=m.getActiveFilterName(),w=j.getForFBID(t.pageID),x=false,y=false,z=false,aa=false,ba=false,ca=false,da=false,ea=false,fa=false,ga=0,ha=0;t.selectedRows.forEach(function(ja){var ka=w.getThreadMetaNow(ja);if(n.isFlagThread(ka))ga++;if(ka&&ka.unread_count===0)ha++;});var ia=t.selectedRows.length;if(u===k.FOLDERS.INBOX&&v===k.FILTERS.ALL){x=true;aa=true;ca=ia-ga>0;da=ga>0;ea=ha<ia;fa=ha>0;}else if(u===k.FOLDERS.ARCHIVED&&v===k.FILTERS.ALL){y=true;z=true;}else if(u===k.FOLDERS.SPAM&&v===k.FILTERS.ALL){ba=true;}else if(v===k.FILTERS.FLAGGED&&u===k.FOLDERS.INBOX){da=true;}else if(v===k.FILTERS.UNREAD&&u===k.FOLDERS.INBOX)ea=true;return {inlineActionParam:{showArchive:x,showDelete:y,showUnarchive:z,showSpam:aa,showUnspam:ba,showFlag:ca,showUnflag:da,showMarkRead:ea,showMarkUnread:fa}};};r.prototype.$PagesManagerMessagingBatchActionHeaderContainer2=function(){this.props.onSelectionClear();};r.prototype.render=function(){return (o.createElement(l,babelHelpers._extends({onSelectionClear:(function(){return this.$PagesManagerMessagingBatchActionHeaderContainer2();}).bind(this),pageID:this.props.pageID,showBatchAction:this.props.showBatchAction,selectedRows:this.props.selectedRows},this.state)));};f.exports=h.create(r,{withProps:true});},null);
__d('PagesManagerAwayToggle.react',['PagesManagerAwayToggleAction','BUISwitch.react','React','Tooltip','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,j.Component);o=n&&n.prototype;p.prototype.$PagesManagerAwayToggle1=function(q){'use strict';h.setToggleStatus(this.props.pageID,q);};p.prototype.render=function(){'use strict';var q=m._("Stepping out? Set your status to Away for 12 hours. Change it if you get back sooner."),r=m._(["Away","8e0d60b5f4f0e61653bc5fce6cfff526"]);return (j.createElement('div',{className:"_4cdp"},j.createElement('div',{className:"_ast"},j.createElement(i,babelHelpers._extends({onToggle:(function(s){return this.$PagesManagerAwayToggle1(s);}).bind(this),value:this.props.isAway},k.propsFor(q)))),j.createElement('div',{className:"_asu"},r.toUpperCase())));};function p(){'use strict';n.apply(this,arguments);}f.exports=p;},null);
__d('MercuryPageThreadTitle.react',['DOM','MercuryMessageRenderer','MercuryThreadTitle.react','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';m=babelHelpers.inherits(o,j);n=m&&m.prototype;o.prototype.render=function(){return (k.createElement('div',{className:this.props.className},k.createElement('span',{ref:'title'})));};o.prototype.componentDidUpdate=function(){var p=this.props.thread.name?this.$MercuryPageThreadTitle1():this.state.participantNames;if(this.props.useHighlightTitle){var q=p.search(this.props.highlightText),r={};r[q]=this.props.highlightText;p=i.formatMessageBody(p,r);}h.setContent(l.findDOMNode(this.refs.title),p);};function o(){m.apply(this,arguments);}o.defaultProps={isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};f.exports=o;},null);
__d('PagesManagerMessagingListRow.react',['ContextualDialogArrow','ContextualLayerAutoFlip','Image.react','Layout.react','MercurySeenIndicator.react','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryPageThreadTitle.react','PagesMessagingActionPlacement','PagesSelectableListRow.react','PagesManagerMessagingBatchActionMenu.react','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w,x=k.Column,y=k.FillColumn;v=babelHelpers.inherits(z,s.Component);w=v&&v.prototype;function z(aa){'use strict';w.constructor.call(this,aa);this.state={menuShown:false};}z.prototype.render=function(){'use strict';return (s.createElement(q,{onSelected:this.props.onSelected,selected:this.props.selected,className:"_1a_0"+(this.props.isUnread?' '+"_1a_1":'')+(this.props.isViewing?' '+"_3wxb":'')+(this.state.menuShown?' '+"_1hgw":'')},s.createElement('div',{className:"_5x5y"+(!this.props.isFlagged?' '+"hidden_elem":'')}),s.createElement('div',{className:"_o3f",onClick:(function(){return this.props.onViewingListItem(this.props.listItem);}).bind(this)},s.createElement(k,null,s.createElement(x,null,s.createElement(o,{className:"_1a_3",highlightText:this.props.highlightText,showUnreadCount:false,thread:this.props.thread,useShortName:false,useHighlightTitle:this.props.useHighlightTitle,viewer:this.props.pageID})),s.createElement(y,null),s.createElement(x,{className:"_55hu"+(this.props.isFlagged?' '+"_1hog":'')},s.createElement(n,{time:this.props.thread.timestamp,title:this.props.thread.timestamp_absolute,text:this.props.thread.timestamp_relative})))),s.createElement(k,{className:"_1a_6 _o3f",onClick:(function(event){return this.props.onViewingListItem(this.props.listItem);}).bind(this)},s.createElement(x,{className:"_1hgx"},s.createElement(l,{thread:this.props.thread,viewer:this.props.pageID})),s.createElement(y,{className:"_1a_7"},s.createElement(m,{participants:this.props.participants,shouldRenderYou:false,thread:this.props.thread,viewer:this.props.pageID})),s.createElement(x,null,s.createElement(r,{alignh:'right',layerBehaviors:[h,i],onHide:(function(){this.setState({menuShown:false});}).bind(this),onShow:(function(){this.setState({menuShown:true});}).bind(this),pageID:this.props.pageID,inlineActionParam:this.props.inlineActionParam,placement:p.THREAD_ROW_ACTION_ICON,selectedRows:[this.props.thread.thread_id],showBatchAction:true},s.createElement('span',{className:"_4hq1",onClick:function(event){return event.stopPropagation();}}))))));};z.defaultProps={useHighlightTitle:false};f.exports=z;},null);
__d('PagesManagerMessagingListRowContainer.react',['immutable','PagesManagerMessagingListRow.react','MercuryParticipants','MercuryThreads','PagesManagerMessagingFilterStore','PagesManagerMessagingThreadInteractionHelper','PagesMessengerThreadUtils','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q,r=h.Map;p=babelHelpers.inherits(s,o.Component);q=p&&p.prototype;function s(t){'use strict';q.constructor.call(this,t);this.$PagesManagerMessagingListRowContainer1=this.$PagesManagerMessagingListRowContainer1.bind(this);}s.prototype.componentWillMount=function(){'use strict';var t=k.getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);this.setState({inlineActionParam:n.getBatchActionMenuParam(t),thread:t,participants:r(h.Seq(t.participants).map(function(u){return [u,j.getOrFetch(u)];}))});};s.prototype.render=function(){'use strict';var t=this.state.thread.unread_count&&this.state.thread.unread_count>0,u=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.flagged,v=this.props,w=v.onViewingListItem,x=babelHelpers.objectWithoutProperties(v,['onViewingListItem']);return (o.createElement(i,babelHelpers._extends({isFlagged:u,isUnread:t,onViewingListItem:this.$PagesManagerMessagingListRowContainer1,thread:this.state.thread},x,this.state)));};s.prototype.updateThread=function(){'use strict';var t=k.getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);this.setState({thread:t,inlineActionParam:n.getBatchActionMenuParam(t)});};s.prototype.$PagesManagerMessagingListRowContainer1=function(t){'use strict';m.handleUnreadStateUpdate(t,this.props.pageID,l.getActiveFilterName());m.handlePermalinkUpdate(t,this.props.pageID);this.props.onViewingListItem(t);};s.defaultProps={useHighlightTitle:false};f.exports=s;},null);
__d('PagesManagerMessagingSearchListResult.react',['Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','React','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,l.Component);q=p&&p.prototype;r.prototype.$PagesManagerMessagingSearchListResult1=function(s){'use strict';j.viewListItem(s);};r.prototype.getNameResultKey=function(s){'use strict';return 'NameResult:'+s;};r.prototype.getSnippetResultKey=function(s){'use strict';return 'SnippetResult:'+s;};r.prototype.$PagesManagerMessagingSearchListResult2=function(){'use strict';var s=l.createElement('li',{className:"_3o39",key:'nameSearchTitle'},o._("Showing results for name: {message search term}",[o.param('message search term',this.props.searchTerm)])),t=this.props.nameSearchResult.map((function(y){return (l.createElement(i,{ChildClass:this.props.listRowContainer,listItem:y,pageID:this.props.pageID,ref:this.getNameResultKey(y),key:this.getNameResultKey(y),onViewingListItem:this.$PagesManagerMessagingSearchListResult1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'}));}).bind(this)),u=this.props.hasMoreNameSearchResult&&!this.props.isSearchingName?l.createElement('li',{className:"_3o39",key:'loadMoreNameResult'},l.createElement(h,{onClick:this.props.loadMoreNameResult},o._("Load Older Threads"))):l.createElement('li',{className:"_3o39"}),v=l.createElement('li',{className:"_3o39",key:'snippetSearchTitle'},o._("Showing results for message: {message search term}",[o.param('message search term',this.props.searchTerm)])),w=[];Object.keys(this.props.snippetSearchResult).forEach((function(y){w.push(l.createElement(i,{ChildClass:this.props.listRowContainer,listItem:y,pageID:this.props.pageID,ref:this.getSnippetResultKey(y),key:this.getSnippetResultKey(y),onViewingListItem:this.$PagesManagerMessagingSearchListResult1,highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'}));}).bind(this));var x=this.props.hasMoreSnippetSearchResult&&!this.props.isSearchingSnippet?l.createElement('li',{className:"_3o39",key:'loadMoreSnippetResult'},l.createElement(h,{onClick:this.props.loadMoreSnippetResult},o._("Load Older Threads"))):l.createElement('li',{className:"_3o39"});return [s].concat(t,[u,v],w,[x]);};r.prototype.render=function(){'use strict';var s=this.$PagesManagerMessagingSearchListResult2();return (l.createElement(k,{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',enableOnVisible:false,forceRequestMoreRows:false,height:this.props.height,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:n,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false},s));};function r(){'use strict';p.apply(this,arguments);}f.exports=r;},null);
__d('PagesManagerMessagingThreadlistStore',['AbstractPagesManagerListStore','PagesManagerActionType','MercuryOrderedThreadlist','MercuryThreadlistConstants','PagesManagerDispatcher','PagesManagerMessagingFilterStore','PagesManagerMessagingThreadlistDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,h);p=o&&o.prototype;function q(){'use strict';p.constructor.call(this,n);}q.prototype.$PagesManagerMessagingThreadlistStore1=function(r,s){'use strict';var t=j.getForFBID(r);return t.hasLoadedThreadlist(m.getActiveFolderName(),m.getActiveFilterName())||t.getThreadCount(m.getActiveFolderName(),m.getActiveFilterName())>=s;};q.prototype.$PagesManagerMessagingThreadlistStore2=function(r,s,t){'use strict';var u=j.getForFBID(r);u.getFilteredThreadlist(s,t+1,m.getActiveFolderName(),m.getActiveFilterName(),(function(v){var w=v.length>t;this.$PagesManagerMessagingThreadlistStore3(w);}).bind(this));};q.prototype.$PagesManagerMessagingThreadlistStore4=function(r){'use strict';var s=j.getForFBID(r);return s.getAvailableThreadlistNow(m.getActiveFolderName(),m.getActiveFilterName());};q.prototype.__handleListFetch=function(r){'use strict';var s=r.pageID,t=r.offset,u=r.limit;this.__isLoading=true;var v=this.$PagesManagerMessagingThreadlistStore1(s,t+u);if(v){this.$PagesManagerMessagingThreadlistStore3(this.__hasMoreItem.get(m.getNavigationKey()));}else this.$PagesManagerMessagingThreadlistStore2(s,t,u);this.__emitChange();};q.prototype.__handleNavigationUnitChange=function(r){'use strict';n.waitFor([m.getDispatchToken()]);this.__handleListFetch({pageID:r.pageID,offset:0,limit:k.WEBMESSENGER_THREAD_COUNT});};q.prototype.$PagesManagerMessagingThreadlistStore3=function(r){'use strict';this.__isLoading=false;this.__hasMoreItem.set(m.getNavigationKey(),r);if(!this.__dispatcher.isDispatching())this.__dispatcher.dispatch({type:i.LIST.FETCHED});};q.prototype.getItemList=function(r){'use strict';var s=this.$PagesManagerMessagingThreadlistStore4(r),t=m.getNavigationKey();return this.hasMoreItem(t)&&s.length>0?s.slice(0,s.length-1):s;};f.exports=new q(l);},null);
__d('PagesManagerMessagingListContainer.react',['PagesManagerMessagingBatchActionHeaderContainer.react','FluxContainer','PagesManagerListBatchActionContainer.react','MercuryThreadlistConstants','MessageThreadViewSource','PagesEventObserver','PagesEventType','PagesManagerAction','PagesManagerAwayContainer.react','PagesManagerAwayToggle.react','PagesManagerListView.react','PagesManagerMessagingFilterStore','PagesManagerMessagingListRowContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingNUXActions','PagesManagerMessagingSearchListResult.react','PagesManagerMessagingSearchStore','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadlistAction','PagesManagerMessagingThreadlistStore','PagesManagerPerfLogger','PagesManagerStore','React','SubscriptionsHandler','MercuryThreadInformer'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha,ia;ha=babelHelpers.inherits(ja,ea.Component);ia=ha&&ha.prototype;function ja(ka){'use strict';ia.constructor.call(this,ka);this.$PagesManagerMessagingListContainer1=false;this.$PagesManagerMessagingListContainer2=(function(){this.refs.listView.clearSelection();}).bind(this);this.$PagesManagerMessagingListContainer3=this.$PagesManagerMessagingListContainer3.bind(this);this.$PagesManagerMessagingListContainer4=this.$PagesManagerMessagingListContainer4.bind(this);}ja.getStores=function(){'use strict';return [ba,s,x];};ja.calculateSearchState=function(ka,la){'use strict';var ma=x.getThreadNameSearchResults(),na=x.getIsSearchingName(),oa=x.hasMoreNameSearchResult(),pa=x.hasMoreSnippetSearchResult(),qa=x.getThreadSnippetSearchResults(),ra=x.getIsSearchingSnippet();if(la.config.enableFullSearch){return {hasMoreNameSearchResult:oa,hasMoreSnippetSearchResult:pa,isInSearchMode:true,isSearchingName:na,isSearchingSnippet:ra,nameSearchResult:ma,threadSnippetResult:qa,searchTerm:x.getCurrentSearchTerm()};}else return {hasMoreItem:false,initLoading:false,isInSearchMode:true,threadIDList:ma,emptyView:ea.createElement('div',{key:'emptyView'})};};ja.calsulateListState=function(ka,la){'use strict';var ma=ba.getItemList(la.pageID,s.getActiveFilter()),na=ba.hasMoreItem(s.getNavigationKey()),oa=ma.findIndex(function(xa){return (xa===da.getViewingListItem());})>=0,pa=da.getInitialViewingItem(),qa=da.getViewingListItem(),ra=ma.length>0,sa=pa&&pa===qa,ta=!sa&&(!qa&&ra||qa&&ra&&!oa);if(ta){var ua=ma[0];o.viewListItem(ua);z.handlePermalinkUpdate(ua,la.pageID);}var va=ba.isLoading(),wa=false;if(ma.length===0)wa=va;return {hasMoreItem:na,initLoading:wa,isInSearchMode:false,threadIDList:ma,emptyView:ea.createElement('div',{key:'emptyView'})};};ja.calculateState=function(ka,la){'use strict';var ma=null;if(x.getIsInSearchMode()&&x.getCurrentSearchTerm().length>0){ma=ja.calculateSearchState(ka,la);}else ma=ja.calsulateListState(ka,la);if(ka&&ka.initLoading&&!ma.initLoading)v.setThreadlistReady();return ma;};ja.prototype.componentDidUpdate=function(){'use strict';if(this.$PagesManagerMessagingListContainer1&&!this.state.initLoading){this.$PagesManagerMessagingListContainer1=false;m.notify(n.MESSAGES_INBOX_LOAD_END,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});}};ja.prototype.componentDidMount=function(){'use strict';ca.log(y.MESSAGE_TAB_THREAD_LIST_DID_RENDER,this.props.perfParams);aa.initThreadlist(this.props.pageID,s.getActiveFilter());m.notify(n.MESSAGES_THREADLIST_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});u.logPageViewFolderEvent(this.props.pageID,s.getActiveFolder(),l.NEW_MESSAGETAB);this.$PagesManagerMessagingListContainer1=true;this.$PagesManagerMessagingListContainer5=ga.getForFBID(this.props.pageID);this.$PagesManagerMessagingListContainer6=new fa();this.$PagesManagerMessagingListContainer6.addSubscriptions(this.$PagesManagerMessagingListContainer5.subscribe('threadlist-updated',(function(ka,la){return this.$PagesManagerMessagingListContainer7();}).bind(this)),this.$PagesManagerMessagingListContainer5.subscribe('threads-updated',(function(ka,la){return this.$PagesManagerMessagingListContainer8(Object.keys(la));}).bind(this)));};ja.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerMessagingListContainer6&&this.$PagesManagerMessagingListContainer6.release();};ja.prototype.$PagesManagerMessagingListContainer9=function(ka){'use strict';return ka;};ja.prototype.$PagesManagerMessagingListContainer3=function(){'use strict';aa.loadMoreNameResult(this.props.pageID,this.state.searchTerm,s.getActiveFolderName());};ja.prototype.$PagesManagerMessagingListContainer4=function(){'use strict';aa.loadMoreSnippetResult(this.props.pageID,this.state.searchTerm,s.getActiveFolderName());};ja.prototype.$PagesManagerMessagingListContainer10=function(){'use strict';var ka=s.getNavigationKey();if(ba.hasMoreItem(ka)&&!ba.isLoading()&&!this.state.isInSearchMode)aa.fetchThreadlist(this.props.pageID,this.state.threadIDList.length,k.WEBMESSENGER_MORE_COUNT);};ja.prototype.$PagesManagerMessagingListContainer7=function(){'use strict';aa.updateThreadlist(this.props.pageID);};ja.prototype.$PagesManagerMessagingListContainer8=function(ka){'use strict';ka.forEach((function(la){if(this.refs.searchResult){var ma=this.refs.searchResult.refs[this.refs.searchResult.getNameResultKey(la)];if(ma)ma.refs.childClass.updateThread();return;}else if(this.refs.listView){var na=this.refs.listView.refs[la];if(na)na.refs.childClass.updateThread();}}).bind(this));};ja.prototype.$PagesManagerMessagingListContainer11=function(){'use strict';var ka=null;if(this.props.config.enableAwayToggle)ka=ea.createElement(p,{pageID:this.props.pageID,RenderClass:q});return (ea.createElement('div',null,ea.createElement(j,{ChildClass:h,pageID:this.props.pageID,onSelectionClear:this.$PagesManagerMessagingListContainer2}),ka));};ja.prototype.render=function(){'use strict';if(this.state.isInSearchMode&&this.props.config.enableFullSearch)return (ea.createElement(w,babelHelpers._extends({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer11(),getKey:this.$PagesManagerMessagingListContainer9,hasMoreNameSearchResult:this.state.hasMoreNameSearchResult,hasMoreSnippetSearchResult:this.state.hasMoreSnippetSearchResult,isSearchingName:this.state.isSearchingName,isSearchingSnippet:this.state.isSearchingSnippet,listRowContainer:t,loadMoreNameResult:this.$PagesManagerMessagingListContainer3,loadMoreSnippetResult:this.$PagesManagerMessagingListContainer4,nameSearchResult:this.state.nameSearchResult,onSelectionChange:this.props.onSelectionChange,ref:'searchResult',searchTerm:this.state.searchTerm,snippetSearchResult:this.state.threadSnippetResult})));return (ea.createElement(r,babelHelpers._extends({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer11(),emptyView:this.state.emptyView,getKey:this.$PagesManagerMessagingListContainer9,hasMoreItem:this.state.hasMoreItem,initLoading:this.state.initLoading,isInSearchMode:this.state.isInSearchMode,list:this.state.threadIDList,listRowContainer:t,navigationKey:s.getNavigationKey(),onScroll:this.$PagesManagerMessagingListContainer10.bind(this),onSelectionChange:this.props.onSelectionChange,ref:'listView'})));};f.exports=i.create(ja,{withProps:true});},null);
__d("XPagesManagerMessagingTutorialController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/manager\/messaging\/tutorial\/",{});},null);
__d('PagesManagerMessagingNuxBanner.react',['ActorURI','AsyncRequest','LeftRight.react','PagesManagerMessagingNUXActions','React','XPagesManagerMessagingTutorialController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,l.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);this.$PagesManagerMessagingNuxBanner1=(function(){k.setShouldShowBanner(false);this.$PagesManagerMessagingNuxBanner2('REMIND_LATER');}).bind(this);this.$PagesManagerMessagingNuxBanner3=(function(){k.setIsVisible(true);this.$PagesManagerMessagingNuxBanner2('SHOW_TUTORIAL');}).bind(this);}r.prototype.render=function(){return (l.createElement(j,{className:"_3az9"},l.createElement('div',{className:"_3aze"},o._("{=meet your new inbox} We've made it easier to connect with the people who like your Page.",[o.param('=meet your new inbox',l.createElement('span',{className:"_3azg"},o._("Meet your new Inbox.")))])),l.createElement('div',{className:"_3azh"},l.createElement('div',{className:"_3aze _3azi",onClick:this.$PagesManagerMessagingNuxBanner1},o._("Remind Me Later")),l.createElement('div',{className:"_3aze _3azg _3azi",onClick:this.$PagesManagerMessagingNuxBanner3},o._("Start Tour")))));};r.prototype.$PagesManagerMessagingNuxBanner2=function(s){var t=h.create(m.getURIBuilder().getURI(),this.props.pageID);new i().setURI(t).setMethod('POST').setData({action:s}).send();};f.exports=r;},null);
__d('PagesManagerMessagingNUXInboxTour.react',['DOMQuery','NuxTour.react','NuxTourContextualStep.react','React','csx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=k.PropTypes,q=321;n=babelHelpers.inherits(r,k.Component);o=n&&n.prototype;function r(s){o.constructor.call(this,s);}r.prototype.$PagesManagerMessagingNUXInboxTour1=function(s,t,u){return {context:h.find(this.props.rootElement,s),focusContext:true,isContextual:true,position:u,render:t};};r.prototype.$PagesManagerMessagingNUXInboxTour2=function(){var s=[null,this.$PagesManagerMessagingNUXInboxTour1("._14vf",this.$PagesManagerMessagingNUXInboxTour3,'right'),this.$PagesManagerMessagingNUXInboxTour1(".__1d",this.$PagesManagerMessagingNUXInboxTour4,'left')];if(this.props.shouldShowContextCardStep)s.push(this.$PagesManagerMessagingNUXInboxTour1("._2utd",this.$PagesManagerMessagingNUXInboxTour5,'left'));return s;};r.prototype.$PagesManagerMessagingNUXInboxTour4=function(){var s=m._("More Intuitive Responding"),t=m._("Compose messages, share attachments and interact with people from a single, familiar place alongside conversations.");return (k.createElement(j,{showCloseButton:false,title:s},t));};r.prototype.$PagesManagerMessagingNUXInboxTour5=function(){var s=m._("Know More About Who You're Messaging"),t=m._("To help you have more personalized conversations, we've put all the basic information about who you're talking to next to the thread.");return (k.createElement(j,{showCloseButton:false,title:s},t));};r.prototype.$PagesManagerMessagingNUXInboxTour3=function(){var s=m._("Single, Organized View"),t=m._("We've made managing conversations simpler. Now you can flag conversations to follow up later and quickly see the ones that need your attention.");return (k.createElement(j,{showCloseButton:false,title:s},t));};r.prototype.render=function(){return (k.createElement(i,{contextualWidth:q,initialStep:this.props.initialStep||1,onHide:this.props.onHide,onCompleted:this.props.onCompleted,onNotNowClicked:this.props.onNotNow,steps:this.$PagesManagerMessagingNUXInboxTour2(),visible:true}));};r.propTypes={initialStep:p.number,onCompleted:p.func,onHide:p.func.isRequired,onNotNow:p.func,onStepChange:p.func,rootElement:p.object.isRequired};f.exports=r;},null);
__d('PagesManagerMessagingNUXStore',['PagesManagerMessagingNUXActionTypes','FluxStore','PagesManagerMessagingNUXDispatcher'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';var m=1;k=babelHelpers.inherits(n,i);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$PagesManagerMessagingNUXStore1={composer:false,contextcard:false,threadlist:false};this.$PagesManagerMessagingNUXStore2=false;this.$PagesManagerMessagingNUXStore3=false;this.$PagesManagerMessagingNUXStore4=false;this.$PagesManagerMessagingNUXStore5=m;}n.prototype.getAreDependenciesReady=function(){return (this.$PagesManagerMessagingNUXStore1.composer&&(!this.$PagesManagerMessagingNUXStore4||this.$PagesManagerMessagingNUXStore4&&this.$PagesManagerMessagingNUXStore1.contextcard)&&this.$PagesManagerMessagingNUXStore1.threadlist);};n.prototype.getIsVisible=function(){return this.$PagesManagerMessagingNUXStore2;};n.prototype.getTourStep=function(){return this.$PagesManagerMessagingNUXStore5;};n.prototype.getShouldShowBanner=function(){return this.$PagesManagerMessagingNUXStore3;};n.prototype.__onDispatch=function(o){switch(o.actionType){case h.RESET_STEP:this.$PagesManagerMessagingNUXStore6();this.__emitChange();break;case h.SET_STEP:this.$PagesManagerMessagingNUXStore7(o.step);break;case h.SET_IS_VISIBLE:this.$PagesManagerMessagingNUXStore8(o.isVisible);this.__emitChange();break;case h.SET_SHOULD_SHOW_BANNER:this.$PagesManagerMessagingNUXStore9(o.shouldShow);this.__emitChange();break;case h.SET_SHOULD_SHOW_CONTEXT_CARD_STEP:this.$PagesManagerMessagingNUXStore10(o.shouldShow);this.__emitChange();break;case h.SET_DEPENDENCY_READY.COMPOSER:if(!this.$PagesManagerMessagingNUXStore1.composer){this.$PagesManagerMessagingNUXStore11();this.__emitChange();}break;case h.SET_DEPENDENCY_READY.CONTEXT_CARD:if(!this.$PagesManagerMessagingNUXStore1.contextcard){this.$PagesManagerMessagingNUXStore12();this.__emitChange();}break;case h.SET_DEPENDENCY_READY.THREADLIST:if(!this.$PagesManagerMessagingNUXStore1.threadlist){this.$PagesManagerMessagingNUXStore13();this.__emitChange();}break;}};n.prototype.$PagesManagerMessagingNUXStore6=function(){this.$PagesManagerMessagingNUXStore5=m;};n.prototype.$PagesManagerMessagingNUXStore11=function(){this.$PagesManagerMessagingNUXStore1.composer=true;};n.prototype.$PagesManagerMessagingNUXStore12=function(){this.$PagesManagerMessagingNUXStore1.contextcard=true;};n.prototype.$PagesManagerMessagingNUXStore13=function(){this.$PagesManagerMessagingNUXStore1.threadlist=true;};n.prototype.$PagesManagerMessagingNUXStore7=function(o){this.$PagesManagerMessagingNUXStore5=o;};n.prototype.$PagesManagerMessagingNUXStore8=function(o){this.$PagesManagerMessagingNUXStore2=o;};n.prototype.$PagesManagerMessagingNUXStore9=function(o){this.$PagesManagerMessagingNUXStore3=o;};n.prototype.$PagesManagerMessagingNUXStore10=function(o){this.$PagesManagerMessagingNUXStore4=o;};f.exports=new n(j);},null);
__d('PagesManagerMessagingNUXInboxTourContainer.react',['FluxContainer','PagesManagerMessagingNUXActions','PagesManagerMessagingNuxBanner.react','PagesManagerMessagingNUXInboxTour.react','PagesManagerMessagingNUXStore','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';n=babelHelpers.inherits(p,m.Component);o=n&&n.prototype;function p(q){o.constructor.call(this,q);this.$PagesManagerMessagingNUXInboxTourContainer1=this.$PagesManagerMessagingNUXInboxTourContainer1.bind(this);this.$PagesManagerMessagingNUXInboxTourContainer2=this.$PagesManagerMessagingNUXInboxTourContainer2.bind(this);}p.getStores=function(){return [l];};p.calculateState=function(q,r){return {areDependenciesReady:l.getAreDependenciesReady(),currentStep:l.getTourStep(),isTourVisible:l.getIsVisible(),shouldShowBanner:l.getShouldShowBanner()};};p.prototype.componentWillMount=function(){i.setShouldShowContextCardStep(this.props.shouldShowContextCardStep);};p.prototype.$PagesManagerMessagingNUXInboxTourContainer3=function(){i.setIsVisible(false);};p.prototype.$PagesManagerMessagingNUXInboxTourContainer2=function(){i.setIsVisible(false);i.setShouldShowBanner(false);};p.prototype.$PagesManagerMessagingNUXInboxTourContainer1=function(){i.setIsVisible(!this.state.isTourVisible);i.resetStep();};p.prototype.$PagesManagerMessagingNUXInboxTourContainer4=function(q){i.setStep(q);};p.prototype.render=function(){return (m.createElement('div',null,this.state.shouldShowBanner&&this.state.areDependenciesReady?m.createElement(j,null):null,this.state.isTourVisible?m.createElement(k,{onHide:this.$PagesManagerMessagingNUXInboxTourContainer2,rootElement:this.props.rootElement,shouldShowContextCardStep:this.props.shouldShowContextCardStep,step:this.state.currentStep}):null));};p.propTypes={};f.exports=h.create(p,{withProps:true});},null);
__d('PagesManagerMessagingSearchView.react',['AbstractTextInput.react','PagesManagerMessagingFilterStore','Image.react','React','PagesManagerMessagingThreadlistAction','XUICloseButton.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;'use strict';q=babelHelpers.inherits(s,k.Component);r=q&&q.prototype;function s(t,u){r.constructor.call(this,t,u);this.$PagesManagerMessagingSearchView1=(function(v){l.changeSearchTerm(this.props.pageID,v.target.value,i.getActiveFolderName());}).bind(this);this.$PagesManagerMessagingSearchView2=(function(){l.resetSearch(this.props.pageID);}).bind(this);this.$PagesManagerMessagingSearchView3=(function(v){if(v.key==='Escape')l.resetSearch(this.props.pageID);}).bind(this);}s.prototype.render=function(){var t=o._("Search messages...");return (k.createElement('div',{className:"_3i2n"},k.createElement(j,{className:"_5pti",src:p('/images/browse/search/search-gray.png')}),k.createElement(h,{className:"_5ptj",onChange:this.$PagesManagerMessagingSearchView1,onKeyDown:this.$PagesManagerMessagingSearchView3,placeholder:t,value:this.props.initSearchTerm}),k.createElement(m,{className:"_3i2o",onClick:this.$PagesManagerMessagingSearchView2,size:'medium'})));};f.exports=s;},null);
__d('PagesManagerMessagingSearchContainer.react',['FluxContainer','PagesManagerMessagingSearchStore','PagesManagerMessagingSearchView.react','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;function n(o,p){m.constructor.call(this,o,p);}n.getStores=function(){return [i];};n.calculateState=function(o,p){return {currentSearchTerm:i.getCurrentSearchTerm(),isSearchActive:i.getIsInSearchMode()};};n.prototype.render=function(){return (k.createElement(j,{initSearchTerm:this.state.currentSearchTerm,isSearchActive:this.state.isSearchActive,pageID:this.props.pageID}));};f.exports=h.create(n,{withProps:true});},null);
__d('PagesManagerMessagingApp.react',['PagesManagerAction','LeftRight.react','MercuryPagesChannelHandler','MercuryServerPayloadPreprocessor','PagesEventObserver','PagesEventType','PagesManagerAwayBanner.react','PagesManagerAwayContainer.react','PagesManagerDetailContainer.react','PagesManagerListContainer.react','PagesManagerListDetailLayout.react','PagesManagerMessagingDetailContainer.react','PagesManagerMessagingFilterContainer.react','PagesManagerMessagingListContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingNUXActions','PagesManagerMessagingNUXInboxTourContainer.react','PagesManagerMessagingSearchContainer.react','PagesManagerMessagingTabPerfEvents','PagesManagerPerfLogger','PagesManagerStaticStore','PagesMessengerMessagePageButton.react','React','ReactDOM','ResponsiveBlock.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha,ia;ha=babelHelpers.inherits(ja,da.Component);ia=ha&&ha.prototype;function ja(ka,la){'use strict';ia.constructor.call(this,ka,la);ba.setPageID(this.props.pageID);this.state={rootElement:null};this.$PagesManagerMessagingApp1=(function(){this.refs.body&&this.refs.body.recalculateHeight();}).bind(this);}ja.prototype.componentWillMount=function(){'use strict';j.getForFBID(this.props.pageID).turnOn();v.logMessagesSectionViewEvent(this.props.pageID);l.notify(m.MESSAGES_THREADLIST_LAYOUT_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});if(this.props.initialThreadID)h.setInitialViewItem(this.props.initialThreadID);};ja.prototype.componentDidMount=function(){'use strict';aa.log(z.MESSAGE_TAB_APP_DID_RENDER,this.props.perfParams);var ka=k.getForFBID(this.props.pageID);ka.handleUpdate(this.props.config.jewelInitData);w.setShouldShowBanner(this.props.config.enableTutorialBanner);this.setState({rootElement:ea.findDOMNode(this)});};ja.prototype.componentWillUnmount=function(){'use strict';j.getForFBID(this.props.pageID).turnOff();};ja.prototype.$PagesManagerMessagingApp2=function(ka){'use strict';if(ka)return ka;return null;};ja.prototype.$PagesManagerMessagingApp3=function(){'use strict';if(this.props.config.enabledPageToPageMessaging)return (da.createElement(ca,{flowID:this.props.flowID,pageID:this.props.pageID,pagesCommNewMessagesTab:true,size:'large'}));return null;};ja.prototype.$PagesManagerMessagingApp4=function(){'use strict';return (da.createElement('div',{className:"_n4_"},da.createElement(i,{className:"_n50"},da.createElement(t,{config:this.props.config,pageID:this.props.pageID}),da.createElement(i,null,this.$PagesManagerMessagingApp3(),da.createElement(y,{pageID:this.props.pageID}))),this.$PagesManagerMessagingApp5()));};ja.prototype.$PagesManagerMessagingApp6=function(){'use strict';return (da.createElement('div',{className:"_14vf"},da.createElement(q,{config:this.props.config,ChildContainerClass:u,flowID:this.props.flowID,pageID:this.props.pageID,perfParams:this.props.perfParams})));};ja.prototype.$PagesManagerMessagingApp7=function(){'use strict';return (da.createElement('div',null,da.createElement(p,{config:this.props.config,pageID:this.props.pageID,ChildContainerClass:s,getListItemKey:this.$PagesManagerMessagingApp2,perfParams:this.props.perfParams})));};ja.prototype.$PagesManagerMessagingApp5=function(){'use strict';if(!this.props.config.enableAwayToggle)return null;return (da.createElement('div',null,da.createElement(o,{pageID:this.props.pageID,RenderClass:n})));};ja.prototype.$PagesManagerMessagingApp8=function(){'use strict';return (da.createElement(fa,{onResize:this.$PagesManagerMessagingApp1},da.createElement(x,{rootElement:this.state.rootElement,shouldShowContextCardStep:this.props.config.enableContextCard})));};ja.prototype.render=function(){'use strict';return (da.createElement('div',null,this.$PagesManagerMessagingApp8(),da.createElement('div',{className:"_15i2"},da.createElement(r,{ref:'body',detailSection:this.$PagesManagerMessagingApp7(),listClassName:"_1-9p",listSection:this.$PagesManagerMessagingApp6(),navigationSection:this.$PagesManagerMessagingApp4()}))));};f.exports=ja;},null);