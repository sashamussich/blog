/*!CK:1808544148!*//*1448310887,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["BX9ij"]); }

__d("PrivacyRemindersLoggingTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null);
__d("SuggestionConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"};},null);
__d("SuggestionUIPresentation",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5};},null);
__d("TagExpansionButtonConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d('ComposerXAttachmentButtonBarState',['CSS','DOMQuery','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={trackCityChanges:function(m){var n=m.getComponent('citysharericon');if(n)return n.instance.subscribe('change',function(){l.updateMessageBoxBarState(m);});},updateMessageBoxBarState:function(m){var n=m.getComponent('citysharericon');if(n){var o=i.find(m.getRoot(),"._1dsp");h.conditionClass(o,"_icv",!!n.instance.getValue());}}};f.exports=l;},null);
__d('ComposerXAttachmentPrefillMixin',['Event','InputSelection'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={_initPrefill:function(k,l){this._textArea=k;this._didInitialFocus=false;this._prefill=l;if(this._prefill)this._focusListener=h.listen(this._textArea,'focus',this._prefillOnFocus.bind(this));},_resetPrefill:function(){this._didInitialFocus=false;},_prefillOnFocus:function(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===''){this._textArea.value=this._prefill;i.set(this._textArea,0,0);}this._didInitialFocus=true;}};f.exports=j;},null);
__d('ComposerXAttachmentUtils',['BrowserSupport','Button','ComposerXController','DataStore','DOMQuery','Event','Focus','Keys','Run','StickyPlaceholderInput','UserAgent_DEPRECATED','csx','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u='composer_fixed_placeholder';function v(x,y){if(!k.get(x.element,u,false))x.instance.setPlaceholder(y);}var w={initMentions:function(x,y,z,aa){v(x,y.toString());if(!aa||!aa.dontFocusMentions)w.focusMentions(x);this.registerMentionsForComposerCancel(x,z);},focusMentions:function(x){var y=l.find(x.element,'textarea.input');n.set(y);},registerMentionsForComposerCancel:function(x,y){j.registerConditionForComposerCancel(y,x.instance.hasChanges.bind(x.instance));},setStickyPlaceholderForMentions:function(x,y){v(x,y);},setPlaceholderIsFixed:function(x,y){k.set(x.element,u,!!y);},setStickyPlaceholderForTypeahead:function(x,y){var z=l.find(x,'.textInput');q.setPlaceholderText(z,y.toString());},listenForPostSubmission:function(x){m.listen(x,'keydown',function(event){var y=event.getModifiers(),z=r.osx()?y.meta:y.control,aa=l.find(x.form,"._11b"+'[type="submit"]');if(event.keyCode===o.RETURN&&z&&i.isEnabled(aa)){x.blur();if(m.fire(aa,'click'))m.fire(x.form,'submit');event.preventDefault();}});},disableSaveOnEmpty:function(x,y){var z=l.find(x,'.textInput'),aa=t(function(ca){i.setEnabled(y,z.value.trim().length!==0);},50),ba=[];ba.push(m.listen(z,'keyup',aa));if(h.hasClipboardEvents()){ba.push(m.listen(z,'cut',aa));ba.push(m.listen(z,'paste',aa));}else{ba.push(m.listen(z,'mouseout',aa));ba.push(m.listen(z,'mousemove',aa));}p.onUnload(function(){for(var ca=0;ca<ba.length;ca++)ba[ca].remove();ba=null;});}};f.exports=w;},null);
__d('ComposerXAttachmentWithPreviews',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={initPreviewButton:function(j,k){h.inform('page_composer_preview_form_initialized',j);}};f.exports=i;},null);
__d('FirstPhotoUploadLogger',['DOM','Event','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={log:function(event,n,o){if(!n||!o)return;var p=h.scry(o,"._yr");if(p.length!==0&&event!==j.DRAG_PHOTO_TO_COMPOSER)return;k.log({event:event,target_id:n});},bindClickUpload:function(n,o,p){i.listen(o,'click',(function(){this.log(j.CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB,p,n);}).bind(this));}};f.exports=m;},null);
__d('ComposerXDragDrop',['Arbiter','ClipboardPhotoUploader','ComposerXAjaxEndpoint','ComposerXController','ComposerXDragDropUtils','ComposerXMediaUploadHandler','DragDropTarget','ErrorDialog','Event','FirstPhotoUploadLogger','PagesComposerPostActionsLoggerEvent','Promise','PUWMethods','URI','fbt','isAnimatedGif'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=j.MEDIA_UPLOAD,y=j.VIDEO_UPLOAD,z='/ajax/composerx/attachment/link/scraper/',aa=function(ca){ca();};function ba(ca,da,ea,fa){'use strict';this._root=ca;this._composerID=da;this._targetID=ea;fa=fa||aa;this._activatePasteHandler();this._dragdrop=new n(ca).setOnFilesDropCallback((function(ga){fa(this._dropFiles.bind(this,ga));}).bind(this)).setFileFilter(l.filterImages).enable();l.handleDragEnterAndLeave(ca);h.subscribe('composer/deactivateDragdrop',(function(){this.deactivate();}).bind(this));h.subscribe('composer/reactivateDragdrop',(function(){this.reactivate();}).bind(this));}ba.prototype.enableURLDropping=function(){'use strict';this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this));};ba.prototype.deactivate=function(){'use strict';this._dragdrop.disable();this._deactivatePasteHandler();};ba.prototype.reactivate=function(){'use strict';this._activatePasteHandler();this._dragdrop.enable();};ba.prototype._activatePasteHandler=function(){'use strict';if(this._pasteHandler)return;this._pasteHandler=p.listen(this._root,'paste',(function(event){var ca=i.getImages(event);if(!ca.length)return;this._uploadFiles(ca,t.COPYPASTE);}).bind(this));};ba.prototype._deactivatePasteHandler=function(){'use strict';if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler;};ba.prototype._uploadFiles=function(ca,da,ea){'use strict';if(ea){k.getAttachment(this._root,y);h.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/videoupload',{files:ca},h.BEHAVIOR_PERSISTENT);}else{k.getAttachment(this._root,x);h.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',{files:ca,method:da},h.BEHAVIOR_PERSISTENT);}};ba.prototype._dropFiles=function(ca){'use strict';var da=ca.map(function(fa){return new s(function(ga){if(fa.type==='image/gif'&&m.canUploadAnimatedGIF()){ga(w(fa));}else if(fa.type.match('video/*')){ga(true);}else ga(false);});});for(var ea=0;ea<da.length;ea++)if(da[ea]._value===false){q.log(r.DRAG_PHOTO_TO_COMPOSER,this._targetID,this._root);break;}s.all(da).then((function(fa){if(this.validateMediaTypes(fa))this._uploadFiles(ca,t.DRAGDROP,fa[0]);}).bind(this));};ba.prototype._onURLDrop=function(ca){'use strict';var da=new u(z);da.addQueryData({scrape_url:encodeURIComponent(ca)});k.getAttachment(this._root,da.toString());};ba.prototype.validateMediaTypes=function(ca){'use strict';if(ca.length>1){var da=false,ea=false;for(var fa=0;fa<ca.length;fa++)if(ca[fa]){da=true;}else ea=true;if(da&&ea){o.show(v._("Can't upload both videos and images"),v._("Please select either one video or one or more images."));return false;}}return true;};f.exports=ba;},null);
__d('PagesComposerEntryLogger',['Event','PagesEventObserver'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this.$PagesComposerEntryLogger1=k;}j.prototype.registerForContentEntryEvents=function(k){'use strict';var l=function(){var m={page_id:this.$PagesComposerEntryLogger1,event_name:'composer_content_entry',pages_composer:1,target_id:this.$PagesComposerEntryLogger1};i.logData_DEPRECATED(m,i.VITAL_WAIT);this.unregister();};this.$PagesComposerEntryLogger2=h.listen(k,{paste:l.bind(this),keydown:l.bind(this)});};j.prototype.unregister=function(){'use strict';if(!this.$PagesComposerEntryLogger2)return;for(var event in this.$PagesComposerEntryLogger2)this.$PagesComposerEntryLogger2[event].remove();this.$PagesComposerEntryLogger2=null;};f.exports=j;},null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});},null);
__d('ComposerXBootloadStatusAttachment',['requireWeak','Arbiter','AsyncRequest','Bootloader','ComposerEntryPointRef','ComposerXAttachment','ComposerXAttachmentButtonBarState','ComposerXAttachmentPrefillMixin','ComposerXAttachmentUtils','ComposerXAttachmentWithPreviews','ComposerXController','ComposerXDragDrop','ComposerXDragDropUtils','ComposerXMarauderLogger','ComposerXStore','CSS','DOM','DOMQuery','Event','Focus','NoNewerStoryInsertionWhileComposingGK','PageTransitions','PagesComposerEntryLogger','Parent','FocusListener','PrivacyConst','PrivacyRemindersLoggingTypes','ProductionPromptConfig','SelectorDeprecated','SubscriptionsHandler','SuggestionConfig','SuggestionUIPresentation','URI','XUIError','$','classWithMixins','createCancelableFunction','csx','cx','fbt','getActiveElement','mixin','requestAnimationFrame','XPrivacyRemindersDismissController','XPrivacyRemindersImpressionLoggingController','XReactComposerLoggingODSController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab){if(c.__markCompiled)c.__markCompiled();var bb,cb,db;h('LitestandStoryInsertionStatus',function(hb){db=hb;});var eb={only_me:{PRIVACY_CONSTANT:[ga.BaseValue.SELF],LOG_IMPRESSION:ha.ONLY_ME_IMPRESSION,LOG_CONVERSION:ha.ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.EVERYONE_IMPRESSION,LOG_CONVERSION:ha.EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},delta_everyone:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.DELTA_EVERYONE_IMPRESSION,LOG_CONVERSION:ha.DELTA_EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:ha.EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:ha.PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},fb={};bb=babelHelpers.inherits(gb,qa(m,wa(o,q)));cb=bb&&bb.prototype;function gb(hb,ib){'use strict';cb.constructor.call(this);this._root=hb;this._config=ib;this._privacyReminders={};this._onSelectorChange=this._onSelectorChange.bind(this);if(db&&ba.no_insertion_while_composing)db.registerBlocker((function(){return this._isFocused;}).bind(this));}gb.prototype.getRoot=function(){'use strict';return this._root;};gb.prototype.getPrivacyInstance=function(){'use strict';return this._newPrivacyWidgetInstance;};gb.prototype._getTextArea=function(){'use strict';return y.find(this.getComponent('maininput').element,'textarea.input');};gb.prototype.initWithComponents=function(hb){'use strict';fb[this._composerID]=this;this._attachmentIsActive=true;var ib=this._getTextArea(),jb=y.scry(ea.byClass(this.getRoot(),"_119"),'li.'+this.attachmentClassName)[0];this._focusListener=z.listen(ib,'focus',this._onFocus.bind(this,'area_focus'));if(this._config.prefill_text)this._initPrefill(ib,this._config.prefill_text);if(hb&&this._config.targetIsPage){this._pagesComposerEntryLogger=new da(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(ib);}if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(this._isFocused()){this._onFocus('is_focused');}else if(jb)this._clickListener=z.listen(jb,'click',(function(){aa.set(ib);}).bind(this));this._dragEnterHandler=i.subscribe('dragenter',(function(kb,lb){if(lb.element==this._root){i.inform('composerprivacy/aborteducation');var mb=lb.event.dataTransfer.items,nb;if(mb)nb=t.filterImages(mb);if(nb&&nb.length>0){aa.set(ib);}else{var ob=ea.byClass(this._root,'focus_target');fa.expandInput(ob);this._onFocus('drag_focus');}}}).bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!hb)aa.set(ib);if(this._config.plus_version){this._dragdrop=new s(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);if(this._config.previewButton)this.initPreviewButton(this._root,this._config.previewButton);ca.registerHandler(this.cleanup.bind(this));};gb.prototype._initPrivacyWidgetInstance=function(){'use strict';var hb=this.getComponent('mainprivacywidget');if(!hb)return;this._privacyWidgetElement=hb.element;this._newPrivacyWidgetInstance=hb.instance&&hb.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var ib=this.getComponent('maininput').instance&&this.getComponent('maininput').instance.getMentions(),jb=this.getComponent('tagExpansionButton');jb&&jb.instance&&jb.instance.listenToPrivacy(this._newPrivacyWidgetInstance,ib);}};gb.prototype._fullInitWithComponents=function(hb){'use strict';this._bootloadCallback=ra(this._bootloadModules.bind(this));if(hb&&hb.show_tag_expansion_reminder){k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI","ComposerTagReminder"],this._bootloadCallback);}else k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI"],this._bootloadCallback);Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._privacyReminders.delta_everyone&&this._privacyReminders.delta_everyone.dialog){var ib=this._privacyReminders.delta_everyone.dialog.getContent();if(ib){var jb=y.scry(ib,'.photoText')[0],kb=y.scry(ib,'.postText')[0];i.subscribe('multi-upload/images-added',(function(){jb&&w.show(jb);kb&&w.hide(kb);}).bind(this));i.subscribe('multi-upload/all-images-removed',(function(){jb&&w.hide(jb);kb&&w.show(kb);}).bind(this));}}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange);}else ja.subscribe('select',this._onSelectorChange);};gb.prototype._bootloadModules=function(hb,ib,jb,kb,lb){'use strict';this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new hb(this);if(lb){this._tagExpansionReminder=new lb(this);this._tagExpansionReminder.listen();}n.trackCityChanges(this);var mb=y.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new ib(mb);this._scraper.subscribe('match',(function(qb,rb){var sb=this._getScraperEndpoint();sb.addQueryData({scrape_url:encodeURIComponent(rb.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});var tb=this._config.isCarouselComposer;r.getAttachment(this._root,sb.toString(),null,tb);}).bind(this));}this._scraper.enable();this._scraper.check();var nb=x.scry(this._root,"._4-jj"),ob=this.getComposerID();if(this._config.stream_context==='home'&&nb&&nb.length&&this._tagger&&ob){if(!this._suggestionScraper){this._suggestionScraper=new jb(this._tagger,nb[0],[ma.SEMI_INLINE,ma.TAGGER_BADGE,ma.TOP_OF_VERBS],ob);this._suggestionScraper.setBootloadTriggerConfig(la.COMPOSER_ENTRY_BOOTSTRAP);}if(ia.gk){var pb=x.scry(this._root,'#bootloadSemiinlineRoot')[0];if(pb)w.hide(pb);}}};gb.prototype._showPrivacyReminder=function(hb){'use strict';var ib=this,jb=this._privacyReminders[hb],kb=eb[hb],lb=null;if(this._newPrivacyWidgetInstance){lb=this._newPrivacyWidgetInstance.getSelectedBaseValue();}else lb=parseInt(ja.getValue(this._privacyWidgetElement),10);if(!jb||!jb.dialog||jb.shown){if(lb===ga.BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false;}return;}if(kb.PRIVACY_CONSTANT.indexOf(lb)===-1)return;jb.dialog.setContext(this._privacyWidgetElement).show();jb.shown=true;this._privacyReminderShown=true;if(kb.LOG_IMPRESSION){var mb=za.getURIBuilder().setString('type',kb.LOG_IMPRESSION).getURI();new j(mb).send();}if(kb.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(hb==='delta_everyone'||hb==='only_me'){var nb=ya.getURIBuilder().setString('type',hb).getURI();new j(nb).send();}else new j('/ajax/privacy/reminders/dismiss').setData({type:hb,dismiss_type:'impression'}).send();var ob=(function(event){var pb=w.hasClass(event.target,'layerConfirm')||y.scry(event.target,'^.layerConfirm').length===1,qb=w.hasClass(event.target,'layerButton')||y.scry(event.target,'^.layerButton').length===1;if(pb&&hb!=='public_posting_filter_nux'){if(hb==='delta_everyone'||hb==='only_me'){var rb=za.getURIBuilder().setString('type',ha.DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new j(rb).send();}return;}if(hb==='delta_everyone'||hb==='only_me'){var sb=ya.getURIBuilder().setString('type',hb).getURI();new j(sb).send();}else new j('/ajax/privacy/reminders/dismiss').setData({type:hb,hide:qb}).send();jb.events.forEach(function(ub){ub.remove();});jb.events=[];jb.dialog.hide();this._privacyReminderShown=false;if(qb){xa((function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector();}else ja.toggle(y.scry(ib.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}).bind(this));if(hb==='delta_everyone'){var tb=za.getURIBuilder().setString('type',ha.DELTA_EVERYONE_CHANGE_BUTTON_CLICKED).getURI();new j(tb).send();}}}).bind(this);if(this._newPrivacyWidgetInstance){jb.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',(function(pb,qb){var rb=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(jb,kb,rb);}).bind(this));}else jb.conversionListener=ja.subscribe('select',(function(pb,qb){if(qb.selector==this._privacyWidgetElement.firstChild){var rb=parseInt(ja.getValue(qb.option),10);this._logPrivacyReminderConversion(jb,kb,rb);}}).bind(this));jb.events=[z.listen(jb.dialog.getContent(),'click',ob),z.listen(jb.dialog.getContext(),'click',ob)];};gb.prototype._logPrivacyReminderConversion=function(hb,ib,jb){'use strict';if(ib.PRIVACY_CONSTANT.indexOf(jb)===-1){if(ib.LOG_CONVERSION){var kb=za.getURIBuilder().setString('type',ib.LOG_CONVERSION).getURI();new j(kb).send();}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(hb.conversionListener);}else ja.unsubscribe(hb.conversionListener);hb.conversionListener=null;}};gb.prototype._onSelectorChange=function(hb,ib){'use strict';if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||ib.selector===this._privacyWidgetElement.firstChild)setTimeout((function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);}).bind(this));if(this._tagExpansionReminder)this._tagExpansionReminder.updateReminderText(ib.post_param);};gb.prototype.cleanup=function(){'use strict';this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._clickListener){this._clickListener.remove();this._clickListener=null;}Object.keys(eb).forEach((function(hb){var ib=this._privacyReminders[hb];if(ib&&ib.dialog&&ib.shown){ib.dialog.hide();ib.events.forEach(function(jb){jb.remove();});ib.events=[];if(ib.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(ib.conversionListener);}else ja.unsubscribe(ib.conversionListener);ib.conversionListener=null;}}).bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._modulesAreBootloaded){this._tagger.cleanup();if(this._privacyWidgetTags){this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;}this._scraper.disable();}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null;}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null;}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};gb.prototype.reset=function(){'use strict';var hb=ea.byClass(this._root,"child_was_focused");if(hb)w.removeClass(hb,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();if(ia.gk)this._config.mentionsPlaceholder=ua._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"]);};gb.prototype.canSwitchAway=function(){'use strict';return !ea.byClass(this._root,'async_saving');};gb.prototype.bootloadAttachments=function(){'use strict';if(this._bootloading)return;this._bootloading=true;r.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);};gb.prototype.setBootloadedContent=function(hb){'use strict';this._bootloading=false;this._setEveryonePrivacyImpression=!!hb.set_everyone_privacy_impression;Object.keys(eb).forEach((function(mb){var nb=hb[mb+'_privacy_reminder'];if(nb)this._privacyReminders[mb]={dialog:nb};}).bind(this));if(hb.markup.privacy_widget){var ib=y.find(this._root,"._etn");x.setContent(ib,hb.markup.privacy_widget);var jb=y.find(this._root,"._1dwm");if(jb){jb.disabled=false;w.removeClass(jb,"_42fr");}}var kb=hb.placeholders.map(function(mb){return mb.component_name;});v.waitForComponents(this._composerID,kb,(function(){var mb=y.find(this._root,"._3-6"),nb=y.find(this._root,"._3-7");x.setContent(mb,hb.markup.tagger_content);x.setContent(nb,hb.markup.tagger_icons);if(hb.markup.privacy_widget)this._initPrivacyWidgetInstance();r.addPlaceholders(this._root,this,hb.placeholders);this._tagger=hb.tagger;n.updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(hb);p.registerMentionsForComposerCancel(this.getComponent('maininput'),this.getComposerID());}).bind(this));var lb=ab.getURIBuilder().setString('event','bootload_done').setEnum('composer_type',l.LEGACY_FEED).getURI();new j(lb).send();};gb.prototype._getScraperEndpoint=function(){'use strict';return new na('/ajax/composerx/attachment/link/scraper/');};gb.prototype._isFocused=function(){'use strict';return y.contains(this._root,va());};gb.prototype._isEditing=function(){'use strict';return this._isFocused()||this.getComponent('maininput').instance.hasChanges();};gb.prototype._onFocus=function(hb){'use strict';u.logEntry(this._composerID);var ib=x.scry(this._root,"._180_")[0];if(ia.gk&&this._config.stream_context==='home'&&ib){w.hide(pa('bootloadComposerPromptPlaceholder'));w.hide(pa('bootloadComposerPromptIcon'));var jb=pa('mentionsInput');x.find(jb,'textarea.mentionsTextarea').placeholder=ua._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"]);}this._prefillOnFocus();if(this._fullVersion||this._bootloading)return;i.inform('composer/focus',this._composerID);i.inform('composer/render_pab_nux');this.bootloadAttachments();};gb.prototype.allowOGTagPreview=function(){'use strict';return true;};gb.prototype._sendSetEveryonePrivacyImpression=function(){'use strict';new j('/ajax/privacy/reminders/set_everyone_privacy_impression').send();};gb.prototype.onEmptyStatusCallback=function(){'use strict';var hb=this._getTextArea();aa.set(hb);oa.set({target:hb,message:ua._("This status update appears to be blank. Please write something or attach a link or photo to update your status."),position:'below',alignh:'left'});new ka().addSubscriptions(z.listen(this.getRoot(),'success',(function(){oa.clear(this._getTextArea());}).bind(this)),i.subscribe('composer/publish',(function(event,ib){if(ib.composer_id!=this.getComposerID())return;oa.clear(this._getTextArea());}).bind(this)));};gb.setBootloadedContent=function(hb,ib){'use strict';var jb=fb[hb];if(jb)jb.setBootloadedContent.call(jb,ib);};gb.onEmptyStatusListener=function(hb){'use strict';var ib=fb[hb];if(ib)ib.onEmptyStatusCallback.call(ib);};Object.assign(gb.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});f.exports=gb;},null);
__d('ComposerXMediaPostTab',['Arbiter','ComposerXMediaUploadHandler','Event'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';h.inform('composer/reset_pab_nux');var n=new i(l);j.listen(m.getContainer(),'click',function(){h.inform('composerprivacy/aborteducation');n.fetchAttachments();m.getInput().disabled=false;});m.subscribe('change',function(){n.handleFileSelected(m);});}f.exports=k;},null);
__d('ComposerXOGTaggerIconReset',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){h.removeClass(k.element,"_4-jh");h.removeClass(k.element,"_509o");}f.exports=j;},null);
__d('EntstreamStoryDeduper',['DOM','csx','CSS'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o={};for(var p=0;p<m.length;p++){var q=m[p],r=q.getAttribute('data-dedupekey');if(o[r]){if(n){j.hide(q);}else h.remove(q);}else o[r]=1;}}var l={dedupe:function(m,n){n=n||"._5jmm";var o=h.scry(m,n);o=o.filter(function(p){return p.getAttribute('data-dedupekey');});k(o,false);},dedupeHide:function(m,n){n=n||"._5jmm";var o=h.scry(m,n),p=o.filter(function(q){return q.getAttribute('data-dedupekey')&&j.shown(q);});k(p,true);}};f.exports=l;},null);
__d('FeedLiveUpdateBar',['ArbiterMixin','Animation','BanzaiScuba','CurrentUser','DOM','DOMScroll','Ease','Event','Vector','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=300,s=false;function t(v){this.element=v;this.init();}function u(v){new j('feed_newstoriescard').addNormal('user_id',k.getID()).addNormal('event',v).addInteger('time',Math.round(Date.now()/1000)).addInteger('bar_at_top',1).post();}Object.assign(t.prototype,h,{init:function(){if(!this.element)return;var v=l.find(this.element,"._2f6b");o.listen(v,'click',this._handleClick.bind(this));},_handleClick:function(event){if(s)u('click');this.hide();var v=new p(p.getScrollPosition().x,0,'document');m.scrollTo(v,r,false,false,0,(function(){m.scrollTo(v,0);this.inform('click');}).bind(this));event.kill();},setAtTop:function(){s=true;},hide:function(){s=false;new i(this.element).from('top',42).to('top',-50).ease(n.sineOut()).duration(250).hide().go();},show:function(){if(!this.element)return;new i(this.element).from('top',-50).to('top',42).ease(n.makePowerOut(3)).duration(400).show().go();if(s)u('render');}});f.exports=t;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(x,y,z){if(y&&p[y])return;if(!o){h.subscribe('page_transition',w);o=true;}if(!n){x();return;}y&&(p[y]=1);q.push(x);if(!z){if(s){j.onLeave(w);s=false;}r.push(q.length-1);}}var n,o,p={},q=[],r=[],s=true,t=500,u=k(function(){n=false;var x=q;q=[];r=[];p={};for(var y=0,z=x.length;y<z;++y)x[y]();},t);function v(){n=true;u();}function w(){var x=r;r=[];s=true;for(var y=0,z=x.length;y<z;++y)q[x[y]]=l;}i.listen(window,'scroll',v);f.exports=m;},null);
__d('LitestandOffscreenController',['Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','cx','csx','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=1,y=9,z=10,aa={},ba=false,ca,da,ea,fa,ga=[];function ha(){ca&&ca.release();ca=null;ba=false;}function ia(){aa={};ga=[];}function ja(){if(i.hasClass(document.body,"_5vb_"))return z;return y;}function ka(){fa=fa||q.getViewportDimensions().y;da=q.getScrollPosition().y;ea=da+fa;if(x){da-=fa*x;ea+=fa*x;}for(var sa in aa){var ta=aa[sa];ta.position=q.getElementPosition(ta.element).y;if(!ta.hidden)ta.height=ta.element.offsetHeight;}}function la(){var sa=[];for(var ta in aa){var ua=aa[ta],va=ua.position,wa=va+ua.height<da,xa=va>ea;if(!ua.hidden&&(wa||xa)){ma(ua);}else if(!wa&&!xa){ua.pendingHide=false;if(ua.hidden){if(ua.dirty&&va<da){sa.push(ta);i.addClass(na(ua),"_49nu");}else o.apply(ua.element,{height:'',marginBottom:''});i.show(na(ua));ua.dirty=false;ua.hidden=false;}}}if(!sa.length)return;var ya=0;u(function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];ya+=bb.height-na(bb).offsetHeight+o.getFloat(bb.element,'marginBottom');}},function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];i.removeClass(na(bb),"_49nu");o.apply(bb.element,{height:'',marginBottom:''});}ya&&n.setTop(document.body,n.getTop(document.body)-ya);});}function ma(sa){if(!sa.pendingHide){ga.push(sa);sa.pendingHide=true;}}function na(sa){if(sa.wrapperElement)return sa.wrapperElement;var ta=sa.element;if(ta.firstElementChild)return sa.wrapperElement=ta.firstElementChild;for(var ua=0;ua<ta.childNodes.length;ua++)if(ta.childNodes[ua].tagName)return sa.wrapperElement=ta.childNodes[ua];}function oa(){var sa=ja()+'px';for(var ta=0;ta<ga.length;ta++){var ua=ga[ta];if(j.scry(ua.element,"._52fb").length)ua.pendingHide=false;if(ua&&ua.element&&ua.pendingHide&&!ua.hidden){o.apply(ua.element,{height:ua.height+'px',marginBottom:sa});i.hide(na(ua));ua.hidden=true;ua.pendingHide=false;}}ga=[];}function pa(){v(oa,'LitestandOffscreenController/hide');u(ka,la,'LitestandOffscreenController');}function qa(){m.onLeave(ha);ca=new p();ca.addSubscriptions(h.subscribe(l.NAVIGATION_BEGIN,ia),k.listen(window,'scroll',w(pa)),k.listen(window,'resize',w(function(){fa=null;pa();})));ba=true;}var ra={attachSubstream:function(sa){ba||qa();aa[t(sa)]={element:sa};}};f.exports=ra;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','CSS','Event','LitestandMessages','LitestandStream','LitestandStreamConfig','NavigationMessage','Run','Style','SubscriptionsHandler','UITinyViewportAction','ge','getScrollPosition','memoize','$','queryThenMutateDOM','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=1,ba,ca,da=500,ea=600,fa,ga;function ha(){ga&&clearTimeout(ga);ga=null;}function ia(){ga=setTimeout(function(){ga=null;ja();},da);}function ja(){var cb;y(function(){cb=n.canInsertNewerStories();},function(){if(cb){za();}else ia();},'LitestandNewStoryController/tryShowingStories');}var ka=0,la=true,ma;function na(){if(!ma){ma=new s();ma.addSubscriptions(i.subscribe(p.NAVIGATION_BEGIN,wa),l.listen(window,'resize',oa),l.listen(window,'scroll',ta));q.onLeave(wa);}}function oa(){if(!qa())wa();}var pa=w(function(){var cb=u('blueBarNAXAnchor');return cb&&k.hasClass(cb,'fixed_elem');});function qa(){return pa()&&!t.isTiny();}function ra(cb,db){var eb=u(cb);if(eb)eb.style.marginTop=db?db+'px':'';}function sa(cb){if(!qa()){cb=0;}else cb=Math.max(cb,0);ka=cb;ra('leftCol',cb);ra('rightCol',cb);}function ta(){var cb=v(window).y;if(cb<=0){wa();return;}if(cb<ka){la=false;sa(cb);}if(ca&&cb>ca+50&&ba){ba.hide();ca=null;}ca=cb;}function ua(cb){if(!la)va(cb);}function va(cb){cb.animation.stop();r.set(cb.stories,'opacity',1);}function wa(){if(ma){ma&&ma.release();la=false;sa(0);ma=null;if(ba){ba.hide();ca=null;}}}function xa(cb,db){var eb=new h(cb).from('opacity',0).to('opacity',1).duration(ea),fb={animation:eb,stories:cb},gb=ea;if(db){la=true;var hb=ua.bind(null,fb);for(var ib=0;ib<aa;ib++){eb.checkpoint(1,hb).from('opacity',1).to('opacity',0).duration(ea).checkpoint().from('opacity',0).to('opacity',1).duration(ea);gb+=2*ea;}}eb.go();setTimeout(va.bind(null,fb),gb+200);}function ya(cb){ha();if(!fa)return;if(cb)var db=v(window),eb=fa.nextSibling,fb=eb.offsetTop,gb=function(){sa(db.y+eb.offsetTop-fb);window.scrollTo(db.x,ka);};r.apply(fa,{height:'',left:'',overflow:'',position:'',width:''});if(cb){gb();var hb=fa;z(function(){na();gb();xa(hb,!o.fade_in);if(ba){ba.setAtTop();ba.show();}});}else xa(fa,false);i.inform(m.STORIES_INSERTED);i.inform(m.NEWER_STORIES_INSERTED);setTimeout(function(){i.inform('reflow');},0);new j().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:n.getSectionID()}).send();fa=null;}function za(){ya(qa());}function ab(){ya(false);}var bb={waitForDisplay:function(cb){if(!fa)fa=x(cb);if(n.canInsertNewerStories()){za();}else ia();},showStoriesNow:function(cb){fa=cb;ab();},setNewStoryPill:function(cb){ba=cb;}};f.exports=bb;},null);
__d('LitestandStreamLoader',['Arbiter','Bootloader','CSS','DOM','EntstreamStoryDeduper','Event','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','LitestandStreamConfig','NavigationMessage','OnVisible','ReloadPage','Run','URI','UserActivity','$','ge','getElementPosition','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa=0,ga=false,ha={},ia,ja,ka,la,ma,na,oa=0,pa,qa,ra=[],sa=60000,ta=30,ua=200,va=0,wa,xa;function ya(){w.onLeave(za);fa=0;ra=[h.subscribe(t.NAVIGATION_BEGIN,za),h.subscribe(o.NEWER_STORIES_INSERTED,function(){xa=null;})];ra.push(h.subscribe('layer_shown',function(pb,qb){if(qb&&qb.type==='DialogX')fa++;}),h.subscribe('layer_hidden',function(pb,qb){if(qb&&qb.type==='DialogX')fa--;}));q.registerBlocker(function(){return fa>0;});ga=true;}function za(){h.inform(o.LEAVE_HOME);ha={};qa=null;oa=0;ra.forEach(h.unsubscribe);ra=[];ia&&ia.remove();ma&&clearTimeout(ma);ma=null;la=null;xa=null;pa&&pa.remove();pa=null;ga=false;va=0;}function ab(pb){ma&&clearTimeout(ma);ma=setTimeout(function(){ma=null;gb();},pb);}function bb(){if(qa&&la&&qa.pollIntervalMS&&qa.pollIntervalMS>1000){y.setIdleTime(qa.newStoryIdleTime);ab(qa.pollIntervalMS);}}function cb(){ia=new u(k.find(ja,'a'),nb.bind(null),false,qa.bufferPixels);}function db(){var pb=ca(window).y;return pb>qa.firstPagerScrollBuffer;}function eb(){if(db()){cb();pa&&pa.remove();pa=null;}}function fb(pb){var qb=k.find(ja,'a');m.listen(qb,'click',function(event){nb();pa&&pa.remove();pa=null;event.preventDefault();});var rb=ba(ja),sb=da();if(pb&&rb.y<sb.height){nb();}else if(pb&&!db()){pa=m.listen(window,'scroll',ea(eb));}else cb();}function gb(){if(!la)return;if(!y.isActive(qa.newStoryIdleTime)){y.subscribeOnce(gb);return;}if(y.hasBeenInactive()){y.resetActiveStatus();var pb=qa.pollIntervalMS,qb=Date.now()-y.getLastInActiveEnds();if(qb<pb){ab(pb-qb);return;}}if(!r.canInsertNewerStories()){ab(qa.pollIntervalMS);return;}hb(false);}function hb(pb){if(!la)return;ma&&clearTimeout(ma);if(!xa){var qb=r.getStreamRoot();xa=n.div({style:{height:0,width:qb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});k.prependContent(qb,xa);h.inform(o.NEW_STORIES_CONTAINER_CREATED,xa);}var rb=n.div(null);k.prependContent(xa,rb);i.loadModules(["UIPagelet"],function(sb){sb.loadFromEndpoint('LitestandNewerStoriesPagelet',rb,Object.assign(la,{cursor:wa,containerID:k.getID(xa),fblogo:pb}),{crossPage:true});});}function ib(){var pb=k.getID(ja);j.addClass(ja,'async_saving');var qb=lb(),rb=qb.cursor,sb=qb.storiesCount;if(ha[rb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+rb);ha[rb]=rb;var tb={cursor:rb,pager_config:ka,pager_id:pb,scroll_count:++oa,feed_stream_id:r.getFeedStreamID(),client_stories_count:sb};i.loadModules(["UIPagelet"],function(ub){ub.loadFromEndpoint(qa.pagerController,k.getID(na),tb,{append:true,automatic:true,usePipe:true,crossPage:qa.crossPage,errorHandler:jb,transportErrorHandler:jb});});}function jb(pb){var qb=lb();delete ha[qb.cursor];j.removeClass(ja,'async_saving');}function kb(){var pb=mb();if(pb.length){return pb[0].getAttribute('data-cursor');}else return ja&&ja.getAttribute('data-cursor');}function lb(){var pb=mb(),qb={};if(pb.length){qb.cursor=pb[pb.length-1].getAttribute('data-cursor');qb.storiesCount=pb.length;}else{qb.cursor=ja&&ja.getAttribute('data-cursor');qb.storiesCount=0;}return qb;}function mb(){var pb=k.scry(na,r.getStoriesSelector());return pb.filter(function(qb){return qb.getAttribute('data-cursor');});}function nb(){ib();ia&&ia.remove();ia=null;}var ob={register:function(pb,qb,rb,sb){ga||ya();qa=babelHelpers._extends({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},qb);ka=rb;na=z(pb);wa=kb();ja=sb;fb(true);bb();},removeOldPager:function(pb,qb){if(pb)k.remove(z(pb));j.show(z(qb));},removeLoadingIndicator:function(pb,qb){var rb=aa(pb);if(rb)k.remove(rb);j.show(qb);},moreStoriesInserted:function(pb){h.inform(o.STORIES_INSERTED,{substream_id:pb});var qb=z(pb);if(s.hide_offscreen_substreams)p.attachSubstream(qb);},attachNewPager:function(pb){l.dedupeHide(r.getStreamRoot(),r.getStoriesSelector());ja=pb;ja&&fb(false);},setPollerData:function(pb){if(pb){la=pb;bb();}},headLoadCompleted:function(pb){wa=pb.newCursor;bb();var qb=pb.stories;if(qb&&qb.length>0){for(var rb=qb.length-1;rb>=0;rb--)qb[rb].setAttribute('data-insertion-position',--va);var sb=r.getStoriesSelector();l.dedupe(r.getStreamRoot(),sb);var tb=k.scry(xa,sb);h.inform('Stream/totalHeadLoadedStories',{count:-va,hiddenCount:tb.length,fblogo:pb.fblogo});}},forceNewFetch:function(){hb(true);}};f.exports=ob;},null);
__d('PhotosUploadWaterfallMixin',['Flash','PhotosUploadWaterfall','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j,l={getUploaderApp:k,getWaterfallID:k,getAdditionalData:function(){return {};},logWaterfallStep:function(m,n,o){i.sendSignal(babelHelpers._extends({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,flash_version:h.getVersionString(),ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);},logWaterfallStepUsingBanzai:function(m,n,o){i.sendBanzai(babelHelpers._extends({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);}};f.exports=l;},null);
__d('PhotoSourceTypes',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({COMPUTER:null,POSTED_PHOTOS:null,SYNCED_PHOTOS:null,SUGGESTIONS:null,PAGES_POSTED_PHOTOS:null});},null);
__d('BaseSelectionContainer',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0;function i(){'use strict';this.$BaseSelectionContainer1=(h++).toString();}i.prototype.getSelectionContainerID=function(){'use strict';return this.$BaseSelectionContainer1;};i.prototype.getSource=function(){'use strict';throw 'This must be implemented by the child class';};i.prototype.getName=function(){'use strict';return null;};i.prototype.getSize=function(){'use strict';return null;};i.prototype.hasPlaceholderUI=function(){'use strict';throw 'This must be implemented by the child class';};f.exports=i;},null);
__d('SelectionSource',['PhotoSourceTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={FILE:'file',FLASH:'flash',VAULT:'vault',SUGGESTIONS:'suggestions',POSTED_PHOTOS:'posted_photos',PAGES_POSTED_PHOTOS:'pages_posted_photos',toPhotoSourceType:function(j){switch(j){case i.FILE:case i.FLASH:return h.COMPUTER;case i.VAULT:return h.SYNCED_PHOTOS;case i.SUGGESTIONS:return h.SUGGESTIONS;case i.POSTED_PHOTOS:return h.POSTED_PHOTOS;case i.PAGES_POSTED_PHOTOS:return h.PAGES_POSTED_PHOTOS;default:throw 'No mapping for SelectionSource: '+j;}}};f.exports=i;},null);
__d('FileSelectionContainer',['BaseSelectionContainer','SelectionSource'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this);this.$FileSelectionContainer1=m;}l.prototype.getFile=function(){'use strict';return this.$FileSelectionContainer1;};l.prototype.getSource=function(){'use strict';return i.FILE;};l.prototype.getName=function(){'use strict';return this.$FileSelectionContainer1.fileName||this.$FileSelectionContainer1.name;};l.prototype.getSize=function(){'use strict';return this.$FileSelectionContainer1.fileSize||this.$FileSelectionContainer1.size;};l.prototype.hasPlaceholderUI=function(){'use strict';return false;};f.exports=l;},null);
__d('FilePickerEvent',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d('HTML5FilePicker',['ArbiterMixin','BrowserSupport','CSS','DOM','FilePickerEvent','FileSelectionContainer','Parent','PhotosUploadID','PhotosUploadWaterfall','PhotosUploadWaterfallMixin','PhotosUploadWaterfallXMixin','PUWApplications','URI','PUWSteps','createArrayFromMixed','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();function x(y,z){this._config=babelHelpers._extends({accept:undefined,multiple:undefined},z);this._button=y;this._beginInformed=false;if(!i.hasFileAPI()){this.logStep(u.CLIENT_PROCESS_UNAVAILABLE,{error:'no_file_api'});if(this._config.hasOwnProperty('fallbackFunction')){this._config.fallbackFunction.call(this);return;}var aa=new t(this._button.getAttribute('ajaxify'));this._button.setAttribute('ajaxify',aa.addQueryData({app:p.APP_FLASH}).toString());this.logWaterfallStep(p.FALLBACK_TO_FLASH);return;}this._subscriptions=[];var ba=this._config.input||k.create('input',{type:'file',className:"_n"});if(this._config.hasOwnProperty('accept'))ba.accept=this._config.accept;if(this._config.hasOwnProperty('multiple'))ba.multiple=this._config.multiple;if(this._config.hasOwnProperty('title'))ba.title=this._config.title;var ca=k.create('label',{className:'accessible_elem','for':k.getID(ba)},ba.title),da=k.create('div',{className:"_3jk"},[ca,ba]);j.addClass(this._button,"_m");k.appendContent(this._button,da);this._button.setAttribute('rel','ignore');this._bindInput(ba);var ea=n.byClass(this._button,'addPhotosDisabled');if(ea){j.removeClass(ea,'addPhotosDisabled');j.addClass(ea,'addPhotosEnabled');}}Object.assign(x.prototype,h,q,r,{getUploaderApp:function(){return p.APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallAppName:function(){return s.WEB_HTML5;},getWaterfallSource:function(){return this._config.ref;},getSwfID:function(){return null;},_constructFileList:function(){var y=v(this._input.files);y.forEach(function(z){z.uploadID=o.getNewID();});return y;},_constructFileSelectionContainerList:function(){var y=v(this._input.files);return y.map(function(z){return new m(z);});},cleanup:function(){if(this._input){this._input.onclick=null;this._input.onchange=null;}},_bindInput:function(y){this.cleanup();y.onclick=(function(){this.logWaterfallStep(p.SELECT_START);if(!this._beginInformed){this._beginInformed=true;this.inform(l.BEGIN||'FilePickerEvent/BEGIN');}this.inform(l.SELECT_START);}).bind(this);y.onchange=(function(){this.inform(l.SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()});this._bindInput(this._input.cloneNode(false));}).bind(this);if(this._input)k.replace(this._input,y);this._input=y;}});f.exports=x;},null);
__d('UploadSession',['AsyncRequest','FilePickerEvent','PhotosUploadWaterfall','PUWSteps','URI','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={};function o(q){'use strict';this._sessionID=q;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}o.prototype.addFilePicker=function(q){'use strict';if(!m(this._pickers,q)){this._pickers.push(q);if(this._controller&&q.getSwfID&&q.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(q.getSwfID());q.subscribe(i.BEGIN,(function(r,s){if(!this._beginLogged){this._beginLogged=true;q.logWaterfallStep(j.BEGIN);q.logStep(k.CLIENT_FLOW_BEGIN);}}).bind(this));q.subscribe(i.SELECTED,(function(r,s){q.logStep(k.CLIENT_SELECT_SUCCESS,{volume:s.files.length});if(this._controller){this._controller.uploadFiles(s.files);}else this._pendingFileLists.push(s);if(this._asyncBootstrapped)return;var t=q._button,u=new l(t.getAttribute('ajaxify'));u.addQueryData('num_selected',s.files.length);h.bootstrap(u.toString(),t,true);this._asyncBootstrapped=true;}).bind(this));q.subscribe(i.SELECT_START,(function(){q.logStep(k.CLIENT_SELECT_BEGIN);}).bind(this));q.subscribe(i.SELECT_CANCELED,(function(){q.logStep(k.CLIENT_SELECT_CANCEL);if(!this._overlay){q.logStep(k.CLIENT_FLOW_CANCEL);this._beginLogged=false;}}).bind(this));q.subscribe(i.ALBUM_LIMIT_EXCEEDED,(function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}).bind(this));q.subscribe(i.SESSION_LIMIT_EXCEEDED,(function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}).bind(this));}};o.prototype.addController=function(q){'use strict';this._controller=q;this._asyncBootstrapped=true;var r=this._controller.getWaterfallID?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,s=this._controller.getUploaderApp?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;j.sendSignal({qn:r,step:j.BEGIN,uploader:s});}if(this._pendingFileLists.length){var t=[];this._pendingFileLists.forEach(function(u){t=t.concat(u.files);});this._controller.uploadFiles(t);}else j.sendSignal({qn:r,step:j.OVERLAY_FIRST,uploader:s});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};o.prototype.addOverlay=function(q){'use strict';this._overlay=q;};o.prototype.addOverlayAndController=function(q,r){'use strict';this.addOverlay(q);this.addController(r);};o.addFilePickerToSession=function(q,r){'use strict';p(q).addFilePicker(r);};o.addControllerToSession=function(q,r){'use strict';p(q).addController(r);};o.addOverlayToSession=function(q,r){'use strict';p(q).addOverlay(r);};o.addOverlayAndControllerToSession=function(q,r,s){'use strict';p(q).addOverlayAndController(r,s);};function p(q){if(!n[q])n[q]=new o(q);return n[q];}f.exports=o;},null);
__d('MetaComposerEdDialog',['ARIA','Animation','Arbiter','AsyncRequest','DOM','Ease','Parent','SelectorDeprecated','Vector','getElementText'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};Object.assign(s.prototype,{_init:function(){j.subscribe(['ComposerXStatusAttachment/ready','ReactComposerStatusLazyAttachment/mounted'],(function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}).bind(this));if(this.config.show_sticky)j.subscribe('composer/mutate',(function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}).bind(this));if(this.config.show_tags)j.subscribe('SelectedPrivacyOption/changed',(function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}).bind(this));o.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new k(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=l.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=p.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;l.setContent(w,v);h.announce(q(w));this._dialog.show();var x=n.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new i(x);}else this._anim=new i(x).from('opacity',0);this._anim.to('opacity',1).ease(m.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(m.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});f.exports=s;},null);
__d('PrivacySelectorOptionNew',['CSS','DOM','DOMQuery','JSXDOM','MenuSelectableItem','PrivacyConst','csx','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s,t=m.EventExpansion;r=babelHelpers.inherits(u,l);s=r&&r.prototype;function u(v){'use strict';s.constructor.call(this,v);this.updateAfterTagExpansion(!!v.hasTags,v.eventExpansionType||t.NONE);}u.prototype._getData=function(){'use strict';return this._data;};u.prototype.getTooltip=function(){'use strict';return this._getData().tooltip;};u.prototype.getPostParam=function(){'use strict';return this._getData().postParam.toString();};u.prototype.getTriggerIcon=function(){'use strict';return this._getData().triggerIcon;};u.prototype.getTriggerLabel=function(){'use strict';return this._getData().triggerLabel;};u.prototype.isPublic=function(){'use strict';return this.getPostParam()===m.PostParam.EVERYONE;};u.prototype.isFriends=function(){'use strict';return this.getPostParam()===m.PostParam.FRIENDS;};u.prototype.isOnlyMe=function(){'use strict';return this.getPostParam()===m.PostParam.ONLY_ME;};u.prototype.isBasicOption=function(){'use strict';return true;};u.prototype.isCustomOption=function(){'use strict';return false;};u.prototype.getTagExpansionBehavior=function(){'use strict';return this._getData().tagExpansionBehavior;};u.prototype.getBaseValue=function(){'use strict';return this._getData().baseValue;};u.prototype.getIndex=function(){'use strict';return this._getData().value;};u.prototype.getLoggingEventName=function(){'use strict';switch(this.getPostParam()){case m.PostParam.FRIENDS:return 'click_friends';case m.PostParam.EVERYONE:return 'click_everyone';case m.PostParam.ONLY_ME:return 'click_only_me';case m.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case m.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};u.prototype.updateAfterTagExpansion=function(v,w){'use strict';var x=w!=t.NONE,y=this._getData().triggerLabel;if((v||x)&&this._getData().showPlusOnTagExpansion)y=p._("{privacyLabel} (+)",[p.param('privacyLabel',this._getData().triggerLabel)]);this._setLabel(y);var z=this._getExpansionType(v,w),aa=this._getData().optionSubtitles||{};this._setSubtitle(aa[z]);};u.prototype.isBelowFold=function(){'use strict';var v=h.hasClass(this.getRoot(),"_3ey_");return v;};u.prototype._setLabel=function(v){'use strict';if(!v)return;var w=j.find(this.getRoot(),"._54nh");w&&i.setContent(w,v);this._getData().label=v;};u.prototype._setSubtitle=function(v){'use strict';if(!v)return;var w=j.find(this.getRoot(),"._48u1");w&&i.setContent(w,v);};u.prototype._getExpansionType=function(v,w){'use strict';switch(w){case t.NONE:return v?m.ExpansionType.TAGS_ONLY:m.ExpansionType.NONE;case t.EVENT_INVITEES:return v?m.ExpansionType.TAGS_AND_EVENT_INVITEES:m.ExpansionType.EVENT_INVITEES_ONLY;case t.EVENT_GROUP:return v?m.ExpansionType.TAGS_AND_EVENT_GROUP:m.ExpansionType.EVENT_GROUP_ONLY;default:q(0);}};u.prototype.render=function(){'use strict';var v=s.render.call(this);if(!this._getData().isPrimaryOption)return v;var w=j.find(v,"._54nc");w&&h.addClass(w,"_48t_");var x=i.find(v,"._54nh");x&&h.addClass(x,"_48u0");var y=k.div({className:"_48u1"},this._getData().optionSubtitle);i.appendContent(w,y);return v;};f.exports=u;},null);
__d("XPrivacySelectorLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d('PrivacySelectorCustomOption',['AsyncDialog','AsyncRequest','DataStore','PrivacySelectorOptionNew','XPrivacySelectorLoggingController','XPrivacyCustomDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,k);o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this,q);}p.prototype.isBasicOption=function(){'use strict';return false;};p.prototype.isCustomOption=function(){'use strict';return true;};p.prototype.getSelector=function(){'use strict';return this._selector;};p.prototype.setPostParam=function(q){'use strict';this._data.postParam=q;};p.prototype.getLoggingEventName=function(){'use strict';return 'click_custom';};p.prototype.openDialog=function(q){'use strict';if(typeof this._selector==='undefined')this._selector=q;j.set(this._data.id,'PrivacySelectorCustomOption',this);var r=m.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',q.getPostParam()).setString('content_type',q.getContentType()).setInt('render_location',q.getRenderLocation()).setIntVector('tags',q.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',q.getTagExpansionButton()).getURI(),s=new i(r);s.setRelativeTo(q.getTriggerButtonElement());h.send(s,function(t){var u=function(v){var w=l.getURIBuilder().setEnum('event',v).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new i().setURI(w).send();};t.subscribe('hide',function(){q.inform('custom/hide');q.inform('selectorFinished');});t.subscribe('success',function(){q.inform('custom/success');u('custom_save');});t.subscribe('cancel',function(){q.inform('custom/cancel');u('custom_cancel');});});};p.customPrivacySave=function(q,r){'use strict';var s=j.get(q,'PrivacySelectorCustomOption');s.getSelector().selectOption(r);j.remove(q,'PrivacySelectorCustomOption');};f.exports=p;},null);
__d('PrivacySelectableMenu',['Arbiter','AsyncRequest','CSS','Ease','PrivacySelectorCustomOption','PrivacySelectorOptionNew','SelectableMenu','SelectableMenuUtils','XPrivacySelectorLoggingController','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;r=babelHelpers.inherits(t,n);s=r&&r.prototype;function t(u,v){'use strict';s.constructor.call(this,u,v);}t.prototype.getItemForIndex=function(u){'use strict';for(var v=0;v<this._items.length;v++){var w=this._items[v];if(w instanceof m&&w.getIndex()==u)return w;}return null;};t.prototype.selectDefaultOption=function(){'use strict';this._items.some(function(u){if(u instanceof m&&this._isDefaultOption(u)){this.setValue(u.getIndex());return true;}return false;},this);};t.prototype.selectOption=function(u){'use strict';var v=null,w=this._items.some(function(x){if(x instanceof m&&!x.isCustomOption()&&x.getPostParam()==u){this.setValue(x.getIndex());return true;}if(x instanceof l){v=x;return false;}if(this._isMoreOption(x)){this.expandMenu();return false;}},this);if(!w&&v){v.setPostParam(u);this.setValue(v.getIndex());}};t.prototype._isDefaultOption=function(u){'use strict';return j.hasClass(u.getRoot(),"_plx");};t.prototype._isMoreOption=function(u){'use strict';return j.hasClass(u.getRoot(),"_po2");};t.prototype._handleItemClick=function(u,v){'use strict';if(!o.doesItemSupportSelect(u))return s._handleItemClick.call(this,u,v);if(this._isMoreOption(u)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(u);var w=this.inform('itemclick',{item:u,event:v});if(w)return;if(!o.isSelected(u)&&!u.isCustomOption()&&u.select()!==false){this._items.forEach(function(x){if(o.isSelected(x)&&x!==u)x.deselect();});this.inform('change',this.getSelection());}h.inform('composerprivacy/aborteducation');this.done();return u.handleClick();};t.prototype._logMoreClick=function(){'use strict';var u=p.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new i().setURI(u).send();};t.prototype._logOptionClick=function(u){'use strict';var v=p.getURIBuilder().setEnum('event',u.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new i().setURI(v).send();};t.prototype.expandMenu=function(){'use strict';j.removeClass(this.getRoot(),"_po3");j.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};t.prototype.collapseMenu=function(){'use strict';j.removeClass(this.getRoot(),"_po4");j.addClass(this.getRoot(),"_po3");};t.prototype.updateOptionsAfterTagExpansion=function(u,v){'use strict';this.forEachItem(function(w){if(w instanceof m)w.updateAfterTagExpansion(u,v);});};t.prototype.onPopoverOpen=function(u){'use strict';if(this._config.learnMore)this._config.learnMore.collapse();if(u&&u.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(u&&this._items.indexOf(u)>=15)setTimeout((function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:k.sineOut});}).bind(this),250);};f.exports=t;},null);
__d('PopoverButton',['DOM','DOMQuery','csx','isTextNode'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={setLabel:function(m,n){var o=i.find(m,"._55pe"),p=o.childNodes;for(var q=0;q<p.length;q++)if(k(p[q])){h.replace(p[q],n);return;}h.appendContent(o,n);}};f.exports=l;},null);
__d('PrivacySelectorDataStore',['ArbiterMixin','PrivacySelectorNewDispatcher','KeyedCallbackManager'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=new j(),l=babelHelpers._extends({},h,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id,reload:m.reload,is_error:m.is_error};k.addResourcesAndExecute(n);l.inform('change');}});f.exports=l;},null);
__d("XPrivacySelectorEventNUXController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/nux\/event_checkin\/",{context_node_id:{type:"String",required:true},event_expansion_type:{type:"Enum",enumType:0},event_id:{type:"String"}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},event_expansion_type:{type:"Enum",enumType:0},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d('PrivacySelectorBase',['ArbiterMixin','AsyncRequest','Animation','Button','CSS','CurrentUser','Focus','Input','MenuStaticItem','MenuSelectableItem','PopoverButton','PopoverLoadingMenu','PrivacyConst','DataStore','PrivacySelectorNewDispatcher','PrivacySelectorDataStore','PrivacySelectableMenu','Run','SubscriptionsHandler','TagExpansionButtonConfig','TooltipData','XPrivacySelectorEventNUXController','XPrivacySelectorLoggingController','XPrivacySelectorUpdateController','XUIError','bind','cx','fbt','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){if(c.__markCompiled)c.__markCompiled();var ka,la,ma=t.EventExpansion,na=3;ka=babelHelpers.inherits(oa,ja(h));la=ka&&ka.prototype;function oa(pa,qa,ra,sa,ta,ua){'use strict';la.constructor.call(this);u.set(pa,'selector',this);this._root=pa;this._button=qa;this._config=ua;this._menu=ra;this._popoverMenu=ta;this._input=sa;this._isSavedOnSelect=ua.is_saved_on_select;this._privacyFBID=ua.privacy_fbid;this._contentType=ua.content_type;this._renderLocation=ua.render_location;this._supportsTagExpansion=ua.supports_tag_expansion;this._prefixTooltipApps=ua.should_prefix_tooltip_apps;this._shouldDisplayLabel=ua.should_display_label;this._tags=ua.tagged_uids;this._hasTags=this._tags.length>0;this._eventExpansionType=ua.event_expansion_type;this._entID=ua.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=ua.selector_sync_key;this._previousParam=null;this._confirmOnSave=false;this._confirmOnSaveDialogs={};this._listeners=new z();if(ua.use_async_menu){this._listeners.addSubscriptions(this._popoverMenu.subscribe('setMenu',(function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof x))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}).bind(this)));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();y.onLeave(this._cleanup.bind(this));}oa.prototype._cleanup=function(){'use strict';this._listeners&&this._listeners.release();this._listeners=null;};oa.prototype._initSelectorSync=function(){'use strict';this._listeners.addSubscriptions(w.subscribe('change',(function(){w.get(this._selectorSyncKey,(function(pa){if(pa.unique_id!==this._menu._config.id){this._receivingUpdate=true;if(pa.post_param)this.selectOption(pa.post_param);pa.reload&&this.reloadSelector();pa.is_error&&this._displayErrorWithoutFocus();if(!pa.post_param)this._receivingUpdate=false;}}).bind(this));}).bind(this)));if(!this._syncsToDefault())this._listeners.addSubscriptions(this._menu.subscribe('change',(function(){if(!this._shouldDisplaySuccessAndFailure())this._broadcastUpdate();}).bind(this)));};oa.prototype._broadcastUpdate=function(){'use strict';this._broadcastUpdateImpl(false);};oa.prototype._broadcastError=function(){'use strict';this._broadcastUpdateImpl(true);};oa.prototype._broadcastUpdateImpl=function(pa){'use strict';if(!this._receivingUpdate){var qa={selector_type:this._selectorSyncKey,unique_id:this._menu._config.id};if(pa){qa.is_error=pa;}else{var ra=this._getSelectedOption();qa.post_param=ra.getPostParam().toString();}v.handleUpdateFromSelector(qa);}};oa.prototype.shouldReplaceOnPost=function(){'use strict';return this._config.replace_on_post||this.isComposerWithDefault();};oa.prototype.isComposerWithDefault=function(){'use strict';return this._syncsToDefault()&&!this._config.replace_on_select;};oa.prototype._isSelectorForChangingComposerDefault=function(){'use strict';return this._syncsToDefault&&this._config.replace_on_select;};oa.prototype._syncsToDefault=function(){'use strict';return this._config.selector_sync_key==t.PrivacyField.DEFAULT_COMPOSER.toString();};oa.prototype.getIsPublicSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isPublic();};oa.prototype.getIsFriendsSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isFriends();};oa.prototype.getIsOnlyMeSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isOnlyMe();};oa.prototype.getSelectedBaseValue=function(){'use strict';return this._selectedOption&&this._selectedOption.getBaseValue();};oa.prototype.getSelectedPostParam=function(){'use strict';return this._selectedOption&&this._selectedOption.getPostParam().toString();};oa.prototype.getIsCustomOptionSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isCustomOption();};oa.prototype.setValue=function(pa){'use strict';this._menu.setValue(pa);};oa.prototype.openSelectorExpanded=function(pa){'use strict';this.openSelector((function(){this._menu.expandMenu();pa&&pa();}).bind(this));};oa.prototype.openSelector=function(pa){'use strict';if(this._menu instanceof s){this.subscribeOnce('asyncMenuLoaded',(function(){pa&&pa();}).bind(this));this._popover.showLayer();}else{this._popover.showLayer();pa&&pa();}};oa.prototype.closeSelector=function(){'use strict';this._popover.hideLayer();};oa.prototype.getPopover=function(){'use strict';return this._popover;};oa.prototype.getTriggerButtonElement=function(){'use strict';return this._button;};oa.prototype.getRoot=function(){'use strict';return this._root;};oa.prototype.getMenuElement=function(){'use strict';return this._menu.getRoot();};oa.prototype.selectDefaultOption=function(){'use strict';this._menu.selectDefaultOption();this._updateMenu();};oa.prototype.selectOption=function(pa){'use strict';if(!pa)return;if(this._menu instanceof s){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,pa));this._fetchAsyncMenu();}else this._selectOptionImpl(pa);};oa.prototype._selectOptionImpl=function(pa){'use strict';this._menu.selectOption(pa);this._updateMenu();};oa.prototype._updateMenu=function(){'use strict';this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};oa.prototype.setTagExpansionButton=function(pa){'use strict';this._tagExpansionButton=pa;if(this._hasAudienceExpansion()){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};oa.prototype.getTagExpansionButton=function(){'use strict';return this._tagExpansionButton;};oa.prototype._initTagExpansionButtonState=function(){'use strict';this._tagExpansionButton=aa.FRIENDS_OF_TAGGED;var pa=this._getSelectedOption();if(!pa)return;var qa=JSON.parse(pa.getPostParam());if(qa.settings&&qa.settings.no_tag_expansion===true){this._tagExpansionButton=aa.TAGGED_ONLY;}else this._tagExpansionButton=aa.FRIENDS_OF_TAGGED;};oa.prototype._fetchAsyncMenu=function(){'use strict';if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};oa.prototype._getSelectedOption=function(){'use strict';if(!(this._menu instanceof x))return;var pa;this._menu.forEachItem((function(qa){if(qa instanceof q&&qa.isSelected())pa=qa;}).bind(this));return pa;};oa.prototype._onItemClick=function(pa,qa){'use strict';var ra=qa.item;if(ra instanceof p)return;if(ra.isBasicOption()){this.updateDataForItemIndex(ra.getIndex(),ra.getPostParam().toString());}else if(ra.isCustomOption()){this._closeForCustom=true;ra.openDialog(this);}this.inform('click',{customSelected:ra.isCustomOption()});};oa.prototype.getContentType=function(){'use strict';return this._contentType;};oa.prototype.getRenderLocation=function(){'use strict';return this._renderLocation;};oa.prototype.getPostParam=function(){'use strict';return this._postParam;};oa.prototype.getTags=function(){'use strict';return this._tags;};oa.prototype.registerConfirmOnSaveDialog=function(pa,qa,ra){'use strict';this._confirmOnSave=true;if(!(pa in this._confirmOnSaveDialogs))this._confirmOnSaveDialogs[pa]={};ra.subscribe('hide',(function(){if(this._previousParam!==this._postParam)this.selectOption(this._previousParam);}).bind(this));ra.subscribe('button',(function(){this._savePrivacy();ra.hide();}).bind(this));this._confirmOnSaveDialogs[pa][qa]=ra;};oa.prototype.updateDataForItemIndex=function(pa,qa,ra){'use strict';if(ra){this._tagExpansionButton=ra;this.inform('CustomTagExpansion',this._tagExpansionButton);}var sa=this._menu.getItemForIndex(pa);if(sa.isCustomOption())sa.setPostParam(qa);this._selectedOption=sa;this._previousParam=this._postParam;this._postParam=qa;o.setValue(this._input,qa);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)if(this._confirmOnSave&&this._previousParam in this._confirmOnSaveDialogs&&this._postParam in this._confirmOnSaveDialogs[this._previousParam]){this._confirmOnSaveDialogs[this._previousParam][this._postParam].show();}else this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};oa.prototype._shouldUpdateTooltips=function(){'use strict';return this._prefixTooltipApps||this._supportsTagExpansion||this.getIsCustomOptionSelected();};oa.prototype._savePrivacy=function(){'use strict';this._previousParam=this._postParam;this._sendUpdateRequest();};oa.prototype.reloadSelector=function(){'use strict';this._cleanup();var pa=ea.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new i().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(pa).send();};oa.prototype._sendUpdateRequest=function(){'use strict';var pa=this._isSavedOnSelect&&!this._receivingUpdate,qa=this._shouldUpdateTooltips();if(!pa&&!qa){this._receivingUpdate=false;return;}if(this._shouldDisplaySuccessAndFailure()){k.setIcon(this._button,this._config.spinner);l.show(this._config.spinner);l.hide(this._config.checkmark);}var ra=ea.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setEnum('event_expansion_type',this._eventExpansionType).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',pa).setBool('should_return_tooltip',qa).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI(),sa=new i().setRelativeTo(this._root).setHandler(ga(this,function(ta){if(this._shouldDisplaySuccessAndFailure()&&!this._receivingUpdate){l.hide(this._config.spinner);this._updateTriggerButtonLabel();if(this._config.checkmark){this._updateTriggerButtonLabel();var ua=k.getIcon(this._button);l.hide(ua);new j(this._config.checkmark).show().from('opacity',0).to('opacity',1).duration(400).checkpoint().duration(200).checkpoint().from('opacity',1).to('opacity',0).duration(400).hide().ondone(function(){new j(ua).show().from('opacity',0).to('opacity',1).duration(300).go();}).go();}this._broadcastUpdate();}if(this._config.replace_on_select)this._cleanup();if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var va=ta&&ta.payload&&ta.payload.tooltip;va&&this._setTooltipValue(ta.payload.tooltip);this.inform('selector_updated');})).setFinallyHandler(ga(this,function(ta){this._receivingUpdate=false;})).setURI(ra);if(this._shouldDisplaySuccessAndFailure())sa.setErrorHandler(ga(this,function(ta){if(this._receivingUpdate){this._displayErrorWithoutFocus();return;}this._menu.selectOption(this._previousParam);this._postParam=this._previousParam;this._displayError();this._broadcastError();}));sa.send();};oa.prototype._displayError=function(){'use strict';this._displayErrorImpl(true);};oa.prototype._displayErrorWithoutFocus=function(){'use strict';this._displayErrorImpl(false);};oa.prototype._displayErrorImpl=function(pa){'use strict';if(this._shouldDisplaySuccessAndFailure()){r.setLabel(this._button,ia._("Select Audience"));k.setIcon(this._button,this._config.error_icon);l.show(this._config.error_icon);ba.remove(this._button);pa&&n.setWithoutOutline(this._button);fa.set({target:this._button,message:ia._("Your selection might not have been saved. We recommend trying again later.")});}};oa.prototype.informEventExpansionChanged=function(pa){'use strict';if(this._eventExpansionType===pa)return;this._eventExpansionType=pa;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();this._maybeShowEventExpansionNUX();};oa.prototype.informTagsChanged=function(pa){'use strict';var qa=this._getTags(pa);this.informTagsChangedWithIDs(qa);};oa.prototype.informTagsChangedWithIDs=function(pa){'use strict';var qa=!pa.length;if(this._hasTags===qa){this._hasTags=!!pa.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();}if(this._tags.length!==pa.length){this._tags=pa;this._updateTooltipAfterChange();}};oa.prototype._getEventExpansionType=function(){'use strict';return this._eventExpansionType;};oa.prototype._showTagExpansion=function(){'use strict';return this._hasTags&&this._tagExpansionButton.valueOf()===aa.FRIENDS_OF_TAGGED.valueOf();};oa.prototype._getTags=function(pa){'use strict';var qa=[],ra=m.getID();if(pa.withTags)for(var sa=0;sa<pa.withTags.length;sa++){var ta=pa.withTags[sa].info;if(ta.uid!=ra)qa.push(ta.uid);}if(pa.mention)for(var ua in pa.mention)if(pa.mention[ua].type=='user'&&pa.mention[ua].uid!=ra)qa.push(pa.mention[ua].uid);return qa;};oa.prototype._updateTriggerButtonLabel=function(){'use strict';var pa=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)l.hide(pa);k.setIcon(this._button,pa.cloneNode());if(!this._shouldDisplayLabel)return;r.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===na){l.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());l.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};oa.prototype._updateTooltipAfterChange=function(){'use strict';var pa=ia._("Loading...");this._setTooltipValue(pa);this._sendUpdateRequest();};oa.prototype._setTooltipValue=function(pa){'use strict';pa&&ba.set(this._button,pa);};oa.prototype._onPopoverClose=function(){'use strict';if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};oa.prototype._onPopoverOpen=function(){'use strict';if(!(this._menu instanceof x))return;this._menu.onPopoverOpen(this._getSelectedOption());var pa=da.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new i().setURI(pa).send();this.inform('open');};oa.prototype._onMenuLoad=function(){'use strict';this._listeners.addSubscriptions(this._menu.subscribe('itemclick',this._onItemClick.bind(this)),this._popover.subscribe('hide',this._onPopoverClose.bind(this)),this._popover.subscribe('show',this._onPopoverOpen.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('expandMenu',(function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}).bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasAudienceExpansion()&&this._updateTriggerButtonLabel();}};oa.prototype._hasAudienceExpansion=function(){'use strict';return this._hasTags||this._getEventExpansionType()!=ma.NONE;};oa.prototype._shouldDisplaySuccessAndFailure=function(){'use strict';return this._config.spinner&&this._config.checkmark&&this._config.error_icon;};oa.prototype._maybeShowEventExpansionNUX=function(){'use strict';if(this._getEventExpansionType()==ma.NONE)return;var pa=ca.getURIBuilder().setString('context_node_id',this._button.id).setEnum('event_expansion_type',this._getEventExpansionType()).getURI();new i(pa).send();};f.exports=oa;},null);
__d('FeedAdsGapRuleViolationDetection',['Banzai','CSS','csx','cx','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={},ba={registerFeedStories:function(ca,da){if(ca.containerID=='substream_0'){w=[];x=[];}var ea=m(ca.containerID);if(!ea)return;z=babelHelpers._extends({},ca.demoAdChecks,z);var fa=l.scry(ea,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ha){return ha!==null;});if(ca.isLoggingEnabled&&fa.length!==0)this._logFeedLoad();if(ca.isNewerStories){w=fa.concat(w);}else w=w.concat(fa);for(var ga in ca.minGaps)if(ca.minGaps.hasOwnProperty(ga))aa[ga]=ca.minGaps[ga];if(n(z)){if(ca.isLoggingEnabled||ca.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ca,ea);if(ca.isLoggingEnabled||ca.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ca);}},_convertStoryNodeToObject:function(ca){if(i.hasClass(ca,"_170y"))return null;var da=ca.getAttribute('data-dedupekey');if(z[da])return null;var ea=l.scry(ca,"div._hye"),fa=l.scry(ca,"li._170x"),ga=[];if(ea.length!==0){ga=ea.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(fa.length!==0){ga=fa.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(ca.getAttribute('data-ft'))ga=[ca.getAttribute('data-ft')];if(!ga.length)return null;var ha=JSON.parse(ga[0]),ia={dataFTArray:ga,dedupKey:da,isSponsored:!!ha[o],height:ca.offsetHeight,qid:parseInt(ha[p],10),nodeID:ca.id};return ia;},_checkFirstPosViolation:function(ca,da){while(w.length>0&&w[0].isSponsored){var ea={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ca.firstStoryType},fa=l.scry(da,'.uiBoxRed')[0];if(fa){var ga=fa.textContent||fa.innerText;if(ga)ea.error_msg=ga;}if(ca.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(ea);y[w[0].dedupKey]=ea;}if(ca.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(ea);w.splice(0,1);}else break;}},_getMinGap:function(ca,da,ea){var fa=Math.min(ca?ca:Number.MAX_VALUE,da?da:Number.MAX_VALUE);return fa!==Number.MAX_VALUE?fa:ea;},_getStoryDedupKeysJSONString:function(ca,da){var ea=[];for(var fa=ca;fa<=da;fa++)ea.push(w[fa].dedupKey);return JSON.stringify(ea);},_getIdxOfStoryToSwap:function(ca,da){if(da>=w.length-ca)return -1;for(var ea=ca+1;ea<w.length&&da>0;ea++){if(!w[ea].isSponsored){da--;}else return -1;if(da===0)return ea;}return -1;},_checkGapRuleViolation:function(ca){var da=null,ea=null,fa=0;for(var ga=0;ga<w.length;ga++){var ha=w[ga];fa+=ha.height;if(ha.isSponsored){fa-=ha.height;var ia=false,ja=false;if(da!==null){var ka=ga-da,la=null,ma=this._getMinGap(aa[ea.dedupKey],aa[ha.dedupKey],ca.defaultMinGap);if(ka<ma){la=q;}else la=r;var na={ftArray_A:ea.dataFTArray,ftArray_B:ha.dataFTArray,dist:ka,pdist:fa,pos:ga+1,qid_A:ea.qid,qid_B:ha.qid,event_type:la,nodeid:ha.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(da,ga)};if(ca.isLoggingEnabled)if(!(ha.dedupKey in x)||x[ha.dedupKey].event_type!==la){this._logAdsGapEvent(na);x[ha.dedupKey]=na;}if(ca.isGapRuleInvalidationEnabled&&la==q){var oa=-1;if(ca.isSwapOnGapRuleViolationEnabled)oa=this._getIdxOfStoryToSwap(ga,ma-ka);if(oa>0){this._shiftAdBelowOrganicStory(ha.nodeID,w[oa].nodeID);var pa=w[ga];w.splice(ga,1);w.splice(oa,0,pa);if(ca.isLoggingEnabled){var qa={ft:w[oa].dataFTArray[0],dist:oa-ga,qid:w[oa].qid,event_type:'ad_swap'};h.post('feed_ads_gap_rule_violation',qa);}ja=true;ha=w[ga];fa+=ha.height;}else if(ca.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(na);ia=true;w.splice(ga--,1);}}}if(!ia&&!ja){da=ga;ea=ha;fa=0;}}}},_logFirstPosViolation:function(ca){var da={ft:ca.ftArray[0],event_type:s,intValues:{qid:ca.qid},first_story_type:ca.firstStoryType};if(ca.error_msg)da.error_msg=ca.error_msg;h.post('feed_ads_gap_rule_violation',da);},_logAdsGapEvent:function(ca){var da={ft_A:ca.ftArray_A[0],ft_B:ca.ftArray_B[0],event_type:ca.event_type,intValues:{dist:ca.dist,pdist:ca.pdist,pos:ca.pos,qid_A:ca.qid_A,qid_B:ca.qid_B},dedup_keys:ca.dedupKeys};h.post('feed_ads_gap_rule_violation',da);},_logFeedLoad:function(){var ca={event_type:t};h.post('feed_ads_gap_rule_violation',ca);},_invalidateFirstPosAd:function(ca){i.hide(m(ca.nodeid));var da={ft_array:ca.ftArray,event_type:u};h.post('feed_ads_gap_rule_violation',da);},_invalidateGapRuleViolatedAd:function(ca){var da=m(ca.nodeid);da&&i.hide(da);var ea={ft_array_A:ca.ftArray_A,ft_array_B:ca.ftArray_B,event_type:v};h.post('feed_ads_gap_rule_violation',ea);},_shiftAdBelowOrganicStory:function(ca,da){var ea=m(ca),fa=m(da);ea&&fa&&l.insertAfter(fa,ea);}};f.exports=ba;},null);
__d('StoryPositionTracking',['DOM','LitestandStream','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0;function m(p,q){var r=JSON.parse(p.getAttribute('data-ft'));if(r){r.insertion_position=q;p.setAttribute('data-ft',JSON.stringify(r));}}function n(p){return h.scry(p,"._5jmm");}var o={registerNewStories:function(p){if(p=='substream_0')l=0;var q=n(k(p)),r=q.length;for(var s=0;s<r;s++)m(q[s],l++);},updateAllStories:function(){var p=n(i.getStreamRoot()),q=p.length;l=0;for(var r=0;r<q;r++)m(p[r],l++);}};f.exports=o;},null);
__d('FbFeedAttachmentRelatedShare',['Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={loadRelatedAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.ARTICLE_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedGameAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.GAME_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedAttachmentForStream:function(o){var p=function(event,q){var r=event.getTarget();if(r.getAttribute('target')!=='_blank')return;var s="^div._5pbx",t="^div._5pc9",u=j.scry(r,s)[0]||j.scry(r,t)[0];if(!u)return;h.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:0,link_url:r.getAttribute('href'),is_right_click:q});};l(k.listen(o,'click',function(event){p(event,false);}));l(k.listen(o,'mousedown',function(event){if(event.which==3||event.button==2)p(event,true);}));}};f.exports=n;},null);