/*!CK:312400080!*//*1447737948,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["LW+lM"]); }

__d('BusinessURI.brands',['BizSiteIdentifier.brands','BusinessConf','URI'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j);l=k&&k.prototype;function m(o,p){'use strict';l.constructor.call(this,o);if(h.isBizSite()){var q=p||h.getBusinessID();if(q)this.addQueryData(i.BIZ_ID_PARAM_NAME,q);if(!this.$BusinessURI1(this.getSubdomain()))this.setSubdomain(i.DOMAIN);}return this;}m.prototype.$BusinessURI1=function(o){'use strict';return o==='developers';};var n=function(o,p){return new m(o,p);};f.exports=n;},null);
__d('EventPermalinkURISetter',['BusinessURI.brands','PageTransitions'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={setURI:function(k){if(window.location.search!=='')window.history.replaceState({event_id:k},document.title,h(window.location.pathname).toString());},initHandler:function(){window.onpopstate=function(k){if(k.state&&k.state.subpath)i.go(k.state.subpath,true);};}};f.exports=j;},null);
__d('AsyncUploadBase',['ArbiterMixin','AsyncRequest','AsyncResponse','BrowserSupport','Form','forEachObject','mixin','removeFromArray'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,n(h));q=p&&p.prototype;r.parseFiles=function(t){'use strict';var u={};m(t,function(v,w){if(Array.isArray(v)){u[w]=v;}else{u[w]=[];if(v instanceof window.FileList){for(var x=0;x<v.length;x++)u[w].push(v.item(x));}else if(v instanceof window.File||v instanceof window.Blob)u[w].push(v);}});return u;};function r(t){'use strict';q.constructor.call(this);this.setURI(t);this.setNetworkErrorRetryLimit(0);}r.prototype.setAllowCrossOrigin=function(t){'use strict';this._allowCrossOrigin=!!t;return this;};r.prototype.setAllowCrossPageTransition=function(t){'use strict';this._allowCrossPageTransition=!!t;return this;};r.prototype.setData=function(t){'use strict';this._data=t;return this;};r.prototype.setNetworkErrorRetryLimit=function(t){'use strict';this._retryLimit=t;return this;};r.prototype.setLimit=function(t){'use strict';this._limit=t;return this;};r.prototype.setPreprocessHandler=function(t){'use strict';this._preprocessHandler=t;return this;};r.prototype.setRelativeTo=function(t){'use strict';this._relativeTo=t;return this;};r.prototype.setStatusElement=function(t){'use strict';this._statusElement=t;return this;};r.prototype.setURI=function(t){'use strict';this._uri=t;return this;};r.prototype.suspend=function(){'use strict';this._suspended=true;return this;};r.prototype.resume=function(){'use strict';this._suspended=false;this._processQueue();return this;};r.prototype.isUploading=function(){'use strict';return this._inFlight;};r.prototype._createFileUpload=function(t,u,v){'use strict';return new s(t,u,v);};r.prototype._processQueue=function(){'use strict';if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var t=this._waiting.shift();if(this._preprocessHandler){this._preprocessHandler(t,this._processUpload.bind(this));}else this._processUpload(t);this._pending.push(t);}};r.prototype._processUpload=function(t){'use strict';var u=l.createFormData(t.getData()||this._data);if(t.getFile()){u.append(t.getName(),t.getFile());var v=t.getFile().uploadID;if(v)u.append('upload_id',v);}var w=new i().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(u).setStatusElement(this._statusElement).setHandler(this._success.bind(this,t)).setErrorHandler(this._failure.bind(this,t)).setUploadProgressHandler(this._progress.bind(this,t)).setInitialHandler(this._initial.bind(this,t));if(this._relativeTo)w.setRelativeTo(this._relativeTo);w.send();t.setAsyncRequest(w);this._inFlight=true;if(!t.getRetryCount())this.inform('start',t);};r.prototype._abort=function(t){'use strict';if(this._pending.indexOf(t)!==-1){o(this._pending,t);this._processQueue();}o(this._waiting,t);t.abort();};r.prototype._initial=function(t){'use strict';if(t.isAborted())return;this.inform('initial',t);};r.prototype._success=function(t,u){'use strict';if(t.isAborted()){this.inform('success_after_abort',u);return;}this._complete(t);this.inform('success',t.handleSuccess(u));this._processQueue();};r.prototype._retryUpload=function(t){'use strict';t.increaseRetryCount();this._processUpload(t);};r.prototype._failure=function(t,u){'use strict';if(t.isAborted())return;if(u.error===1004&&t.getRetryCount()<this._retryLimit)return this._retryUpload(t);this._complete(t);if(this.inform('failure',t.handleFailure(u))!==false)j.defaultErrorHandler(u);this._processQueue();};r.prototype._progress=function(t,event){'use strict';if(t.isAborted())return;this.inform('progress',t.handleProgress(event));};r.prototype._complete=function(t){'use strict';o(this._pending,t);if(!this._pending.length)this._inFlight=false;};r.isSupported=function(){'use strict';return k.hasFileAPI();};Object.assign(r.prototype,{_limit:10});function s(t,u,v){'use strict';this._name=t;this._file=u;this._data=v;this._success=null;this._response=null;this._progressEvent=null;this._request=null;this._numRetries=0;this._aborted=false;}s.prototype.getName=function(){'use strict';return this._name;};s.prototype.getFile=function(){'use strict';return this._file;};s.prototype.setFile=function(t){'use strict';this._file=t;};s.prototype.getData=function(){'use strict';return this._data;};s.prototype.isComplete=function(){'use strict';return this._success!==null;};s.prototype.isSuccess=function(){'use strict';return this._success===true;};s.prototype.getResponse=function(){'use strict';return this._response;};s.prototype.getProgressEvent=function(){'use strict';return this._progressEvent;};s.prototype.setAsyncRequest=function(t){'use strict';this._request=t;return this;};s.prototype.increaseRetryCount=function(){'use strict';this._numRetries++;return this;};s.prototype.getRetryCount=function(){'use strict';return this._numRetries;};s.prototype.isWaiting=function(){'use strict';return !this._request;};s.prototype.isAborted=function(){'use strict';return this._aborted;};s.prototype.abort=function(){'use strict';this._request=null;this._aborted=true;};s.prototype.handleSuccess=function(t){'use strict';this._success=true;this._response=t;this._progressEvent=null;return this;};s.prototype.handleFailure=function(t){'use strict';this._success=false;this._response=t;this._progressEvent=null;return this;};s.prototype.handleProgress=function(event){'use strict';this._progressEvent=event;return this;};f.exports=r;},null);
__d('AsyncUploadRequest',['AsyncUploadBase'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.setFiles=function(l){'use strict';this._files=h.parseFiles(l);return this;};k.prototype.abort=function(){'use strict';this._uploads.forEach((function(l){return this._abort(l);}).bind(this),this);};k.prototype.send=function(){'use strict';if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var l in this._files)this._files[l].forEach((function(m){this._uploads.push(this._createFileUpload(l,m));}).bind(this));this._waiting=this._uploads.slice(0);this._pending=[];if(this._uploads.length){this._processQueue();}else this._processUpload(this._createFileUpload(null,null));};k.prototype._processQueue=function(){'use strict';j._processQueue.call(this);if(!this._pending.length&&!this._waiting.length)this.inform('complete',this._uploads);};k.isSupported=function(){'use strict';return h.isSupported();};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);
__d('FileForm',['ArbiterMixin','AsyncRequest','AsyncResponse','AsyncUploadRequest','BehaviorsMixin','CurrentUser','DataStore','DOMQuery','Event','Form','JSONPTransport','Parent','URI','isElementNode','mixin','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x,y;function z(ca){var da={},ea=o.scry(ca,'input[type="file"]');ea.forEach(function(fa){da[fa.name]=fa.files;});return da;}function aa(ca){var da=o.scry(ca,'input[type="file"]');da.forEach(function(ea){ea.files=null;});}x=babelHelpers.inherits(ba,v(h,l));y=x&&x.prototype;function ba(ca,da,ea){'use strict';y.constructor.call(this);if(ca.getAttribute('rel')==='async')throw new Error('FileForm cannot be used with Primer forms.');if(ca.getAttribute('method').toUpperCase()!=='POST')throw new Error('FileForm must be used with POST forms.');this._form=ca;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding='multipart/form-data';this._files=null;da&&this.enableBehaviors(da);this._options=ea||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setAllowCrossPageTransition(this._options.allowCrossPageTransition);this.setUploadInParallel(this._options.uploadInParallel);this.setConcurrentLimit(this._options.concurrentLimit);this.setPreprocessHandler(this._options.preprocessHandler);this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);this._listeners=[p.listen(document.documentElement,'submit',this._submit.bind(this)),p.listen(this._form,'click',this._click.bind(this))];n.set(this._form,'FileForm',this);}ba.prototype.getRoot=function(){'use strict';return this._form;};ba.prototype.setAllowCrossOrigin=function(ca){'use strict';this._allowCrossOrigin=!!ca;return this;};ba.prototype.setAllowCrossPageTransition=function(ca){'use strict';this._allowCrossPageTransition=!!ca;return this;};ba.prototype.setUploadInParallel=function(ca){'use strict';this._uploadInParallel=!!ca;return this;};ba.prototype.setConcurrentLimit=function(ca){'use strict';this._concurrentLimit=ca;return this;};ba.prototype.setPreprocessHandler=function(ca){'use strict';this._preprocessHandler=ca;return this;};ba.prototype.setNetworkErrorRetryLimit=function(ca){'use strict';this._retryLimit=ca;return this;};ba.prototype.setFiles=function(ca){'use strict';this._files=ca;return this;};ba.prototype.canUseXHR=function(){'use strict';var ca=('FormData' in window);if(ca)if(!new t(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)ca=false;return ca;};ba.prototype._submit=function(event){'use strict';if(event.isDefaultPrevented()||event.getTarget()!==this._form)return;if(this.inform('submit')===false){event.prevent();return;}return this.canUseXHR()?this._sendViaXHR(event):this._sendViaFrame(event);};ba.prototype._click=function(event){'use strict';var ca=event.getTarget();while(u(ca)){if(ca.type==='submit'){this._clickTarget=ca;setTimeout(this._unclick.bind(this),0);break;}ca=ca.parentNode;}};ba.prototype._unclick=function(){'use strict';this._clickTarget=null;};ba.prototype._sendViaFrame=function(event){'use strict';var ca=this._request=new i();ca.setStatusElement(this._getStatusElement());ca.addStatusIndicator();ca.setOption('useIframeTransport',true);var da=ca.handleResponse.bind(ca),ea=new r('iframe',this._form.action,da),fa=ea.getTransportFrame(),ga=ea.getRequestURI().addQueryData({__iframe:true,__user:m.getID()});this._form.setAttribute('action',ga.toString());this._form.setAttribute('target',fa.name);ca.setJSONPTransport(ea);ca.setURI(ga);ca.setHandler(this.success.bind(this,null));ca.setErrorHandler(this.failure.bind(this,null));ca.setInitialHandler(w(this.initial,this,null));};ba.prototype._sendViaXHR=function(event){'use strict';var ca;if(this._uploadInParallel&&k.isSupported()){ca=new k().setPreprocessHandler(this._preprocessHandler).setData(q.serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);if(this._concurrentLimit)ca.setLimit(this._concurrentLimit);if(this._files){ca.setFiles(this._files);}else ca.setFiles(z(this._form));var da=[ca.subscribe('progress',(function(ia,ja){this.progress(ja,ja.getProgressEvent());}).bind(this)),ca.subscribe('initial',(function(ia,ja){this.initial(ja,ja.getResponse());}).bind(this)),ca.subscribe('success',(function(ia,ja){this.success(ja,ja.getResponse());}).bind(this)),ca.subscribe('start',(function(ia,ja){this.inform('start',{upload:ja});}).bind(this)),ca.subscribe('failure',(function(ia,ja){this.failure(ja,ja.getResponse());return false;}).bind(this)),ca.subscribe('complete',function(){while(da.length)da.pop().unsubscribe();})];}else{var ea;if(this._files){ea=q.createFormData(q.serialize(this._form,this._clickTarget));var fa=k.parseFiles(this._files);for(var ga in fa){var ha=fa[ga];if(ha.length===1){ea.append(ga,ha[0]);}else{ga=ga+'[]';ha.forEach(function(ia){ea.append(ga,ia);});}}}else ea=q.createFormData(this._form,this._clickTarget);ca=new i().setRawData(ea).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(w(this.initial,this,null));}ca.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=ca;event&&event.prevent();};ba.prototype.forceSendViaXHR=function(){'use strict';return this._sendViaXHR(null);};ba.prototype.initial=function(ca){'use strict';return this.inform('initial',{upload:ca});};ba.prototype.success=function(ca,da){'use strict';var ea={response:da,upload:ca};if(this.inform('success',ea)!==false)p.fire(this._form,'success',ea);this._cleanup();};ba.prototype.failure=function(ca,da){'use strict';var ea={response:da,upload:ca};if(this.inform('failure',ea)!==false)if(p.fire(this._form,'error',ea)!==false)j.defaultErrorHandler(da);this._cleanup();};ba.prototype.progress=function(ca,event){'use strict';this.inform('progress',{event:event,upload:ca});};ba.prototype.abort=function(){'use strict';if(this._request){this._request.abort();this._cleanup();}};ba.prototype.clear=function(){'use strict';aa(this._form);};ba.prototype.destroy=function(){'use strict';this._cleanup();while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;n.remove(this._form,'FileForm');};ba.prototype._cleanup=function(){'use strict';this._request=null;};ba.prototype._getStatusElement=function(){'use strict';return s.byClass(this._form,'stat_elem')||this._form;};ba.getInstance=function(ca){'use strict';return n.get(ca,'FileForm');};Object.assign(ba,{EVENTS:['start','submit','initial','progress','success','failure']});f.exports=ba;},null);
__d('submitForm',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(j){var k=h.scry(j,'input[type="submit"]')[0];if(k){k.click();}else{k=h.create('input',{type:'submit',className:'hidden_elem'});h.appendContent(j,k);k.click();h.remove(k);}};f.exports=i;},null);
__d('FileInputUploader',['ArbiterMixin','DOM','DTSG','FileForm','Form','mixin','submitForm'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,m(h));p=o&&o.prototype;function q(r){'use strict';p.constructor.call(this);this._inputElem=r;this._data={};}q.prototype.setInput=function(r){'use strict';this._inputElem=r;return this;};q.prototype.setURI=function(r){'use strict';this._uri=r;return this;};q.prototype.setData=function(r){'use strict';this._data=r;return this;};q.prototype.setPreprocessHandler=function(r){'use strict';this._preprocessHandler=r;return this;};q.prototype.setNetworkErrorRetryLimit=function(r){'use strict';this._retryLimit=r;return this;};q.prototype.setFiles=function(r){'use strict';this._files=r;return this;};q.prototype.setAllowCrossOrigin=function(r){'use strict';this._allowCrossOrigin=!!r;return this;};q.prototype.setAllowCrossPageTransition=function(r){'use strict';this._allowCrossPageTransition=!!r;return this;};q.prototype.setUploadInParallel=function(r){'use strict';this._uploadInParallel=!!r;return this;};q.prototype.setConcurrentLimit=function(r){'use strict';this._concurrentLimit=r;return this;};q.prototype.abort=function(){'use strict';if(this._fileForm){this._fileForm.abort();this._destroyFileForm();}};q.prototype.send=function(){'use strict';this._createForm();var r=this._inputElem.cloneNode(false);i.replace(this._inputElem,r);i.appendContent(this._formElem,this._inputElem);i.appendContent(document.body,this._formElem);n(this._formElem);i.replace(r,this._inputElem);this._removeFormEl();};q.prototype._onFileFormEvent=function(r,s){'use strict';if(r==='success'||r==='failure')this._destroyFileForm();this.inform(r,s);};q.prototype._createForm=function(){'use strict';this._destroyFileForm();this._formElem=i.create('form',{action:this._uri,method:'post'});this._fileForm=new k(this._formElem,null,{allowCrossOrigin:this._allowCrossOrigin,allowCrossPageTransition:this._allowCrossPageTransition,uploadInParallel:this._uploadInParallel,concurrentLimit:this._concurrentLimit,preprocessHandler:this._preprocessHandler,networkErrorRetryLimit:this._retryLimit});if(this._files)this._fileForm.setFiles(this._files);this._fileForm.subscribe(k.EVENTS,this._onFileFormEvent.bind(this));l.createHiddenInputs(babelHelpers._extends({fb_dtsg:j.getToken()},this._data),this._formElem);};q.prototype._removeFormEl=function(){'use strict';i.remove(this._formElem);this._formElem=null;};q.prototype._destroyFileForm=function(){'use strict';if(this._fileForm){this._fileForm.destroy();this._fileForm=null;}};f.exports=q;},null);
__d('Optimus',['Event','Parent'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={};function k(m,n){var o=n.getTarget();if(!o)return;var p=j[m];for(var q in p){var r=i.byAttribute(o,q);if(r)do{var s=p[q][r.getAttribute(q)];if(s&&s.handleOptimus(m,r,n)===false)break;}while(r=i.byAttribute(r.parentNode,q));}}function l(m,n,o,p){if(!j[m]){j[m]={};h.listen(document.documentElement,m,k.bind(null,m));}if(!j[m][n])j[m][n]={};if(!j[m][n][o])j[m][n][o]=p;}f.exports={addRelClick:function(m,n){l('click','rel',m,n);},addEventListener:l};},null);
__d('PopoverMenuShowOnHover',['Event'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=250;function j(k){'use strict';this._popoverMenu=k;this._listeners=[];}j.prototype.enable=function(){'use strict';this._attachMouseListeners(this._popoverMenu.getTriggerElem());this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));};j.prototype.disable=function(){'use strict';while(this._listeners.length)this._listeners.pop().remove();if(this._setMenuSubscription){this._setMenuSubscription.unsubscribe();this._setMenuSubscription=null;}};j.prototype._onSetMenu=function(){'use strict';this._attachMouseListeners(this._popoverMenu.getPopover().getLayer().getRoot());};j.prototype._attachMouseListeners=function(k){'use strict';var l=this._popoverMenu.getPopover(),m=null;this._listeners.push(h.listen(k,'mouseleave',l.hideLayer.bind(l)),h.listen(k,'mouseenter',function(){m=Date.now();l.showLayer();}),h.listen(k,'click',function(n){if(Date.now()<m+i)n.stop();}));};f.exports=j;},null);
__d('TimelineDrag',['ArbiterMixin','Event','Locale','Style','Vector','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,m(h));o=n&&n.prototype;function p(q,r,s){'use strict';o.constructor.call(this);s=s||{};this._listenOn=s.listenOn;this._offsetInput=r;this._defaultOffset=s.default_offset;this._killClicks=s.killClicks;this._vertical=true;this._RTLXSwitch=false;this.setPicture(q,s);}p.prototype.setPicture=function(q,r){'use strict';if(!q)return false;r=r||{};this._picture=q;this._defaultOffset=r.default_offset;if(r.offsetInput)this._offsetInput=r.offsetInput;if(r.vertical!==undefined)this._vertical=r.vertical;if(r.height)this._containerHeight=r.height;if(r.width)this._containerWidth=r.width;if(this._vertical){this._offsetType='top';this._eventCoord='y';}else{this._RTLXSwitch=j.isRTL();this._offsetType='left';this._eventCoord='x';}if(this._picture.complete){this._initialLoad();}else this._loadListener=i.listen(this._picture,'load',(function(){this._loadListener.remove();this._loadListener=null;this._initialLoad();}).bind(this));};p.prototype.destroy=function(){'use strict';this._stopDrag();this._saveOffset();this._mousedown&&this._mousedown.remove();this._mousedown=null;this._onclick&&this._onclick.remove();this._onclick=null;this._loadListener&&this._loadListener.remove();this._loadListener=null;};p.prototype._initialLoad=function(){'use strict';var q=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=i.listen(q,'mousedown',this._onMouseDown.bind(this));if(this._vertical){this._maxOffset=this._containerHeight-this._picture.offsetHeight;}else this._maxOffset=this._containerWidth-this._picture.offsetWidth;if(this._defaultOffset!==undefined)this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();this._onclick=null;if(this._killClicks)this._onclick=i.listen(q,'click',this._onClick.bind(this));this._saveOffset();};p.prototype._onClick=function(event){'use strict';event.kill();};p.prototype._onMouseDown=function(event){'use strict';var q=parseInt(k.get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=q-l.getEventPosition(event)[this._eventCoord];this._startDrag();event.kill();};p.prototype._startDrag=function(){'use strict';if(!this._dragStarted){this.inform('startdrag',this);this._dragTokens=[i.listen(document.documentElement,'mouseup',this._onMouseUp.bind(this)),i.listen(document.documentElement,'mousemove',this._onMouseMove.bind(this))];this._dragStarted=true;}};p.prototype._saveOffset=function(){'use strict';var q=parseInt(k.get(this._picture,this._offsetType),10);if(this._RTLXSwitch){this._offsetInput.value=q+this._containerWidth-this._picture.offsetWidth;}else this._offsetInput.value=q;};p.prototype._stopDrag=function(){'use strict';if(this._dragStarted){this.inform('stopdrag',this);this._dragStarted=false;this._dragTokens.forEach(function(q){q.remove();});this._saveOffset();}};p.prototype._onMouseUp=function(event){'use strict';this._stopDrag();event.kill();};p.prototype._setOffset=function(q){'use strict';if(this._RTLXSwitch){q=Math.max(0,Math.min(q,-this._maxOffset));}else q=Math.min(0,Math.max(q,this._maxOffset));k.set(this._picture,this._offsetType,q+'px');};p.prototype._onMouseMove=function(event){'use strict';this._setOffset(this._pictureStartDragOffset+l.getEventPosition(event)[this._eventCoord]);event.kill();};f.exports=p;},null);
__d('TimelineCover',['Arbiter','Button','CSS','DOM','DOMScroll','Event','FileInputUploader','Focus','HTML','PageTransitions','Parent','ReloadPage','Run','Style','TimelineDrag','$','cx','fbt','ge','setImmediate','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){if(c.__markCompiled)c.__markCompiled();function ca(da,ea,fa){'use strict';this.root=w('fbProfileCover');if(typeof ea==='object'){this._coverHeight=ea.cover_height;this._coverWidth=ea.cover_width;this.previewing=ea.previewing;this._isLegacy=false;}else{this._isLegacy=true;this._coverHeight=ea;this.previewing=fa;}this._parentSection=r.byClass(this.root,'fbTimelineSection');this.cover=k.find(this.root,'.cover');ca.instance=this;this.editing=false;t.onBeforeUnload(this.onBeforeUnload.bind(this));if(!this._parentSection)this._parentSection=r.byClass(this.root,'fbEventHeader');if(this.previewing)aa((function(){this.editMode();this.updateCoverImage(this.previewing);}).bind(this));}ca.prototype.showLoadingIndicator=function(){'use strict';var da=z('fbCoverImageContainer');if(da)j.addClass(da,'opaquedLoading');};ca.prototype.hideLoadingIndicator=function(){'use strict';var da=z('fbCoverImageContainer');if(da)j.removeClass(da,'opaquedLoading');};ca.prototype.onBeforeUnload=function(){'use strict';if(this.isInEditMode())return y._("If you leave this page, your cover photo will not be saved. To save, press the \"save\" button below your cover photo.");};ca.prototype.isCoverImageVerticalFlow=function(da){'use strict';return !da.style.height;};ca.prototype.editMode=function(){'use strict';var da=k.find(this.root,'button.saveButton');i.setEnabled(k.find(this.root,'button.cancelButton'),true);i.setEnabled(da,true);this.hideLoadingIndicator();this._coverImage=k.scry(this.root,'.coverImage')[0];var ea=k.scry(this._coverImage,'.coverWrap')[0];if(ea){var fa=k.find(ea,'.coverPhotoImg');this._originalIsVertical=this.isCoverImageVerticalFlow(fa);this._originalOffset=u.get(fa,this._originalIsVertical?'top':'left');}j.addClass(this._parentSection,'fbEditCover');l.scrollTo(this.root);if(this.previewing){k.remove(this._coverImage);j.show(this._coverImage);}var ga=k.scry(this._coverImage,'.coverPhotoImg')[0];if(ga)this._createDragger();this.editing=true;o.set(da);h.inform('CoverPhotoEdit',{sender:this,state:"open"});};ca.prototype._exitEditMode=function(){'use strict';if(this._timelineDrag){this._timelineDrag.destroy();this._timelineDrag=null;}k.find(this.root,'input.hiddenPhotoID').value=null;i.setEnabled(k.find(this.root,'button.cancelButton'),false);i.setEnabled(k.find(this.root,'button.saveButton'),false);j.removeClass(this._parentSection,'fbEditCover');this.hideLoadingIndicator();this.previewing=false;h.inform('CoverPhotoEdit',{sender:this,state:"closed"});this.editing=false;};ca.prototype._createDragger=function(da){'use strict';var ea;if(this._isLegacy){ea=k.find(this.root,'input.photoOffsetInput');this._originalIsVertical=true;}else{var fa=da===undefined?this._originalIsVertical:da;ea=fa?k.find(this.root,'input.photoOffsetYInput'):k.find(this.root,'input.photoOffsetXInput');}this._timelineDrag=new v(k.find(this.root,'.coverImage .coverPhotoImg'),ea,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:fa,killClicks:true});};ca.prototype.updateCoverImage=function(da,ea){'use strict';if(ea)this.editMode();k.find(this.root,'input.hiddenPhotoID').value=da;i.setEnabled(k.find(this.root,'button.saveButton'),true);if(ea)k.replace(k.find(this.root,'.coverImage'),typeof ea==='string'?p(ea):ea);var fa=k.find(k.find(this.root,'.coverImage'),'.coverPhotoImg'),ga=this.isCoverImageVerticalFlow(fa),ha;if(this._isLegacy){ha=k.find(this.root,'input.photoOffsetInput');}else ha=ga?k.find(this.root,'input.photoOffsetYInput'):k.find(this.root,'input.photoOffsetXInput');if(this._timelineDrag){this._timelineDrag.setPicture(fa,{offsetInput:ha,vertical:ga});}else this._createDragger(ga);this._updateHeader();};ca.prototype.cancelUpdate=function(){'use strict';this._reloadAfterNextUpdate=false;k.remove(k.scry(this.root,'.coverImage')[0]);k.prependContent(this.cover,this._coverImage);if(this._originalOffset!==undefined)u.set(k.find(this._coverImage,'.coverPhotoImg'),this._originalIsVertical?'top':'left',this._originalOffset);this._exitEditMode();this._updateHeader();};ca.staticSaveComplete=function(){'use strict';ca.getInstance().saveComplete();};ca.prototype.saveComplete=function(){'use strict';if(this._reloadAfterNextUpdate)s.now();this._coverImage=k.scry(this.root,'.coverImage')[0];var da=r.byClass(this.root,'fbTimelineTopSectionBase');da&&j.removeClass(da,"_6_5");this._exitEditMode();this._updateHeader();q.rewriteCurrentURI(q.getCurrentURI().getUnqualifiedURI(),q.getCurrentURI().removeQueryData('preview_cover'));};ca.prototype.isInEditMode=function(){'use strict';return this.editing;};ca.prototype._updateHeader=function(){'use strict';var da=k.scry(this.root,'.coverImage')[0];if(!da)return;var ea=j.hasClass(da,'coverNoImage'),fa=j.hasClass(this._parentSection,'noCoverImage');if(ea!==fa)j.conditionClass(this._parentSection,'noCoverImage',ea);};ca.getInstance=function(){'use strict';return ca.instance;};ca.staticUpdateCoverImage=function(da){'use strict';ca.getInstance().updateCoverImage(null,da);};ca.prototype.setupFileUpload=function(da,ea,fa){'use strict';da.subscribe('change',(function(){var ga=new n(da.getInput()).setURI(ea).setAllowCrossOrigin(true);ga.subscribe('failure',function(){ca.showErrorDialog(y._("Cover Upload Failed"),y._("Uploading the new cover picture failed. Please try again."));});ga.subscribe(['success','failure'],(function(){this.hideLoadingIndicator();da.clear();j.removeClass(da.getControl(),fa);da.getInput().disabled=false;}).bind(this));this.showLoadingIndicator();this._reloadAfterNextUpdate=true;ga.send();j.addClass(da.getControl(),fa);da.getInput().disabled=true;}).bind(this));};ca.setupFileUpload=function(da,ea,fa){'use strict';this.getInstance().setupFileUpload(da,ea,fa);};ca.imageUploadDone=function(da,ea){'use strict';this.getInstance().updateCoverImage(da,ea);};ca.showErrorDialog=function(da,ea){'use strict';new Dialog().setTitle(da).setButtons(Dialog.OK).setBody(ea).show();this.getInstance().hideLoadingIndicator();};ca.initFileUploadMenu=function(da){'use strict';ca.showLoadingAfterFileUpload(da.getForm());};ca.showLoadingAfterFileUpload=function(da){'use strict';ba(da.subscribe('submit',function(){ca.getInstance().showLoadingIndicator();}));};ca.instance=null;f.exports=ca;},null);
__d('legacy:TimelineCover',['TimelineCover'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.TimelineCover=c('TimelineCover');},3);
__d('ButtonGroupX',['ArbiterMixin','mixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,i(h));k=j&&j.prototype;function l(m,n){'use strict';k.constructor.call(this);n=n||{};this._root=m;this._radioButtons=n.radioButtons||[];this._selected=n.selected;this.initButtonListeners();}l.prototype.initButtonListeners=function(){'use strict';var m=this._radioButtons.length;while(m--){var n=this._radioButtons[m];n.subscribe('select',this.selectButton.bind(this,n));}};l.prototype.getSelected=function(){'use strict';return this._selected;};l.prototype.getSelectedValue=function(){'use strict';return this._selected?this._selected.getValue():null;};l.prototype.selectButton=function(m){'use strict';if(this._selected!==m){this.setSelected(m);this.inform('change',{selected:m});}return this;};l.prototype.setSelected=function(m){'use strict';if(this._selected!==m){if(this._selected)this._selected.setSelected(false);m.setSelected(true);this._selected=m;}return this;};l.prototype.setSelectedValue=function(m){'use strict';var n=this._radioButtons.length;while(n--){var o=this._radioButtons[n];if(o.getValue()===m)return this.setSelected(o);}return this;};f.exports=l;},null);